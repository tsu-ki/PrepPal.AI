{"version":3,"sources":["../../../src/react/sign-in/index.ts","../../../src/react/sign-in/root.tsx","../../../src/internals/constants/index.ts","../../../src/internals/machines/form/form.context.ts","../../../src/internals/machines/form/form.machine.ts","../../../src/internals/errors/index.ts","../../../src/internals/utils/inspector/index.ts","../../../src/internals/machines/sign-in/verification.machine.ts","../../../src/internals/machines/shared/shared.actions.ts","../../../src/internals/machines/sign-in/utils/starting-factors.ts","../../../src/internals/machines/utils/assert.ts","../../../src/internals/machines/sign-in/verification.types.ts","../../../src/internals/machines/sign-in/router.machine.ts","../../../src/internals/machines/third-party/third-party.actors.ts","../../../src/internals/machines/utils/clerkjs.ts","../../../src/internals/machines/third-party/third-party.machine.ts","../../../src/internals/machines/utils/next.ts","../../../src/internals/machines/sign-in/reset-password.machine.ts","../../../src/internals/machines/sign-in/start.machine.ts","../../../src/internals/machines/utils/formatters.ts","../../../src/internals/machines/sign-in/router.selectors.ts","../../../src/internals/machines/sign-in/router.types.ts","../../../src/react/router/next.ts","../../../src/react/router/react.tsx","../../../src/react/router/router.ts","../../../src/react/router/virtual.ts","../../../src/react/utils/create-context-from-actor-ref.ts","../../../src/react/sign-in/context/router.context.ts","../../../src/react/sign-in/context/strategies.context.ts","../../../src/react/common/form/index.tsx","../../../../../node_modules/@radix-ui/primitive/dist/packages/core/primitive/src/index.ts","../../../../../node_modules/@radix-ui/primitive/dist/packages/core/primitive/src/primitive.tsx","../../../src/react/hooks/use-password.hook.ts","../../../src/react/utils/generate-password-error-text.ts","../../../src/react/utils/is-react-fragment.ts","../../../src/react/common/form/otp.tsx","../../../src/react/common/form/types.ts","../../../src/react/utils/path-inference/next.tsx","../../../src/react/utils/path-inference/utils.ts","../../../src/react/sign-in/step.tsx","../../../src/react/sign-in/choose-strategy.tsx","../../../src/react/hooks/use-active-tags.hook.ts","../../../src/react/utils/create-context-for-dom-validation.ts","../../../src/react/sign-in/reset-password.tsx","../../../src/react/sign-in/start.tsx","../../../src/react/sign-in/verifications.tsx","../../../src/internals/machines/utils/strategies.ts","../../../src/react/sign-in/action/action.tsx","../../../src/react/common/index.ts","../../../src/react/sign-in/action/navigate.tsx","../../../src/react/sign-in/action/resend.tsx","../../../src/react/sign-in/passkey.tsx","../../../src/react/sign-in/identifiers.tsx"],"sourcesContent":["// Mark as a client-only package. This will error if you try to import it in a React Server Component.\nimport 'client-only';\n\nexport { SignInRoot as SignIn, SignInRoot as Root } from './root';\nexport { SignInStep as Step } from './step';\nexport { SignInAction as Action } from './action';\nexport { SignInPasskey as Passkey } from './passkey';\nexport { SignInSupportedStrategy as SupportedStrategy } from './choose-strategy';\n\nexport {\n  SignInFirstFactor as FirstFactor,\n  SignInSecondFactor as SecondFactor,\n  SignInStrategy as Strategy,\n} from './verifications';\n\nexport { SignInSafeIdentifier as SafeIdentifier, SignInSalutation as Salutation } from './identifiers';\n","import { ClerkLoaded, ClerkLoading, useClerk } from '@clerk/clerk-react';\nimport { eventComponentMounted } from '@clerk/shared/telemetry';\nimport React, { useEffect } from 'react';\nimport { createActor } from 'xstate';\n\nimport { ROUTING, SIGN_IN_DEFAULT_BASE_PATH, SIGN_UP_DEFAULT_BASE_PATH } from '~/internals/constants';\nimport { FormStoreProvider, useFormStore } from '~/internals/machines/form/form.context';\nimport type { SignInRouterInitEvent } from '~/internals/machines/sign-in';\nimport { SignInRouterMachine } from '~/internals/machines/sign-in';\nimport { inspect } from '~/internals/utils/inspector';\nimport { Router, useClerkRouter, useNextRouter, useVirtualRouter } from '~/react/router';\nimport { SignInRouterCtx } from '~/react/sign-in/context';\n\nimport { Form } from '../common/form';\nimport { usePathnameWithoutCatchAll } from '../utils/path-inference/next';\n\ntype SignInFlowProviderProps = {\n  children: React.ReactNode;\n  exampleMode?: boolean;\n};\n\nconst actor = createActor(SignInRouterMachine, { inspect });\nactor.start();\n\nfunction SignInFlowProvider({ children, exampleMode }: SignInFlowProviderProps) {\n  const clerk = useClerk();\n  const router = useClerkRouter();\n  const formRef = useFormStore();\n\n  useEffect(() => {\n    if (!clerk || !router) {\n      return;\n    }\n\n    // @ts-expect-error -- This is actually an IsomorphicClerk instance\n    clerk.addOnLoaded(() => {\n      const evt: SignInRouterInitEvent = {\n        type: 'INIT',\n        clerk,\n        exampleMode,\n        formRef,\n        router,\n        signUpPath: SIGN_UP_DEFAULT_BASE_PATH,\n      };\n\n      if (actor.getSnapshot().can(evt)) {\n        actor.send(evt);\n      }\n    });\n\n    // Ensure that the latest instantiated formRef is attached to the router\n    if (formRef && actor.getSnapshot().can({ type: 'RESET.STEP' })) {\n      actor.send({\n        type: 'FORM.ATTACH',\n        formRef,\n      });\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [clerk, exampleMode, formRef?.id, !!router]);\n\n  return <SignInRouterCtx.Provider actorRef={actor}>{children}</SignInRouterCtx.Provider>;\n}\n\nexport type SignInRootProps = SignInFlowProviderProps & {\n  /**\n   * Fallback markup to render while Clerk is loading\n   */\n  fallback?: React.ReactNode;\n  /**\n   * The base path for your sign-in route.\n   * Will be automatically inferred in Next.js.\n   * @example `/sign-in`\n   */\n  path?: string;\n  /**\n   * If you want to render Clerk Elements in e.g. a modal, use the `virtual` routing mode.\n   */\n  routing?: ROUTING;\n};\n\n/**\n * Root component for the sign-in flow. It sets up providers and state management for its children.\n * Must wrap all sign-in related components.\n *\n * @param {string} path - The root path the sign-in flow is mounted at. Will be automatically inferred in Next.js. You can set it to `/sign-in` for example.\n * @param {React.ReactNode} fallback - Fallback markup to render while Clerk is loading. Default: `null`\n * @param {string} routing - If you want to render Clerk Elements in e.g. a modal, use the `'virtual'` routing mode. Default: `'path'`\n *\n * @example\n * import * as SignIn from \"@clerk/elements/sign-in\"\n *\n * export default SignInPage = () => (\n *  <SignIn.Root>\n *  </SignIn.Root>\n * )\n */\nexport function SignInRoot({\n  children,\n  exampleMode = false,\n  fallback = null,\n  path: pathProp,\n  routing = ROUTING.path,\n}: SignInRootProps): JSX.Element | null {\n  const clerk = useClerk();\n  const inferredPath = usePathnameWithoutCatchAll();\n  const path = pathProp || inferredPath || SIGN_IN_DEFAULT_BASE_PATH;\n\n  clerk.telemetry?.record(\n    eventComponentMounted('Elements_SignInRoot', {\n      exampleMode,\n      fallback: Boolean(fallback),\n      path,\n      routing,\n    }),\n  );\n\n  // TODO: eventually we'll rely on the framework SDK to specify its host router, but for now we'll default to Next.js\n  const router = (routing === ROUTING.virtual ? useVirtualRouter : useNextRouter)();\n  const isRootPath = path === router.pathname();\n\n  return (\n    <Router\n      basePath={path}\n      router={router}\n    >\n      <FormStoreProvider>\n        <SignInFlowProvider exampleMode={exampleMode}>\n          {isRootPath ? (\n            <ClerkLoading>\n              <Form>{fallback}</Form>\n            </ClerkLoading>\n          ) : null}\n          <ClerkLoaded>{children}</ClerkLoaded>\n        </SignInFlowProvider>\n      </FormStoreProvider>\n    </Router>\n  );\n}\n","export const SSO_CALLBACK_PATH_ROUTE = '/sso-callback';\nexport const MAGIC_LINK_VERIFY_PATH_ROUTE = '/verify';\n\nexport const SIGN_IN_DEFAULT_BASE_PATH =\n  process.env.CLERK_SIGN_IN_URL ?? process.env.NEXT_PUBLIC_CLERK_SIGN_IN_URL ?? '/sign-in';\nexport const SIGN_UP_DEFAULT_BASE_PATH =\n  process.env.CLERK_SIGN_UP_URL ?? process.env.NEXT_PUBLIC_CLERK_SIGN_UP_URL ?? '/sign-up';\n\n// The version that Next added support for the window.history.pushState and replaceState APIs.\n// ref: https://nextjs.org/blog/next-14-1#windowhistorypushstate-and-windowhistoryreplacestate\nexport const NEXT_WINDOW_HISTORY_SUPPORT_VERSION = '14.1.0';\n\nexport const SEARCH_PARAMS = {\n  createdSession: '__clerk_created_session',\n  handshake: '__clerk_handshake',\n  help: '__clerk_help',\n  invitationToken: '__clerk_invitation_token',\n  modalState: '__clerk_modal_state',\n  satelliteUrl: '__clerk_satellite_url',\n  status: '__clerk_status',\n  synced: '__clerk_synced',\n  ticket: '__clerk_ticket',\n  transfer: '__clerk_transfer',\n} as const;\n\nexport const RESENDABLE_COUNTDOWN_DEFAULT = 60;\n\nexport const CAPTCHA_ELEMENT_ID = 'clerk-captcha';\n\n// Pulled from: https://github.com/clerk/javascript/blob/c7d626292a9fd12ca0f1b31a1035e711b6e99531/packages/clerk-js/src/core/constants.ts#L15\nexport const ERROR_CODES = {\n  FORM_IDENTIFIER_NOT_FOUND: 'form_identifier_not_found',\n  FORM_PASSWORD_INCORRECT: 'form_password_incorrect',\n  INVALID_STRATEGY_FOR_USER: 'strategy_for_user_invalid',\n  NOT_ALLOWED_TO_SIGN_UP: 'not_allowed_to_sign_up',\n  OAUTH_ACCESS_DENIED: 'oauth_access_denied',\n  OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML: 'oauth_email_domain_reserved_by_saml',\n  NOT_ALLOWED_ACCESS: 'not_allowed_access',\n  SAML_USER_ATTRIBUTE_MISSING: 'saml_user_attribute_missing',\n  USER_LOCKED: 'user_locked',\n};\n\nexport const ROUTING = {\n  path: 'path',\n  virtual: 'virtual',\n} as const;\n\nexport type ROUTING = (typeof ROUTING)[keyof typeof ROUTING];\n","import { createActorContext } from '@xstate/react';\nimport type { SnapshotFrom } from 'xstate';\n\nimport { FormMachine } from '~/internals/machines/form';\nimport { inspect } from '~/internals/utils/inspector';\n\nexport type SnapshotState = SnapshotFrom<typeof FormMachine>;\n\nconst FormMachineContext = createActorContext(FormMachine, { inspect });\n\nexport const FormStoreProvider = FormMachineContext.Provider;\nexport const useFormStore = FormMachineContext.useActorRef;\nexport const useFormSelector = FormMachineContext.useSelector;\n\n/**\n * Selects a global error, if it exists\n */\nexport const globalErrorsSelector = (state: SnapshotState) => state.context.errors;\n\n/**\n * Selects if a specific field has a value\n */\nexport const fieldValueSelector = (name: string | undefined) => (state: SnapshotState) =>\n  name ? state.context.fields.get(name)?.value : '';\n\n/**\n * Selects if a specific field has a value\n */\nexport const fieldHasValueSelector = (name: string | undefined) => (state: SnapshotState) =>\n  Boolean(fieldValueSelector(name)(state));\n\n/**\n * Selects field-specific feedback, if they exist\n */\nexport const fieldFeedbackSelector = (name: string | undefined) => (state: SnapshotState) =>\n  name ? state.context.fields.get(name)?.feedback : undefined;\n","import { isKnownError } from '@clerk/shared/error';\nimport { snakeToCamel } from '@clerk/shared/underscore';\nimport type { MachineContext } from 'xstate';\nimport { assign, enqueueActions, setup } from 'xstate';\n\nimport { ClerkElementsError, ClerkElementsFieldError } from '~/internals/errors';\n\nimport type { FieldDetails, FormDefaultValues, FormFields } from './form.types';\n\nexport interface FormMachineContext extends MachineContext {\n  defaultValues: FormDefaultValues;\n  errors: ClerkElementsError[];\n  fields: FormFields;\n  hidden?: Set<string>;\n  missing?: Set<string>;\n  optional?: Set<string>;\n  progressive: boolean;\n  required?: Set<string>;\n}\n\nexport type FormMachineEvents =\n  | { type: 'FIELD.ADD'; field: Pick<FieldDetails, 'name' | 'value'> }\n  | { type: 'FIELD.REMOVE'; field: Pick<FieldDetails, 'name'> }\n  | {\n      type: 'MARK_AS_PROGRESSIVE';\n      defaultValues: FormDefaultValues;\n      missing: string[];\n      optional: string[];\n      required: string[];\n    }\n  | { type: 'UNMARK_AS_PROGRESSIVE' }\n  | {\n      type: 'FIELD.UPDATE';\n      field: Pick<FieldDetails, 'name' | 'value'>;\n    }\n  | { type: 'ERRORS.SET'; error: any }\n  | { type: 'ERRORS.CLEAR' }\n  | {\n      type: 'FIELD.FEEDBACK.SET';\n      field: Pick<FieldDetails, 'name' | 'feedback'>;\n    }\n  | {\n      type: 'FIELD.FEEDBACK.CLEAR';\n      field: Pick<FieldDetails, 'name'>;\n    }\n  | { type: 'FIELD.FEEDBACK.CLEAR.ALL' };\n\ntype FormMachineTypes = {\n  events: FormMachineEvents;\n  context: FormMachineContext;\n};\n\nexport type TFormMachine = typeof FormMachine;\n\n/**\n * A machine for managing form state.\n * This machine is used alongside our other, flow-specific machines and a reference to a spawned FormMachine actor is used in the flows to interact with the form state.\n */\nexport const FormMachine = setup({\n  actions: {\n    setGlobalErrors: assign({\n      errors: (_, params: { errors: ClerkElementsError[] }) => [...params.errors],\n    }),\n    setFieldFeedback: assign({\n      fields: ({ context }, params: Pick<FieldDetails, 'name' | 'feedback'>) => {\n        if (!params.name) {\n          throw new Error('Field name is required');\n        }\n\n        if (context.fields.has(params.name)) {\n          // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n          context.fields.get(params.name)!.feedback = params.feedback;\n        }\n\n        return context.fields;\n      },\n    }),\n  },\n  types: {} as FormMachineTypes,\n}).createMachine({\n  id: 'Form',\n  context: () => ({\n    defaultValues: new Map(),\n    errors: [],\n    fields: new Map(),\n    progressive: false,\n  }),\n  on: {\n    'ERRORS.SET': {\n      actions: enqueueActions(({ enqueue, event }) => {\n        if (isKnownError(event.error)) {\n          const fields: Record<string, ClerkElementsFieldError[]> = {};\n          const globalErrors: ClerkElementsError[] = [];\n\n          for (const error of event.error.errors || [event.error]) {\n            const name = snakeToCamel(error.meta?.paramName);\n\n            if (!name) {\n              globalErrors.push(ClerkElementsError.fromAPIError(error));\n              continue;\n            } else if (!fields[name]) {\n              fields[name] = [];\n            }\n\n            fields[name]?.push(ClerkElementsFieldError.fromAPIError(error));\n          }\n\n          enqueue({\n            type: 'setGlobalErrors',\n            params: {\n              errors: globalErrors,\n            },\n          });\n\n          for (const field in fields) {\n            enqueue({\n              type: 'setFieldFeedback',\n              params: {\n                name: field,\n                feedback: {\n                  type: 'error',\n                  message: fields[field][0],\n                },\n              },\n            });\n          }\n        }\n      }),\n    },\n    'ERRORS.CLEAR': {\n      actions: assign({\n        errors: () => [],\n      }),\n    },\n    'FIELD.ADD': {\n      actions: assign({\n        fields: ({ context, event }) => {\n          if (!event.field.name) {\n            throw new Error('Field name is required');\n          }\n\n          event.field.value = event.field.value || context.defaultValues.get(event.field.name) || undefined;\n\n          context.fields.set(event.field.name, event.field);\n          return context.fields;\n        },\n      }),\n    },\n    'FIELD.UPDATE': {\n      actions: assign({\n        fields: ({ context, event }) => {\n          if (!event.field.name) {\n            throw new Error('Field name is required');\n          }\n\n          if (context.fields.has(event.field.name)) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            context.fields.get(event.field.name)!.value = event.field.value;\n          }\n\n          return context.fields;\n        },\n      }),\n    },\n    'FIELD.REMOVE': {\n      actions: assign({\n        fields: ({ context, event }) => {\n          if (!event.field.name) {\n            throw new Error('Field name is required');\n          }\n\n          context.fields.delete(event.field.name);\n          return context.fields;\n        },\n      }),\n    },\n    'FIELD.FEEDBACK.SET': {\n      actions: [\n        {\n          type: 'setFieldFeedback',\n          params: ({ event }) => event.field,\n        },\n      ],\n    },\n    'FIELD.FEEDBACK.CLEAR': {\n      actions: assign({\n        fields: ({ context, event }) => {\n          if (!event.field.name) {\n            throw new Error('Field name is required');\n          }\n          if (context.fields.has(event.field.name)) {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            context.fields.get(event.field.name)!.feedback = undefined;\n          }\n\n          return context.fields;\n        },\n      }),\n    },\n    'FIELD.FEEDBACK.CLEAR.ALL': {\n      actions: assign({\n        fields: ({ context }) => {\n          context.fields.forEach(field => {\n            field.feedback = undefined;\n          });\n\n          return context.fields;\n        },\n      }),\n    },\n    MARK_AS_PROGRESSIVE: {\n      actions: assign(({ event }) => {\n        const missing = new Set(event.missing);\n\n        return {\n          defaultValues: event.defaultValues,\n          hidden: new Set([...event.required.filter(f => !missing.has(f)), ...event.optional]),\n          missing,\n          optional: new Set(event.optional),\n          progressive: true,\n          required: new Set(event.required),\n        };\n      }),\n    },\n    UNMARK_AS_PROGRESSIVE: {\n      actions: assign({\n        defaultValues: new Map(),\n        hidden: undefined,\n        missing: undefined,\n        optional: undefined,\n        progressive: false,\n        required: undefined,\n      }),\n    },\n  },\n});\n","import type { ClerkAPIError } from '@clerk/types';\n\nexport abstract class ClerkElementsErrorBase extends Error {\n  clerkError = true;\n  clerkElementsError = true;\n  rawMessage: string;\n\n  constructor(\n    readonly code: string,\n    message: string,\n  ) {\n    super(message);\n\n    this.name = 'ClerkElementsError';\n    this.rawMessage = message;\n  }\n\n  toString() {\n    return `[${this.name}]\\nCode: ${this.code}\\nMessage: ${this.message}`;\n  }\n}\n\nexport class ClerkElementsError extends ClerkElementsErrorBase {\n  static fromAPIError(error: ClerkAPIError) {\n    return new ClerkElementsError(error.code, error.longMessage || error.message);\n  }\n\n  constructor(code: string, message: string) {\n    super(code, message);\n    this.name = 'ClerkElementsError';\n  }\n}\n\nexport class ClerkElementsRuntimeError extends ClerkElementsErrorBase {\n  constructor(message: string) {\n    super('elements_runtime_error', message);\n    this.name = 'ClerkElementsRuntimeError';\n  }\n}\n\nexport class ClerkElementsFieldError extends ClerkElementsErrorBase {\n  static fromAPIError(error: ClerkAPIError) {\n    return new ClerkElementsFieldError(error.code, error.longMessage || error.message);\n  }\n\n  constructor(code: string, message: string) {\n    super(code, message);\n    this.name = 'ClerkElementsFieldError';\n  }\n\n  get validityState() {\n    return this.code;\n  }\n\n  get forceMatch() {\n    return true;\n  }\n\n  matchFn = () => true;\n}\n","import type { InspectionEvent, Observer } from 'xstate';\n\nimport { getInspector as getBrowserInspector } from './browser';\nimport { getInspector as getConsoleInspector } from './console';\n\nexport let inspect: Observer<InspectionEvent> | undefined;\n\nif (__DEV__) {\n  inspect = getBrowserInspector() ?? getConsoleInspector();\n}\n\nconst inspector = {\n  inspect,\n};\n\nexport default inspector;\n","import type {\n  AttemptFirstFactorParams,\n  EmailCodeAttempt,\n  PasswordAttempt,\n  PhoneCodeAttempt,\n  PrepareFirstFactorParams,\n  ResetPasswordEmailCodeAttempt,\n  ResetPasswordPhoneCodeAttempt,\n  SignInFactor,\n  SignInFirstFactor,\n  SignInResource,\n  SignInSecondFactor,\n  Web3Attempt,\n} from '@clerk/types';\nimport type { DoneActorEvent } from 'xstate';\nimport { assign, fromPromise, log, sendTo, setup } from 'xstate';\n\nimport { RESENDABLE_COUNTDOWN_DEFAULT } from '~/internals/constants';\nimport { ClerkElementsRuntimeError } from '~/internals/errors';\nimport type { FormFields } from '~/internals/machines/form';\nimport type { WithParams } from '~/internals/machines/shared';\nimport { sendToLoading } from '~/internals/machines/shared';\nimport { determineStartingSignInFactor, determineStartingSignInSecondFactor } from '~/internals/machines/sign-in/utils';\nimport { assertActorEventError, assertIsDefined } from '~/internals/machines/utils/assert';\n\nimport type { SignInRouterMachineActorRef } from './router.types';\nimport type { SignInVerificationSchema } from './verification.types';\nimport { SignInVerificationDelays } from './verification.types';\n\nexport type TSignInFirstFactorMachine = typeof SignInFirstFactorMachine;\nexport type TSignInSecondFactorMachine = typeof SignInSecondFactorMachine;\n\nexport type DetermineStartingFactorInput = {\n  parent: SignInRouterMachineActorRef;\n};\n\nexport type PrepareFirstFactorInput = WithParams<SignInFirstFactor | null> & {\n  parent: SignInRouterMachineActorRef;\n  resendable: boolean;\n};\nexport type PrepareSecondFactorInput = WithParams<SignInSecondFactor | null> & {\n  parent: SignInRouterMachineActorRef;\n  resendable: boolean;\n};\n\nexport type AttemptFirstFactorInput = {\n  parent: SignInRouterMachineActorRef;\n  fields: FormFields;\n  currentFactor: SignInFirstFactor | null;\n};\nexport type AttemptSecondFactorInput = {\n  parent: SignInRouterMachineActorRef;\n  fields: FormFields;\n  currentFactor: SignInSecondFactor | null;\n};\n\nconst isNonPreperableStrategy = (strategy?: SignInFirstFactor['strategy'] | SignInSecondFactor['strategy']) => {\n  if (!strategy) {\n    return false;\n  }\n\n  return ['passkey', 'password'].includes(strategy);\n};\n\nexport const SignInVerificationMachineId = 'SignInVerification';\n\nconst SignInVerificationMachine = setup({\n  actors: {\n    determineStartingFactor: fromPromise<SignInFactor | null, DetermineStartingFactorInput>(() =>\n      Promise.reject(new ClerkElementsRuntimeError('Actor `determineStartingFactor` must be overridden')),\n    ),\n    prepare: fromPromise<SignInResource, PrepareFirstFactorInput | PrepareSecondFactorInput>(() =>\n      Promise.reject(new ClerkElementsRuntimeError('Actor `prepare` must be overridden')),\n    ),\n    attempt: fromPromise<SignInResource, AttemptFirstFactorInput | AttemptSecondFactorInput>(() =>\n      Promise.reject(new ClerkElementsRuntimeError('Actor `attempt` must be overridden')),\n    ),\n  },\n  actions: {\n    resendableTick: assign(({ context }) => ({\n      resendable: context.resendableAfter === 0,\n      resendableAfter: context.resendableAfter > 0 ? context.resendableAfter - 1 : context.resendableAfter,\n    })),\n    resendableReset: assign({\n      resendable: false,\n      resendableAfter: RESENDABLE_COUNTDOWN_DEFAULT,\n    }),\n    validateRegisteredStrategies: ({ context }) => {\n      const clerk = context.parent.getSnapshot().context.clerk;\n\n      if (clerk.__unstable__environment?.isProduction()) {\n        return;\n      }\n\n      if (\n        !clerk.client.signIn.supportedFirstFactors.every(factor =>\n          context.registeredStrategies.has(factor.strategy as unknown as SignInFactor),\n        )\n      ) {\n        console.warn(\n          `Clerk: Your instance is configured to support these strategies: ${clerk.client.signIn.supportedFirstFactors\n            .map((factor: any) => factor.strategy)\n            .join(', ')}, but the rendered strategies are: ${Array.from(context.registeredStrategies).join(\n            ', ',\n          )}. Before deploying your app, make sure to render a <Strategy> component for each supported strategy. For more information, visit the documentation: https://clerk.com/docs/elements/reference/sign-in#strategy`,\n        );\n      }\n\n      if (\n        clerk.client.signIn.supportedSecondFactors &&\n        !clerk.client.signIn.supportedSecondFactors.every(factor =>\n          context.registeredStrategies.has(factor.strategy as unknown as SignInFactor),\n        )\n      ) {\n        console.warn(\n          `Clerk: Your instance is configured to support these 2FA strategies: ${[\n            ...clerk.client.signIn.supportedSecondFactors,\n          ]\n            .map(f => f.strategy)\n            .join(', ')}, but the rendered strategies are: ${Array.from(context.registeredStrategies).join(\n            ', ',\n          )}. Before deploying your app, make sure to render a <Strategy> component for each supported strategy. For more information, visit the documentation: https://clerk.com/docs/elements/reference/sign-in#strategy`,\n        );\n      }\n\n      if (\n        process.env.NODE_ENV === 'development' &&\n        context.currentFactor?.strategy &&\n        !context.registeredStrategies.has(context.currentFactor?.strategy as unknown as SignInFactor)\n      ) {\n        throw new ClerkElementsRuntimeError(\n          `Your sign-in attempt is missing a ${context.currentFactor?.strategy} strategy. Make sure <Strategy name=\"${context.currentFactor?.strategy}\"> is rendered in your flow. For more information, visit the documentation: https://clerk.com/docs/elements/reference/sign-in#strategy`,\n        );\n      } else if (process.env.NODE_ENV === 'development' && !context.currentFactor?.strategy) {\n        throw new ClerkElementsRuntimeError(\n          'Unable to determine an authentication strategy to verify. This means your instance is misconfigured. Visit the Clerk Dashboard and verify that your instance has authentication strategies enabled: https://dashboard.clerk.com/last-active?path=/user-authentication/email-phone-username',\n        );\n      }\n    },\n    sendToNext: ({ context, event }) =>\n      context.parent.send({ type: 'NEXT', resource: (event as unknown as DoneActorEvent<SignInResource>).output }),\n    sendToLoading,\n    setFormErrors: sendTo(\n      ({ context }) => context.formRef,\n      ({ event }) => {\n        assertActorEventError(event);\n        return {\n          type: 'ERRORS.SET',\n          error: event.error,\n        };\n      },\n    ),\n    setConsoleError: ({ event }) => {\n      if (process.env.NODE_ENV === 'development') {\n        assertActorEventError(event);\n\n        throw new ClerkElementsRuntimeError(`Unable to fulfill the prepare or attempt request for the sign-in verification.\nError: ${event.error.message}\n\nPlease open an issue if you continue to run into this issue.`);\n      }\n    },\n  },\n  guards: {\n    isResendable: ({ context }) => context.resendable || context.resendableAfter === 0,\n    isNeverResendable: ({ context }) => isNonPreperableStrategy(context.currentFactor?.strategy),\n  },\n  delays: SignInVerificationDelays,\n  types: {} as SignInVerificationSchema,\n}).createMachine({\n  id: SignInVerificationMachineId,\n  context: ({ input }) => ({\n    currentFactor: null,\n    formRef: input.formRef,\n    loadingStep: 'verifications',\n    parent: input.parent,\n    registeredStrategies: new Set<SignInFactor>(),\n    resendable: false,\n    resendableAfter: RESENDABLE_COUNTDOWN_DEFAULT,\n  }),\n  initial: 'Init',\n  on: {\n    'NAVIGATE.PREVIOUS': '.Hist',\n    'STRATEGY.REGISTER': {\n      actions: assign({\n        registeredStrategies: ({ context, event }) => context.registeredStrategies.add(event.factor),\n      }),\n    },\n    'STRATEGY.UNREGISTER': {\n      actions: assign({\n        registeredStrategies: ({ context, event }) => {\n          context.registeredStrategies.delete(event.factor);\n          return context.registeredStrategies;\n        },\n      }),\n    },\n  },\n  states: {\n    Init: {\n      tags: ['state:preparing', 'state:loading'],\n      invoke: {\n        id: 'determineStartingFactor',\n        src: 'determineStartingFactor',\n        input: ({ context }) => ({\n          parent: context.parent,\n        }),\n        onDone: {\n          target: 'Preparing',\n          actions: assign({\n            currentFactor: ({ event }) => event.output,\n          }),\n        },\n        onError: {\n          target: 'Preparing',\n          actions: [\n            log('Clerk [Sign In Verification]: Error determining starting factor'),\n            assign({\n              currentFactor: { strategy: 'password' },\n            }),\n          ],\n        },\n      },\n    },\n    Preparing: {\n      tags: ['state:preparing', 'state:loading'],\n      invoke: {\n        id: 'prepare',\n        src: 'prepare',\n        input: ({ context }) => ({\n          parent: context.parent,\n          resendable: context.resendable,\n          params: context.currentFactor as SignInFirstFactor | null,\n        }),\n        onDone: {\n          actions: 'resendableReset',\n          target: 'Pending',\n        },\n        onError: {\n          actions: ['setFormErrors', 'setConsoleError'],\n          target: 'Pending',\n        },\n      },\n    },\n    Pending: {\n      tags: ['state:pending'],\n      description: 'Waiting for user input',\n      on: {\n        'NAVIGATE.CHOOSE_STRATEGY': 'ChooseStrategy',\n        'NAVIGATE.FORGOT_PASSWORD': 'ChooseStrategy',\n        RETRY: 'Preparing',\n        SUBMIT: {\n          target: 'Attempting',\n          reenter: true,\n        },\n      },\n      initial: 'Init',\n      states: {\n        Init: {\n          description: 'Marks appropriate factors as never resendable.',\n          always: [\n            {\n              guard: 'isNeverResendable',\n              target: 'NeverResendable',\n            },\n            {\n              target: 'NotResendable',\n            },\n          ],\n        },\n        Resendable: {\n          description: 'Waiting for user to retry',\n        },\n        NeverResendable: {\n          description: 'Handles never resendable',\n          on: {\n            RETRY: {\n              actions: log('Never retriable'),\n            },\n          },\n        },\n        NotResendable: {\n          description: 'Handle countdowns',\n          on: {\n            RETRY: {\n              actions: log(({ context }) => `Not retriable; Try again in ${context.resendableAfter}s`),\n            },\n          },\n          after: {\n            resendableTimeout: [\n              {\n                description: 'Set as retriable if countdown is 0',\n                guard: 'isResendable',\n                actions: 'resendableTick',\n                target: 'Resendable',\n              },\n              {\n                description: 'Continue countdown if not retriable',\n                actions: 'resendableTick',\n                target: 'NotResendable',\n                reenter: true,\n              },\n            ],\n          },\n        },\n      },\n      after: {\n        3000: {\n          actions: 'validateRegisteredStrategies',\n        },\n      },\n    },\n    ChooseStrategy: {\n      description: 'Handles both choose strategy and forgot password as the latter is similar in functionality',\n      tags: ['state:choose-strategy', 'state:forgot-password'],\n      on: {\n        'STRATEGY.UPDATE': {\n          actions: assign({ currentFactor: ({ event }) => event.factor || null }),\n          target: 'Preparing',\n        },\n      },\n    },\n    Attempting: {\n      tags: ['state:attempting', 'state:loading'],\n      entry: 'sendToLoading',\n      invoke: {\n        id: 'attempt',\n        src: 'attempt',\n        input: ({ context }) => ({\n          parent: context.parent,\n          currentFactor: context.currentFactor as SignInFirstFactor,\n          fields: context.formRef.getSnapshot().context.fields,\n        }),\n        onDone: {\n          actions: ['sendToNext', 'sendToLoading'],\n        },\n        onError: {\n          actions: ['setFormErrors', 'setConsoleError', 'sendToLoading'],\n          target: 'Pending',\n        },\n      },\n    },\n    Hist: {\n      type: 'history',\n    },\n  },\n});\n\nexport const SignInFirstFactorMachine = SignInVerificationMachine.provide({\n  actors: {\n    determineStartingFactor: fromPromise(async ({ input }) => {\n      const clerk = input.parent.getSnapshot().context.clerk;\n\n      return Promise.resolve(\n        determineStartingSignInFactor(\n          clerk.client.signIn.supportedFirstFactors,\n          clerk.client.signIn.identifier,\n          clerk.__unstable__environment?.displayConfig.preferredSignInStrategy,\n        ),\n      );\n    }),\n    prepare: fromPromise(async ({ input }) => {\n      const { params, parent, resendable } = input;\n      const clerk = parent.getSnapshot().context.clerk;\n\n      // If a prepare call has already been fired recently, don't re-send\n      const currentVerificationExpiration = clerk.client.signIn.firstFactorVerification.expireAt;\n      const needsPrepare = resendable || !currentVerificationExpiration || currentVerificationExpiration < new Date();\n\n      if (isNonPreperableStrategy(params?.strategy) || !needsPrepare) {\n        return Promise.resolve(clerk.client.signIn);\n      }\n\n      assertIsDefined(params, 'First factor params');\n\n      return await clerk.client.signIn.prepareFirstFactor(params as PrepareFirstFactorParams);\n    }),\n    attempt: fromPromise(async ({ input }) => {\n      const { currentFactor, fields, parent } = input as AttemptFirstFactorInput;\n\n      assertIsDefined(currentFactor, 'Current factor');\n\n      let attemptParams: AttemptFirstFactorParams;\n\n      const strategy = currentFactor.strategy;\n      const code = fields.get('code')?.value as string | undefined;\n      const password = fields.get('password')?.value as string | undefined;\n\n      switch (strategy) {\n        case 'passkey': {\n          return await parent.getSnapshot().context.clerk.client.signIn.authenticateWithPasskey();\n        }\n        case 'password': {\n          assertIsDefined(password, 'Password');\n\n          attemptParams = {\n            strategy,\n            password,\n          } satisfies PasswordAttempt;\n\n          break;\n        }\n        case 'reset_password_phone_code':\n        case 'reset_password_email_code': {\n          assertIsDefined(code, 'Code for resetting phone/email');\n\n          attemptParams = {\n            strategy,\n            code,\n            password,\n          } satisfies ResetPasswordPhoneCodeAttempt | ResetPasswordEmailCodeAttempt;\n\n          break;\n        }\n        case 'phone_code':\n        case 'email_code': {\n          assertIsDefined(code, 'Code for phone/email');\n\n          attemptParams = {\n            strategy,\n            code,\n          } satisfies PhoneCodeAttempt | EmailCodeAttempt;\n\n          break;\n        }\n        case 'web3_metamask_signature': {\n          const signature = fields.get('signature')?.value as string | undefined;\n          assertIsDefined(signature, 'Web3 Metamask signature');\n\n          attemptParams = {\n            strategy,\n            signature,\n          } satisfies Web3Attempt;\n\n          break;\n        }\n        default:\n          throw new ClerkElementsRuntimeError(`Invalid strategy: ${strategy}`);\n      }\n\n      return await parent.getSnapshot().context.clerk.client.signIn.attemptFirstFactor(attemptParams);\n    }),\n  },\n});\n\nexport const SignInSecondFactorMachine = SignInVerificationMachine.provide({\n  actors: {\n    determineStartingFactor: fromPromise(async ({ input }) =>\n      Promise.resolve(\n        determineStartingSignInSecondFactor(\n          input.parent.getSnapshot().context.clerk.client.signIn.supportedSecondFactors,\n        ),\n      ),\n    ),\n    prepare: fromPromise(async ({ input }) => {\n      const { params, parent, resendable } = input;\n      const clerk = parent.getSnapshot().context.clerk;\n\n      // If a prepare call has already been fired recently, don't re-send\n      const currentVerificationExpiration = clerk.client.signIn.secondFactorVerification.expireAt;\n      const needsPrepare = resendable || !currentVerificationExpiration || currentVerificationExpiration < new Date();\n\n      assertIsDefined(params, 'Second factor params');\n\n      if (params.strategy !== 'phone_code' || !needsPrepare) {\n        return Promise.resolve(clerk.client.signIn);\n      }\n\n      return await clerk.client.signIn.prepareSecondFactor({\n        strategy: params.strategy,\n        phoneNumberId: params.phoneNumberId,\n      });\n    }),\n    attempt: fromPromise(async ({ input }) => {\n      const { fields, parent, currentFactor } = input as AttemptSecondFactorInput;\n\n      const code = fields.get('code')?.value as string;\n\n      assertIsDefined(currentFactor, 'Current factor');\n      assertIsDefined(code, 'Code');\n\n      return await parent.getSnapshot().context.clerk.client.signIn.attemptSecondFactor({\n        strategy: currentFactor.strategy,\n        code,\n      });\n    }),\n  },\n});\n","import type { SignInStrategy } from '@clerk/types';\n\nimport type {\n  SignInResetPasswordContext,\n  SignInResetPasswordEvents,\n  SignInStartContext,\n  SignInStartEvents,\n  SignInVerificationContext,\n  SignInVerificationEvents,\n} from '~/internals/machines/sign-in';\nimport type {\n  SignUpContinueContext,\n  SignUpContinueEvents,\n  SignUpStartContext,\n  SignUpStartRedirectEvent,\n  SignUpVerificationContext,\n  SignUpVerificationEvents,\n} from '~/internals/machines/sign-up';\nimport type { ThirdPartyMachineContext, ThirdPartyMachineEvent } from '~/internals/machines/third-party';\nimport type { BaseRouterLoadingStep } from '~/internals/machines/types';\n\ntype SendToLoadingProps = {\n  context:\n    | SignInStartContext\n    | SignInVerificationContext\n    | SignInResetPasswordContext\n    | ThirdPartyMachineContext\n    | SignUpStartContext\n    | SignUpContinueContext\n    | SignUpVerificationContext;\n  event:\n    | SignInStartEvents\n    | SignInVerificationEvents\n    | SignInResetPasswordEvents\n    | ThirdPartyMachineEvent\n    | SignUpStartRedirectEvent\n    | SignUpContinueEvents\n    | SignUpVerificationEvents;\n};\n\nexport function sendToLoading({ context, event }: SendToLoadingProps): void {\n  // Unrelated to the `context` of each machine, the step passed to the loading event must use BaseRouterLoadingStep\n  let step: BaseRouterLoadingStep | undefined;\n  let strategy: SignInStrategy | undefined;\n\n  // By default the loading state is set to `true` when this function is called\n  // Only if these events are received, the loading state is set to `false`\n  // Early return here to avoid unnecessary checks\n  if (event.type.startsWith('xstate.done.') || event.type.startsWith('xstate.error.')) {\n    return context.parent.send({\n      type: 'LOADING',\n      isLoading: false,\n      step: undefined,\n      strategy: undefined,\n    });\n  }\n\n  // `context.loadingStep: \"strategy\"` is not a valid BaseRouterLoadingStep (on purpose) so needs to be handled here. This context should be used when `step` should be undefined and `strategy` be defined instead\n  if (context.loadingStep === 'strategy') {\n    step = undefined;\n\n    // Third-party machine handling\n    if (event.type === 'REDIRECT') {\n      strategy = event.params.strategy;\n    }\n\n    return context.parent.send({\n      type: 'LOADING',\n      isLoading: true,\n      step,\n      strategy,\n    });\n  } else if (context.loadingStep === 'continue') {\n    step = 'continue';\n    strategy = undefined;\n\n    return context.parent.send({\n      type: 'LOADING',\n      isLoading: true,\n      step,\n      strategy,\n    });\n  } else if (context.loadingStep === 'reset-password') {\n    step = 'reset-password';\n    strategy = undefined;\n\n    return context.parent.send({\n      type: 'LOADING',\n      isLoading: true,\n      step,\n      strategy,\n    });\n  } else {\n    step = context.loadingStep;\n    strategy = undefined;\n\n    return context.parent.send({\n      type: 'LOADING',\n      isLoading: true,\n      step,\n      strategy,\n    });\n  }\n}\n","// These utilities are ported from: packages/clerk-js/src/ui/components/SignIn/utils.ts\n// They should be functionally identical.\nimport { isWebAuthnSupported } from '@clerk/shared/webauthn';\nimport type { PreferredSignInStrategy, SignInFactor } from '@clerk/types';\n\nconst ORDER_WHEN_PASSWORD_PREFERRED = ['passkey', 'password', 'email_link', 'email_code', 'phone_code'] as const;\nconst ORDER_WHEN_OTP_PREFERRED = ['email_link', 'email_code', 'phone_code', 'passkey', 'password'] as const;\n// const ORDER_ALL_STRATEGIES = ['email_link', 'email_code', 'phone_code', 'password'] as const;\n\nconst findFactorForIdentifier = (i: string | null) => (f: SignInFactor) => {\n  return 'safeIdentifier' in f && f.safeIdentifier === i;\n};\n\n// The algorithm can be found at\n// https://www.notion.so/clerkdev/Implement-sign-in-alt-methods-e6e60ffb644645b3a0553b50556468ce\nexport function determineStartingSignInFactor(\n  firstFactors: SignInFactor[],\n  identifier: string | null,\n  preferredSignInStrategy?: PreferredSignInStrategy,\n): SignInFactor | null {\n  if (!firstFactors || firstFactors.length === 0) {\n    return null;\n  }\n\n  return preferredSignInStrategy === 'password'\n    ? determineStrategyWhenPasswordIsPreferred(firstFactors, identifier)\n    : determineStrategyWhenOTPIsPreferred(firstFactors, identifier);\n}\n\nfunction findPasskeyStrategy(factors: SignInFactor[]): SignInFactor | null {\n  if (isWebAuthnSupported()) {\n    const passkeyFactor = factors.find(({ strategy }) => strategy === 'passkey');\n\n    if (passkeyFactor) {\n      return passkeyFactor;\n    }\n  }\n  return null;\n}\n\nfunction determineStrategyWhenPasswordIsPreferred(\n  factors: SignInFactor[],\n  identifier: string | null,\n): SignInFactor | null {\n  const passkeyFactor = findPasskeyStrategy(factors);\n  if (passkeyFactor) {\n    return passkeyFactor;\n  }\n\n  // Prefer the password factor if it's available\n  const passwordFactor = factors.find(factor => factor.strategy === 'password');\n  if (passwordFactor) {\n    return passwordFactor;\n  }\n\n  // Otherwise, find the factor for the provided identifier, or the next factor based on the preference list\n  const factorForIdentifier = factors.find(findFactorForIdentifier(identifier));\n  if (factorForIdentifier) {\n    return factorForIdentifier;\n  }\n\n  for (const preferredFactor of ORDER_WHEN_PASSWORD_PREFERRED) {\n    const factor = factors.find(factor => factor.strategy === preferredFactor);\n    if (factor) {\n      return factor;\n    }\n  }\n\n  return null;\n}\n\nfunction determineStrategyWhenOTPIsPreferred(factors: SignInFactor[], identifier: string | null): SignInFactor | null {\n  const passkeyFactor = findPasskeyStrategy(factors);\n  if (passkeyFactor) {\n    return passkeyFactor;\n  }\n\n  const factorForIdentifier = factors.find(findFactorForIdentifier(identifier));\n  if (factorForIdentifier) {\n    return factorForIdentifier;\n  }\n\n  // Prefer the password factor if it's available\n  const emailLinkFactor = factors.find(factor => factor.strategy === 'email_link');\n  if (emailLinkFactor) {\n    return emailLinkFactor;\n  }\n\n  for (const preferredFactor of ORDER_WHEN_OTP_PREFERRED) {\n    const factor = factors.find(factor => factor.strategy === preferredFactor);\n    if (factor) {\n      return factor;\n    }\n  }\n\n  return null;\n}\n\n// The priority of second factors is: TOTP -> Phone code -> any other factor\nexport function determineStartingSignInSecondFactor(secondFactors: SignInFactor[]): SignInFactor | null {\n  if (!secondFactors || secondFactors.length === 0) {\n    return null;\n  }\n\n  const totpFactor = secondFactors.find(f => f.strategy === 'totp');\n  if (totpFactor) {\n    return totpFactor;\n  }\n\n  const phoneCodeFactor = secondFactors.find(f => f.strategy === 'phone_code');\n  if (phoneCodeFactor) {\n    return phoneCodeFactor;\n  }\n\n  return secondFactors[0];\n}\n","import type { DoneActorEvent, ErrorActorEvent, EventObject } from 'xstate';\n\nexport function assertIsDefined<T>(value: T, label?: string): asserts value is NonNullable<T> {\n  if (value === undefined || value === null) {\n    throw new Error(`${label || value} is not defined`);\n  }\n}\n\nexport function assertActorEventDone<T>(event: EventObject): asserts event is DoneActorEvent<T> {\n  if ('output' in event === false) {\n    throw new Error(`Expected a done event, got \"${event.type}\"`);\n  }\n}\n\nexport function assertActorEventError<T = Error>(event: EventObject): asserts event is ErrorActorEvent<T> {\n  if ('error' in event === false) {\n    throw new Error(`Expected an error event, got \"${event.type}\"`);\n  }\n}\n","import type { ClerkAPIResponseError } from '@clerk/shared/error';\nimport type { SignInFactor } from '@clerk/types';\nimport type { ActorRefFrom, ErrorActorEvent } from 'xstate';\n\nimport type { FormMachine } from '~/internals/machines/form';\n\nimport type { SignInRouterMachineActorRef } from './router.types';\n\n// ---------------------------------- Tags ---------------------------------- //\n\nexport type SignInVerificationTags =\n  | 'state:attempting'\n  | 'state:choose-strategy'\n  | 'state:forgot-password'\n  | 'state:loading'\n  | 'state:pending'\n  | 'state:preparing';\n\n// ---------------------------------- Events ---------------------------------- //\n\nexport type SignInVerificationSubmitEvent = { type: 'SUBMIT' };\nexport type SignInVerificationFactorUpdateEvent = { type: 'STRATEGY.UPDATE'; factor: SignInFactor | undefined };\nexport type SignInVerificationRetryEvent = { type: 'RETRY' };\nexport type SignInVerificationStrategyRegisterEvent = { type: 'STRATEGY.REGISTER'; factor: SignInFactor };\nexport type SignInVerificationStrategyUnregisterEvent = { type: 'STRATEGY.UNREGISTER'; factor: SignInFactor };\n\nexport type SignInVerificationEvents =\n  | ErrorActorEvent\n  | SignInVerificationSubmitEvent\n  | SignInVerificationFactorUpdateEvent\n  | SignInVerificationRetryEvent\n  | SignInVerificationStrategyRegisterEvent\n  | SignInVerificationStrategyUnregisterEvent;\n\n// ---------------------------------- Input ---------------------------------- //\n\nexport interface SignInVerificationInput {\n  formRef: ActorRefFrom<typeof FormMachine>;\n  parent: SignInRouterMachineActorRef;\n}\n\n// ---------------------------------- Context ---------------------------------- //\n\nexport interface SignInVerificationContext {\n  currentFactor: SignInFactor | null;\n  error?: Error | ClerkAPIResponseError;\n  formRef: ActorRefFrom<typeof FormMachine>;\n  parent: SignInRouterMachineActorRef;\n  loadingStep: 'verifications';\n  registeredStrategies: Set<SignInFactor>;\n  resendable: boolean;\n  resendableAfter: number;\n}\n\n// ---------------------------------- Delays ---------------------------------- //\n\nexport const SignInVerificationDelays = {\n  resendableTimeout: 1_000, // 1 second\n} as const;\n\nexport type SignInVerificationDelays = keyof typeof SignInVerificationDelays;\n\n// ---------------------------------- Schema ---------------------------------- //\n\nexport interface SignInVerificationSchema {\n  context: SignInVerificationContext;\n  input: SignInVerificationInput;\n  delays: SignInVerificationDelays;\n  events: SignInVerificationEvents;\n  tags: SignInVerificationTags;\n}\n","import { joinURL } from '@clerk/shared/url';\nimport { isWebAuthnAutofillSupported } from '@clerk/shared/webauthn';\nimport type { SignInStatus } from '@clerk/types';\nimport type { NonReducibleUnknown } from 'xstate';\nimport { and, assign, enqueueActions, fromPromise, not, or, raise, sendTo, setup } from 'xstate';\n\nimport {\n  ERROR_CODES,\n  ROUTING,\n  SIGN_IN_DEFAULT_BASE_PATH,\n  SIGN_UP_DEFAULT_BASE_PATH,\n  SSO_CALLBACK_PATH_ROUTE,\n} from '~/internals/constants';\nimport { ClerkElementsError, ClerkElementsRuntimeError } from '~/internals/errors';\nimport { ThirdPartyMachine, ThirdPartyMachineId } from '~/internals/machines/third-party';\nimport { shouldUseVirtualRouting } from '~/internals/machines/utils/next';\n\nimport { FormMachine } from '../form';\nimport { SignInResetPasswordMachine } from './reset-password.machine';\nimport type {\n  SignInRouterContext,\n  SignInRouterEvents,\n  SignInRouterNextEvent,\n  SignInRouterSchema,\n} from './router.types';\nimport { SignInStartMachine } from './start.machine';\nimport { SignInFirstFactorMachine, SignInSecondFactorMachine } from './verification.machine';\n\nexport type TSignInRouterMachine = typeof SignInRouterMachine;\n\nconst isCurrentPath =\n  (path: `/${string}`) =>\n  ({ context }: { context: SignInRouterContext }, _params?: NonReducibleUnknown) => {\n    return context.router?.match(path) ?? false;\n  };\n\nconst needsStatus =\n  (status: SignInStatus) =>\n  ({ context, event }: { context: SignInRouterContext; event?: SignInRouterEvents }, _?: NonReducibleUnknown) =>\n    (event as SignInRouterNextEvent)?.resource?.status === status || context.clerk?.client.signIn.status === status;\n\nexport const SignInRouterMachineId = 'SignInRouter';\n\nexport const SignInRouterMachine = setup({\n  actors: {\n    firstFactorMachine: SignInFirstFactorMachine,\n    formMachine: FormMachine,\n    resetPasswordMachine: SignInResetPasswordMachine,\n    startMachine: SignInStartMachine,\n    secondFactorMachine: SignInSecondFactorMachine,\n    thirdPartyMachine: ThirdPartyMachine,\n    webAuthnAutofillSupport: fromPromise(() => isWebAuthnAutofillSupported()),\n  },\n  actions: {\n    clearFormErrors: sendTo(({ context }) => context.formRef, { type: 'ERRORS.CLEAR' }),\n    navigateInternal: ({ context }, { path, force = false }: { path: string; force?: boolean }) => {\n      if (!context.router) {\n        return;\n      }\n      if (!force && shouldUseVirtualRouting()) {\n        return;\n      }\n      if (context.exampleMode) {\n        return;\n      }\n\n      const resolvedPath = joinURL(context.router.basePath, path);\n      if (resolvedPath === context.router.pathname()) {\n        return;\n      }\n\n      context.router.shallowPush(resolvedPath);\n    },\n    navigateExternal: ({ context }, { path }: { path: string }) => context.router?.push(path),\n    raiseNext: raise({ type: 'NEXT' }),\n    setActive: enqueueActions(({ enqueue, check, context, event }) => {\n      if (check('isExampleMode')) {\n        return;\n      }\n\n      const lastActiveSessionId = context.clerk.client.lastActiveSessionId;\n      const createdSessionId = ((event as SignInRouterNextEvent)?.resource || context.clerk.client.signIn)\n        .createdSessionId;\n\n      const session = createdSessionId || lastActiveSessionId || null;\n\n      const beforeEmit = () => context.router?.push(context.clerk.buildAfterSignInUrl());\n      void context.clerk.setActive({ session, beforeEmit });\n\n      enqueue.raise({ type: 'RESET' }, { delay: 2000 }); // Reset machine after 2s delay.\n    }),\n    setError: assign({\n      error: (_, { error }: { error?: ClerkElementsError }) => {\n        if (error) {\n          return error;\n        }\n        return new ClerkElementsRuntimeError('Unknown error');\n      },\n    }),\n    setFormErrors: ({ context }, params: { error: Error }) =>\n      sendTo(context.formRef, {\n        type: 'ERRORS.SET',\n        error: params.error,\n      }),\n    setFormOAuthErrors: ({ context }) => {\n      const errorOrig = context.clerk.client.signIn.firstFactorVerification.error;\n\n      if (!errorOrig) {\n        return;\n      }\n\n      let error: ClerkElementsError;\n\n      switch (errorOrig.code) {\n        case ERROR_CODES.NOT_ALLOWED_TO_SIGN_UP:\n        case ERROR_CODES.OAUTH_ACCESS_DENIED:\n        case ERROR_CODES.NOT_ALLOWED_ACCESS:\n        case ERROR_CODES.SAML_USER_ATTRIBUTE_MISSING:\n        case ERROR_CODES.OAUTH_EMAIL_DOMAIN_RESERVED_BY_SAML:\n        case ERROR_CODES.USER_LOCKED:\n          error = new ClerkElementsError(errorOrig.code, errorOrig.longMessage!);\n          break;\n        default:\n          error = new ClerkElementsError(\n            'unable_to_complete',\n            'Unable to complete action at this time. If the problem persists please contact support.',\n          );\n      }\n\n      context.formRef.send({\n        type: 'ERRORS.SET',\n        error,\n      });\n    },\n    transfer: ({ context }) => {\n      const searchParams = new URLSearchParams({ __clerk_transfer: '1' });\n      context.router?.push(`${context.signUpPath}?${searchParams}`);\n    },\n  },\n  guards: {\n    hasAuthenticatedViaClerkJS: ({ context }) =>\n      Boolean(context.clerk.client.signIn.status === null && context.clerk.client.lastActiveSessionId),\n    hasOAuthError: ({ context }) => Boolean(context.clerk?.client?.signIn?.firstFactorVerification?.error),\n    hasResource: ({ context }) => Boolean(context.clerk?.client?.signIn?.status),\n\n    isLoggedInAndSingleSession: and(['isLoggedIn', 'isSingleSessionMode', not('isExampleMode')]),\n    isActivePathRoot: isCurrentPath('/'),\n    isComplete: ({ context, event }) => {\n      const resource = (event as SignInRouterNextEvent)?.resource;\n      const signIn = context.clerk.client.signIn;\n\n      return (\n        (resource?.status === 'complete' && Boolean(resource?.createdSessionId)) ||\n        (signIn.status === 'complete' && Boolean(signIn.createdSessionId))\n      );\n    },\n    isLoggedIn: ({ context }) => Boolean(context.clerk?.user),\n    isSingleSessionMode: ({ context }) => Boolean(context.clerk?.__unstable__environment?.authConfig.singleSessionMode),\n    isExampleMode: ({ context }) => Boolean(context.exampleMode),\n\n    needsStart: or([not('hasResource'), 'statusNeedsIdentifier', isCurrentPath('/')]),\n    needsFirstFactor: and(['statusNeedsFirstFactor', isCurrentPath('/continue')]),\n    needsSecondFactor: and(['statusNeedsSecondFactor', isCurrentPath('/continue')]),\n    needsCallback: isCurrentPath(SSO_CALLBACK_PATH_ROUTE),\n    needsNewPassword: and(['statusNeedsNewPassword', isCurrentPath('/new-password')]),\n\n    statusNeedsIdentifier: needsStatus('needs_identifier'),\n    statusNeedsFirstFactor: needsStatus('needs_first_factor'),\n    statusNeedsSecondFactor: needsStatus('needs_second_factor'),\n    statusNeedsNewPassword: needsStatus('needs_new_password'),\n  },\n  types: {} as SignInRouterSchema,\n}).createMachine({\n  id: SignInRouterMachineId,\n  // @ts-expect-error - Set in INIT event\n  context: {},\n  initial: 'Idle',\n  on: {\n    'AUTHENTICATE.OAUTH': {\n      actions: sendTo(ThirdPartyMachineId, ({ context, event }) => ({\n        type: 'REDIRECT',\n        params: {\n          strategy: event.strategy,\n          redirectUrl: `${\n            context.router?.mode === ROUTING.virtual\n              ? context.clerk.__unstable__environment?.displayConfig.signInUrl\n              : context.router?.basePath\n          }${SSO_CALLBACK_PATH_ROUTE}`,\n          redirectUrlComplete: context.clerk.buildAfterSignInUrl(),\n        },\n      })),\n    },\n    'AUTHENTICATE.SAML': {\n      actions: sendTo(ThirdPartyMachineId, {\n        type: 'REDIRECT',\n        params: { strategy: 'saml' },\n      }),\n    },\n    'FORM.ATTACH': {\n      description: 'Attach/re-attach the form to the router.',\n      actions: enqueueActions(({ enqueue, event }) => {\n        enqueue.assign({\n          formRef: event.formRef,\n        });\n\n        // Reset the current step, to reset the form reference.\n        enqueue.raise({ type: 'RESET.STEP' });\n      }),\n    },\n    'NAVIGATE.PREVIOUS': '.Hist',\n    'NAVIGATE.START': '.Start',\n    LOADING: {\n      actions: assign(({ event }) => ({\n        loading: {\n          isLoading: event.isLoading,\n          step: event.step,\n          strategy: event.strategy,\n        },\n      })),\n    },\n    RESET: '.Idle',\n  },\n  states: {\n    Idle: {\n      invoke: {\n        id: 'webAuthnAutofill',\n        src: 'webAuthnAutofillSupport',\n        onDone: {\n          actions: assign({ webAuthnAutofillSupport: ({ event }) => event.output }),\n        },\n      },\n      on: {\n        INIT: {\n          actions: assign(({ event }) => ({\n            clerk: event.clerk,\n            exampleMode: event.exampleMode || false,\n            formRef: event.formRef,\n            loading: {\n              isLoading: false,\n            },\n            router: event.router,\n            signUpPath: event.signUpPath || SIGN_UP_DEFAULT_BASE_PATH,\n          })),\n          target: 'Init',\n        },\n      },\n    },\n    Init: {\n      entry: enqueueActions(({ context, enqueue, self }) => {\n        if (!self.getSnapshot().children[ThirdPartyMachineId]) {\n          enqueue.spawnChild('thirdPartyMachine', {\n            id: ThirdPartyMachineId,\n            systemId: ThirdPartyMachineId,\n            input: {\n              basePath: context.router?.basePath ?? SIGN_IN_DEFAULT_BASE_PATH,\n              flow: 'signIn',\n              formRef: context.formRef,\n              parent: self,\n            },\n          });\n        }\n      }),\n      always: [\n        {\n          guard: 'needsCallback',\n          target: 'Callback',\n        },\n        {\n          guard: 'isComplete',\n          actions: 'setActive',\n        },\n        {\n          guard: 'isLoggedInAndSingleSession',\n          actions: [\n            () => console.warn('logged-in-single-session-mode'),\n            {\n              type: 'setError',\n              params: {\n                error: new ClerkElementsError('logged-in-single-session-mode', 'You are already logged in.'),\n              },\n            },\n          ],\n          target: 'Start',\n        },\n        {\n          guard: 'needsStart',\n          actions: { type: 'navigateInternal', params: { force: true, path: '/' } },\n          target: 'Start',\n        },\n        {\n          guard: 'needsFirstFactor',\n          actions: { type: 'navigateInternal', params: { force: true, path: '/continue' } },\n          target: 'FirstFactor',\n        },\n        {\n          guard: 'needsSecondFactor',\n          actions: { type: 'navigateInternal', params: { force: true, path: '/continue' } },\n          target: 'SecondFactor',\n        },\n        {\n          guard: 'needsNewPassword',\n          actions: { type: 'navigateInternal', params: { force: true, path: '/reset-password' } },\n          target: 'ResetPassword',\n        },\n        {\n          actions: { type: 'navigateInternal', params: { force: true, path: '/' } },\n          target: 'Start',\n        },\n      ],\n    },\n    Start: {\n      tags: 'route:start',\n      exit: 'clearFormErrors',\n      invoke: {\n        id: 'start',\n        src: 'startMachine',\n        input: ({ context, self }) => ({\n          basePath: context.router?.basePath,\n          formRef: context.formRef,\n          parent: self,\n        }),\n        onDone: {\n          actions: 'raiseNext',\n        },\n      },\n      on: {\n        'RESET.STEP': {\n          target: 'Start',\n          reenter: true,\n        },\n        'AUTHENTICATE.PASSKEY': {\n          actions: sendTo('start', ({ event }) => event),\n        },\n        'AUTHENTICATE.PASSKEY.AUTOFILL': {\n          actions: sendTo('start', ({ event }) => event),\n        },\n        NEXT: [\n          {\n            guard: 'isComplete',\n            actions: 'setActive',\n          },\n          {\n            guard: 'statusNeedsFirstFactor',\n            actions: { type: 'navigateInternal', params: { path: '/continue' } },\n            target: 'FirstFactor',\n          },\n          {\n            guard: 'statusNeedsSecondFactor',\n            actions: { type: 'navigateInternal', params: { path: '/continue' } },\n            target: 'SecondFactor',\n          },\n          {\n            guard: 'statusNeedsNewPassword',\n            actions: { type: 'navigateInternal', params: { path: '/reset-password' } },\n            target: 'ResetPassword',\n          },\n        ],\n      },\n    },\n    FirstFactor: {\n      tags: 'route:first-factor',\n      invoke: {\n        id: 'firstFactor',\n        src: 'firstFactorMachine',\n        input: ({ context, self }) => ({\n          formRef: context.formRef,\n          parent: self,\n        }),\n        onDone: {\n          actions: 'raiseNext',\n        },\n      },\n      on: {\n        'RESET.STEP': {\n          target: 'FirstFactor',\n          reenter: true,\n        },\n        NEXT: [\n          {\n            guard: 'isComplete',\n            actions: 'setActive',\n          },\n          {\n            guard: 'statusNeedsSecondFactor',\n            actions: { type: 'navigateInternal', params: { path: '/continue' } },\n            target: 'SecondFactor',\n          },\n          {\n            guard: 'statusNeedsNewPassword',\n            actions: { type: 'navigateInternal', params: { path: '/reset-password' } },\n            target: 'ResetPassword',\n          },\n        ],\n        'STRATEGY.UPDATE': {\n          description: 'Send event to verification machine to update the current strategy.',\n          actions: sendTo('firstFactor', ({ event }) => event),\n          target: '.Idle',\n        },\n      },\n      initial: 'Idle',\n      states: {\n        Idle: {\n          on: {\n            'NAVIGATE.FORGOT_PASSWORD': {\n              description: 'Navigate to forgot password screen.',\n              actions: sendTo('firstFactor', ({ event }) => event),\n              target: 'ForgotPassword',\n            },\n            'NAVIGATE.CHOOSE_STRATEGY': {\n              description: 'Navigate to choose strategy screen.',\n              actions: sendTo('firstFactor', ({ event }) => event),\n              target: 'ChoosingStrategy',\n            },\n          },\n        },\n        ChoosingStrategy: {\n          tags: ['route:choose-strategy'],\n          on: {\n            'NAVIGATE.PREVIOUS': {\n              description: 'Go to Idle, and also tell firstFactor to go to Pending',\n              target: 'Idle',\n              actions: sendTo('firstFactor', { type: 'NAVIGATE.PREVIOUS' }),\n            },\n          },\n        },\n        ForgotPassword: {\n          tags: ['route:forgot-password'],\n          on: {\n            'NAVIGATE.PREVIOUS': 'Idle',\n          },\n        },\n      },\n    },\n    SecondFactor: {\n      tags: 'route:second-factor',\n      invoke: {\n        id: 'secondFactor',\n        src: 'secondFactorMachine',\n        input: ({ context, self }) => ({\n          formRef: context.formRef,\n          parent: self,\n        }),\n        onDone: {\n          actions: 'raiseNext',\n        },\n      },\n      on: {\n        'RESET.STEP': {\n          target: 'SecondFactor',\n          reenter: true,\n        },\n        NEXT: [\n          {\n            guard: 'isComplete',\n            actions: 'setActive',\n          },\n          {\n            guard: 'statusNeedsNewPassword',\n            actions: { type: 'navigateInternal', params: { path: '/reset-password' } },\n            target: 'ResetPassword',\n          },\n        ],\n      },\n    },\n    ResetPassword: {\n      tags: 'route:reset-password',\n      invoke: {\n        id: 'resetPassword',\n        src: 'resetPasswordMachine',\n        input: ({ context, self }) => ({\n          formRef: context.formRef,\n          parent: self,\n        }),\n        onDone: {\n          actions: 'raiseNext',\n        },\n      },\n      on: {\n        'RESET.STEP': {\n          target: 'ResetPassword',\n          reenter: true,\n        },\n        NEXT: [\n          {\n            guard: 'isComplete',\n            actions: 'setActive',\n          },\n          {\n            guard: 'statusNeedsFirstFactor',\n            actions: { type: 'navigateInternal', params: { path: '/continue' } },\n            target: 'FirstFactor',\n          },\n          {\n            guard: 'statusNeedsSecondFactor',\n            actions: { type: 'navigateInternal', params: { path: '/continue' } },\n            target: 'SecondFactor',\n          },\n        ],\n      },\n    },\n    Callback: {\n      tags: 'route:callback',\n      entry: sendTo(ThirdPartyMachineId, { type: 'CALLBACK' }),\n      on: {\n        NEXT: [\n          {\n            guard: 'hasOAuthError',\n            actions: ['setFormOAuthErrors', { type: 'navigateInternal', params: { force: true, path: '/' } }],\n            target: 'Start',\n          },\n          {\n            guard: or(['isLoggedIn', 'isComplete', 'hasAuthenticatedViaClerkJS']),\n            actions: 'setActive',\n          },\n          {\n            guard: 'statusNeedsIdentifier',\n            actions: 'transfer',\n          },\n          {\n            guard: 'statusNeedsFirstFactor',\n            actions: { type: 'navigateInternal', params: { path: '/continue' } },\n            target: 'FirstFactor',\n          },\n          {\n            guard: 'statusNeedsSecondFactor',\n            actions: { type: 'navigateInternal', params: { path: '/continue' } },\n            target: 'SecondFactor',\n          },\n          {\n            guard: 'statusNeedsNewPassword',\n            actions: { type: 'navigateInternal', params: { path: '/reset-password' } },\n            target: 'ResetPassword',\n          },\n        ],\n      },\n    },\n    Error: {\n      tags: 'route:error',\n      on: {\n        NEXT: {\n          target: 'Start',\n          actions: 'clearFormErrors',\n        },\n      },\n    },\n    Hist: {\n      type: 'history',\n      exit: 'clearFormErrors',\n    },\n  },\n});\n","import type {\n  AuthenticateWithRedirectParams,\n  HandleOAuthCallbackParams,\n  HandleSamlCallbackParams,\n  LoadedClerk,\n} from '@clerk/types';\nimport type { SetOptional } from 'type-fest';\nimport type { AnyActorRef, AnyEventObject } from 'xstate';\nimport { fromCallback, fromPromise } from 'xstate';\n\nimport { ClerkElementsRuntimeError } from '~/internals/errors';\nimport type { WithParams, WithUnsafeMetadata } from '~/internals/machines/shared';\nimport { ClerkJSNavigationEvent, isClerkJSNavigationEvent } from '~/internals/machines/utils/clerkjs';\n\ntype OptionalRedirectParams = 'redirectUrl' | 'redirectUrlComplete';\n\nexport type AuthenticateWithRedirectSignInParams = SetOptional<AuthenticateWithRedirectParams, OptionalRedirectParams>;\nexport type AuthenticateWithRedirectSignUpParams = SetOptional<\n  WithUnsafeMetadata<AuthenticateWithRedirectParams>,\n  OptionalRedirectParams\n>;\n\nexport type AuthenticateWithRedirectInput = (\n  | (WithParams<AuthenticateWithRedirectSignInParams> & { flow: 'signIn' })\n  | (WithParams<AuthenticateWithRedirectSignUpParams> & { flow: 'signUp' })\n) & { basePath: string; parent: AnyActorRef }; // TODO: Fix circular dependency\n\nexport const redirect = fromPromise<void, AuthenticateWithRedirectInput>(\n  async ({ input: { flow, params, parent } }) => {\n    const clerk: LoadedClerk = parent.getSnapshot().context.clerk;\n\n    return clerk.client[flow].authenticateWithRedirect({\n      redirectUrl: clerk.buildUrlWithAuth(params.redirectUrl || '/'),\n      redirectUrlComplete: clerk.buildUrlWithAuth(params.redirectUrlComplete || '/'),\n      ...params,\n    });\n  },\n);\n\nexport type HandleRedirectCallbackParams<T = Required<HandleOAuthCallbackParams | HandleSamlCallbackParams>> = {\n  [K in keyof T]: NonNullable<T[K]>;\n};\n\nexport type HandleRedirectCallbackInput = AnyActorRef;\n\n/**\n * This function hijacks handleRedirectCallback from ClerkJS to handle navigation events\n * from the state machine.\n */\nexport const handleRedirectCallback = fromCallback<AnyEventObject, HandleRedirectCallbackInput>(\n  ({ sendBack, input: parent }) => {\n    const clerk: LoadedClerk = parent.getSnapshot().context.clerk;\n    const displayConfig = clerk.__unstable__environment?.displayConfig;\n\n    const customNavigate = (toEvt: string) => {\n      const to = toEvt.split('/').slice(-1)[0];\n\n      if (isClerkJSNavigationEvent(to)) {\n        // Handle known redefined navigation events\n        sendBack({ type: to });\n      } else if (to === displayConfig?.signInUrl) {\n        // Handle known non-redefined sign-in navigation events\n        sendBack({ type: ClerkJSNavigationEvent.signIn });\n      } else if (to === displayConfig?.signUpUrl) {\n        // Handle known non-redefined sign-up navigation events\n        sendBack({ type: ClerkJSNavigationEvent.signUp });\n      } else {\n        // Handle unknown navigation events\n        sendBack({ type: 'FAILURE', error: new ClerkElementsRuntimeError(`Unknown navigation event: ${to}`) });\n      }\n\n      return Promise.resolve();\n    };\n\n    // @ts-expect-error - Clerk types are incomplete\n    // TODO: Update local Clerk types\n    const loadedClerk = clerk.clerkjs as LoadedClerk;\n\n    void loadedClerk.handleRedirectCallback(\n      {\n        signInForceRedirectUrl: ClerkJSNavigationEvent.complete,\n        signInFallbackRedirectUrl: ClerkJSNavigationEvent.complete,\n        signUpForceRedirectUrl: ClerkJSNavigationEvent.signUp,\n        signUpFallbackRedirectUrl: ClerkJSNavigationEvent.signUp,\n        continueSignUpUrl: ClerkJSNavigationEvent.continue,\n        firstFactorUrl: ClerkJSNavigationEvent.signIn,\n        resetPasswordUrl: ClerkJSNavigationEvent.resetPassword,\n        secondFactorUrl: ClerkJSNavigationEvent.signIn,\n        verifyEmailAddressUrl: ClerkJSNavigationEvent.verification,\n        verifyPhoneNumberUrl: ClerkJSNavigationEvent.verification,\n        signUpUrl: ClerkJSNavigationEvent.signUp,\n        signInUrl: ClerkJSNavigationEvent.signIn,\n      } satisfies HandleOAuthCallbackParams,\n      customNavigate,\n    );\n\n    return () => void 0;\n  },\n);\n","import type { Simplify } from 'type-fest';\n\n// ================= Types ================= //\n\nexport type ClerkJSEventCategory = 'NAVIGATE';\nexport type ClerkJSEvent<T extends ClerkJSEventCategory = ClerkJSEventCategory> = `CLERKJS.${T}.${string}`;\nexport type ClerkJSEventObject<T extends ClerkJSEventCategory = ClerkJSEventCategory> = Simplify<\n  Record<string, ClerkJSEvent<T>>\n>;\nexport type ClerkJSEventExtractCategory<S extends string> = S extends `CLERKJS.${infer T}.${string}` ? T : never;\n\n// ================= Type Narrowing ================= //\n\nexport function isClerkJSEvent<T extends ClerkJSEventObject<ClerkJSEventExtractCategory<E>>, E extends ClerkJSEvent>(\n  eventObj: T,\n  event: E,\n): event is typeof event {\n  return Object.values(eventObj).includes(event as any);\n}\n\n// ================= ClerkJSNavigationEvent ================= //\n\nexport type ClerkJSNavigationEvent = (typeof ClerkJSNavigationEvent)[keyof typeof ClerkJSNavigationEvent];\nexport const ClerkJSNavigationEvent: ClerkJSEventObject<'NAVIGATE'> = {\n  complete: 'CLERKJS.NAVIGATE.COMPLETE',\n  signUp: 'CLERKJS.NAVIGATE.SIGN_UP',\n  continue: 'CLERKJS.NAVIGATE.CONTINUE',\n  generic: 'CLERKJS.NAVIGATE.GENERIC',\n  resetPassword: 'CLERKJS.NAVIGATE.RESET_PASSWORD',\n  signIn: 'CLERKJS.NAVIGATE.SIGN_IN',\n  verification: 'CLERKJS.NAVIGATE.VERIFICATION',\n} as const;\n\nexport function isClerkJSNavigationEvent(event: unknown): event is ClerkJSNavigationEvent {\n  return isClerkJSEvent(ClerkJSNavigationEvent, event as ClerkJSEvent<'NAVIGATE'>);\n}\n","import { assertEvent, assign, log, not, sendTo, setup } from 'xstate';\n\nimport { sendToLoading } from '~/internals/machines/shared';\nimport { assertActorEventError } from '~/internals/machines/utils/assert';\n\nimport { handleRedirectCallback, redirect } from './third-party.actors';\nimport type { ThirdPartyMachineSchema } from './third-party.types';\n\nexport const ThirdPartyMachineId = 'ThirdParty';\n\nexport type TThirdPartyMachine = typeof ThirdPartyMachine;\n\nexport const ThirdPartyMachine = setup({\n  actors: {\n    handleRedirectCallback,\n    redirect,\n  },\n  actions: {\n    logError: log(({ event }) => `Error: ${event.type}`),\n    assignActiveStrategy: assign({\n      activeStrategy: ({ event }) => {\n        assertEvent(event, 'REDIRECT');\n        return event.params.strategy;\n      },\n    }),\n    unassignActiveStrategy: assign({\n      activeStrategy: null,\n    }),\n    sendToNext: ({ context }) => context.parent.send({ type: 'NEXT' }),\n    sendToLoading,\n    setFormErrors: sendTo(\n      ({ context }) => context.formRef,\n      ({ event }) => {\n        assertActorEventError(event);\n        return {\n          type: 'ERRORS.SET',\n          error: event.error,\n        };\n      },\n    ),\n  },\n  guards: {\n    isExampleMode: ({ context }) => Boolean(context.parent.getSnapshot().context.exampleMode),\n  },\n  types: {} as ThirdPartyMachineSchema,\n}).createMachine({\n  id: ThirdPartyMachineId,\n  context: ({ input }) => ({\n    activeStrategy: null,\n    basePath: input.basePath,\n    formRef: input.formRef,\n    flow: input.flow,\n    parent: input.parent,\n    loadingStep: 'strategy',\n  }),\n  initial: 'Idle',\n  states: {\n    Idle: {\n      description: 'Sets third-party providers if not already set, and waits for a redirect or callback event',\n      on: {\n        CALLBACK: 'HandlingCallback',\n        REDIRECT: {\n          guard: not('isExampleMode'),\n          target: 'Redirecting',\n          reenter: true,\n        },\n      },\n    },\n    Redirecting: {\n      description: 'Redirects to the third-party provider for authentication',\n      tags: ['state:redirect', 'state:loading'],\n      entry: ['assignActiveStrategy', 'sendToLoading'],\n      exit: ['unassignActiveStrategy', 'sendToLoading'],\n      invoke: {\n        id: 'redirect',\n        src: 'redirect',\n        input: ({ context, event }) => {\n          assertEvent(event, 'REDIRECT');\n\n          return {\n            basePath: context.basePath,\n            flow: context.flow,\n            params: event.params,\n            parent: context.parent,\n          };\n        },\n        onError: {\n          actions: 'setFormErrors',\n          target: 'Idle',\n        },\n      },\n    },\n    HandlingCallback: {\n      description: 'Handles the callback from the third-party provider',\n      tags: ['state:callback', 'state:loading'],\n      invoke: {\n        id: 'handleRedirectCallback',\n        src: 'handleRedirectCallback',\n        input: ({ context }) => context.parent,\n        onError: {\n          actions: ['logError', 'setFormErrors'],\n          target: 'Idle',\n        },\n      },\n      on: {\n        'CLERKJS.NAVIGATE.*': {\n          actions: 'sendToNext',\n          target: 'Idle',\n        },\n      },\n    },\n  },\n});\n","import { NEXT_WINDOW_HISTORY_SUPPORT_VERSION } from '~/internals/constants';\n\nexport function shouldUseVirtualRouting() {\n  if (typeof window === 'undefined') {\n    return false;\n  }\n\n  if (!window.next) {\n    return false;\n  }\n\n  return window.next.version < NEXT_WINDOW_HISTORY_SUPPORT_VERSION;\n}\n","import type { SignInResource } from '@clerk/types';\nimport type { DoneActorEvent } from 'xstate';\nimport { fromPromise, sendTo, setup } from 'xstate';\n\nimport type { FormFields } from '~/internals/machines/form';\nimport { sendToLoading } from '~/internals/machines/shared';\nimport { assertActorEventError } from '~/internals/machines/utils/assert';\n\nimport type { SignInResetPasswordSchema } from './reset-password.types';\nimport type { SignInRouterMachineActorRef } from './router.types';\n\nexport type TSignInResetPasswordMachine = typeof SignInResetPasswordMachine;\n\nexport const SignInResetPasswordMachineId = 'SignInResetPasswordMachine';\n\nexport const SignInResetPasswordMachine = setup({\n  actors: {\n    attempt: fromPromise<SignInResource, { parent: SignInRouterMachineActorRef; fields: FormFields }>(\n      ({ input: { fields, parent } }) => {\n        const password = (fields.get('password')?.value as string) || '';\n        return parent.getSnapshot().context.clerk.client.signIn.resetPassword({ password });\n      },\n    ),\n  },\n  actions: {\n    sendToLoading,\n    sendToNext: ({ context, event }) =>\n      context.parent.send({ type: 'NEXT', resource: (event as unknown as DoneActorEvent<SignInResource>).output }),\n    setFormErrors: sendTo(\n      ({ context }) => context.formRef,\n      ({ event }) => {\n        assertActorEventError(event);\n        return {\n          type: 'ERRORS.SET',\n          error: event.error,\n        };\n      },\n    ),\n  },\n  types: {} as SignInResetPasswordSchema,\n}).createMachine({\n  id: SignInResetPasswordMachineId,\n  context: ({ input }) => ({\n    loadingStep: 'reset-password',\n    parent: input.parent,\n    formRef: input.formRef,\n  }),\n  initial: 'Pending',\n  states: {\n    Pending: {\n      tags: ['state:pending'],\n      description: 'Waiting for user input',\n      on: {\n        SUBMIT: {\n          target: 'Attempting',\n          reenter: true,\n        },\n      },\n    },\n    Attempting: {\n      tags: ['state:attempting', 'state:loading'],\n      entry: 'sendToLoading',\n      invoke: {\n        id: 'attempt',\n        src: 'attempt',\n        input: ({ context }) => ({\n          parent: context.parent,\n          fields: context.formRef.getSnapshot().context.fields,\n        }),\n        onDone: {\n          actions: ['sendToNext', 'sendToLoading'],\n        },\n        onError: {\n          actions: ['setFormErrors', 'sendToLoading'],\n          target: 'Pending',\n        },\n      },\n    },\n  },\n});\n","import type { SignInResource } from '@clerk/types';\nimport { fromPromise, not, sendTo, setup } from 'xstate';\n\nimport { SIGN_IN_DEFAULT_BASE_PATH } from '~/internals/constants';\nimport type { FormFields } from '~/internals/machines/form';\nimport { sendToLoading } from '~/internals/machines/shared';\nimport { assertActorEventError } from '~/internals/machines/utils/assert';\n\nimport type { SignInRouterMachineActorRef } from './router.types';\nimport type { SignInStartSchema } from './start.types';\n\nexport type TSignInStartMachine = typeof SignInStartMachine;\n\nexport const SignInStartMachineId = 'SignInStart';\n\nexport const SignInStartMachine = setup({\n  actors: {\n    attemptPasskey: fromPromise<\n      SignInResource,\n      { parent: SignInRouterMachineActorRef; flow: 'autofill' | 'discoverable' | undefined }\n    >(({ input: { parent, flow } }) => {\n      return parent.getSnapshot().context.clerk.client.signIn.authenticateWithPasskey({\n        flow,\n      });\n    }),\n    attempt: fromPromise<SignInResource, { parent: SignInRouterMachineActorRef; fields: FormFields }>(\n      ({ input: { fields, parent } }) => {\n        const clerk = parent.getSnapshot().context.clerk;\n\n        const password = fields.get('password');\n        const identifier = fields.get('identifier');\n\n        const passwordParams = password?.value\n          ? {\n              password: password.value,\n              strategy: 'password',\n            }\n          : {};\n\n        return clerk.client.signIn.create({\n          identifier: (identifier?.value as string) || '',\n          ...passwordParams,\n        });\n      },\n    ),\n  },\n  actions: {\n    sendToNext: ({ context, event }) => {\n      // @ts-expect-error -- We're calling this in onDone, and event.output exists on the actor done event\n      return context.parent.send({ type: 'NEXT', resource: event?.output });\n    },\n    sendToLoading,\n    setFormErrors: sendTo(\n      ({ context }) => context.formRef,\n      ({ event }) => {\n        assertActorEventError(event);\n        return {\n          type: 'ERRORS.SET',\n          error: event.error,\n        };\n      },\n    ),\n  },\n  guards: {\n    isExampleMode: ({ context }) => Boolean(context.parent.getSnapshot().context.exampleMode),\n  },\n  types: {} as SignInStartSchema,\n}).createMachine({\n  id: SignInStartMachineId,\n  context: ({ input }) => ({\n    basePath: input.basePath || SIGN_IN_DEFAULT_BASE_PATH,\n    parent: input.parent,\n    formRef: input.formRef,\n    loadingStep: 'start',\n  }),\n  initial: 'Pending',\n  states: {\n    Pending: {\n      tags: ['state:pending'],\n      description: 'Waiting for user input',\n      on: {\n        SUBMIT: {\n          guard: not('isExampleMode'),\n          target: 'Attempting',\n          reenter: true,\n        },\n        'AUTHENTICATE.PASSKEY': {\n          guard: not('isExampleMode'),\n          target: 'AttemptingPasskey',\n          reenter: true,\n        },\n        'AUTHENTICATE.PASSKEY.AUTOFILL': {\n          guard: not('isExampleMode'),\n          target: 'AttemptingPasskeyAutoFill',\n          reenter: false,\n        },\n      },\n    },\n    Attempting: {\n      tags: ['state:attempting', 'state:loading'],\n      entry: 'sendToLoading',\n      invoke: {\n        id: 'attempt',\n        src: 'attempt',\n        input: ({ context }) => ({\n          parent: context.parent,\n          fields: context.formRef.getSnapshot().context.fields,\n        }),\n        onDone: {\n          actions: ['sendToNext', 'sendToLoading'],\n        },\n        onError: {\n          actions: ['setFormErrors', 'sendToLoading'],\n          target: 'Pending',\n        },\n      },\n    },\n    AttemptingPasskey: {\n      tags: ['state:attempting', 'state:loading'],\n      entry: 'sendToLoading',\n      invoke: {\n        id: 'attemptPasskey',\n        src: 'attemptPasskey',\n        input: ({ context }) => ({\n          parent: context.parent,\n          flow: 'discoverable',\n        }),\n        onDone: {\n          actions: ['sendToNext', 'sendToLoading'],\n        },\n        onError: {\n          actions: ['setFormErrors', 'sendToLoading'],\n          target: 'Pending',\n        },\n      },\n    },\n    AttemptingPasskeyAutoFill: {\n      on: {\n        'AUTHENTICATE.PASSKEY': {\n          guard: not('isExampleMode'),\n          target: 'AttemptingPasskey',\n          reenter: true,\n        },\n        SUBMIT: {\n          guard: not('isExampleMode'),\n          target: 'Attempting',\n          reenter: true,\n        },\n      },\n      invoke: {\n        id: 'attemptPasskeyAutofill',\n        src: 'attemptPasskey',\n        input: ({ context }) => ({\n          parent: context.parent,\n          flow: 'autofill',\n        }),\n        onDone: {\n          actions: ['sendToNext'],\n        },\n        onError: {\n          actions: ['setFormErrors'],\n          target: 'Pending',\n        },\n      },\n    },\n  },\n});\n","import { titleize } from '@clerk/shared/underscore';\n\n// TODO: ideally the derivation of these values lives in FAPI and comes back directly from the API\n\nexport function formatName(...args: (string | undefined)[]): string | undefined {\n  switch (args.length) {\n    case 0:\n      return undefined;\n    case 1:\n      return titleize(args[0]);\n    default:\n      return args.filter(Boolean).map(titleize).join(' ');\n  }\n}\n\nexport function formatSalutation({\n  firstName,\n  lastName,\n  identifier,\n}: {\n  firstName: string | undefined;\n  lastName: string | undefined;\n  identifier: string | undefined | null;\n}): string {\n  return (firstName && formatName(firstName)) || (lastName && formatName(lastName)) || identifier || '';\n}\n","import { formatSalutation } from '~/internals/machines/utils/formatters';\n\nimport type { SignInRouterSnapshot } from './router.types';\n\nexport function SignInSafeIdentifierSelector(s: SignInRouterSnapshot): string {\n  return s.context.clerk?.client.signIn.identifier || '';\n}\n\nexport function SignInSalutationSelector(s: SignInRouterSnapshot): string {\n  const signIn = s.context.clerk?.client.signIn;\n\n  return formatSalutation({\n    firstName: signIn?.userData?.firstName,\n    identifier: signIn?.identifier,\n    lastName: signIn?.userData?.lastName,\n  });\n}\n","import type { SignInResource } from '@clerk/types';\nimport type { ActorRefFrom, MachineSnapshot, StateMachine } from 'xstate';\n\nimport type { TFormMachine } from '~/internals/machines/form';\nimport type {\n  BaseRouterContext,\n  BaseRouterErrorEvent,\n  BaseRouterFormAttachEvent,\n  BaseRouterInput,\n  BaseRouterLoadingEvent,\n  BaseRouterNextEvent,\n  BaseRouterPrevEvent,\n  BaseRouterRedirectEvent,\n  BaseRouterResetEvent,\n  BaseRouterResetStepEvent,\n  BaseRouterSetClerkEvent,\n  BaseRouterStartEvent,\n  BaseRouterTransferEvent,\n} from '~/internals/machines/types';\n\nimport type { SignInVerificationFactorUpdateEvent } from './verification.types';\n\n// ---------------------------------- Tags ---------------------------------- //\n\nexport const SignInRouterRoutes = {\n  start: 'route:start',\n  firstFactor: 'route:first-factor',\n  secondFactor: 'route:second-factor',\n  callback: 'route:callback',\n  error: 'route:error',\n  forgotPassword: 'route:forgot-password',\n  resetPassword: 'route:reset-password',\n  chooseStrategy: 'route:choose-strategy',\n} as const;\n\nexport type SignInRouterRoutes = keyof typeof SignInRouterRoutes;\nexport type SignInRouterTags = (typeof SignInRouterRoutes)[keyof typeof SignInRouterRoutes];\n\n// ---------------------------------- Children ---------------------------------- //\n\nexport const SignInRouterSystemId = {\n  start: 'start',\n  firstFactor: 'firstFactor',\n  secondFactor: 'secondFactor',\n  resetPassword: 'resetPassword',\n} as const;\n\nexport type SignInRouterSystemId = keyof typeof SignInRouterSystemId;\n\n// ---------------------------------- Events ---------------------------------- //\n\nexport type SignInRouterFormAttachEvent = BaseRouterFormAttachEvent;\nexport type SignInRouterNextEvent = BaseRouterNextEvent<SignInResource>;\nexport type SignInRouterStartEvent = BaseRouterStartEvent;\nexport type SignInRouterPrevEvent = BaseRouterPrevEvent;\nexport type SignInRouterChooseStrategyEvent = { type: 'NAVIGATE.CHOOSE_STRATEGY' };\nexport type SignInRouterForgotPasswordEvent = { type: 'NAVIGATE.FORGOT_PASSWORD' };\nexport type SignInRouterErrorEvent = BaseRouterErrorEvent;\nexport type SignInRouterTransferEvent = BaseRouterTransferEvent;\nexport type SignInRouterRedirectEvent = BaseRouterRedirectEvent;\nexport type SignInRouterResetEvent = BaseRouterResetEvent;\nexport type SignInRouterResetStepEvent = BaseRouterResetStepEvent;\nexport type SignInRouterLoadingEvent = BaseRouterLoadingEvent<'start' | 'verifications' | 'reset-password'>;\nexport type SignInRouterSetClerkEvent = BaseRouterSetClerkEvent;\nexport type SignInRouterSubmitEvent = { type: 'SUBMIT' };\nexport type SignInRouterPasskeyEvent = { type: 'AUTHENTICATE.PASSKEY' };\nexport type SignInRouterPasskeyAutofillEvent = {\n  type: 'AUTHENTICATE.PASSKEY.AUTOFILL';\n};\n\nexport interface SignInRouterInitEvent extends BaseRouterInput {\n  type: 'INIT';\n  formRef: ActorRefFrom<TFormMachine>;\n  signUpPath?: string;\n}\n\nexport type SignInRouterNavigationEvents =\n  | SignInRouterStartEvent\n  | SignInRouterChooseStrategyEvent\n  | SignInRouterForgotPasswordEvent\n  | SignInRouterPrevEvent;\n\nexport type SignInRouterEvents =\n  | SignInRouterFormAttachEvent\n  | SignInRouterInitEvent\n  | SignInRouterNextEvent\n  | SignInRouterNavigationEvents\n  | SignInRouterErrorEvent\n  | SignInRouterTransferEvent\n  | SignInRouterRedirectEvent\n  | SignInRouterResetEvent\n  | SignInRouterResetStepEvent\n  | SignInVerificationFactorUpdateEvent\n  | SignInRouterLoadingEvent\n  | SignInRouterSetClerkEvent\n  | SignInRouterSubmitEvent\n  | SignInRouterPasskeyEvent\n  | SignInRouterPasskeyAutofillEvent;\n\n// ---------------------------------- Context ---------------------------------- //\n\nexport type SignInRouterLoadingContext = Omit<SignInRouterLoadingEvent, 'type'>;\n\nexport interface SignInRouterContext extends BaseRouterContext {\n  formRef: ActorRefFrom<TFormMachine>;\n  loading: SignInRouterLoadingContext;\n  signUpPath: string;\n  webAuthnAutofillSupport: boolean;\n}\n\n// ---------------------------------- Input ---------------------------------- //\n\nexport interface SignInRouterInput {\n  // NOTE: Set in INIT event\n}\n\n// ---------------------------------- Schema ---------------------------------- //\n\nexport interface SignInRouterSchema {\n  context: SignInRouterContext;\n  events: SignInRouterEvents;\n  tags: SignInRouterTags;\n}\n\n// ---------------------------------- Schema ---------------------------------- //\n\nexport type SignInRouterChildren = any; // TODO: Update\nexport type SignInRouterOuptut = any; // TODO: Update\nexport type SignInRouterStateValue = any; // TODO: Update\n\nexport type SignInRouterSnapshot = MachineSnapshot<\n  SignInRouterContext,\n  SignInRouterEvents,\n  SignInRouterChildren,\n  SignInRouterStateValue,\n  SignInRouterTags,\n  SignInRouterOuptut,\n  any // TMeta - Introduced in XState 5.12.x\n>;\n\n// ---------------------------------- Machine Type ---------------------------------- //\n\nexport type TSignInRouterParentMachine = StateMachine<\n  SignInRouterContext, // context\n  SignInRouterEvents, // event\n  SignInRouterChildren, // children\n  any, // actor\n  any, // action\n  any, // guard\n  any, // delay\n  any, // state value\n  string, // tag\n  any, // input\n  SignInRouterOuptut, // output\n  any, // emitted\n  any // meta\n>;\n\n// ---------------------------------- Machine Actor Ref ---------------------------------- //\n\nexport type SignInRouterMachineActorRef = ActorRefFrom<TSignInRouterParentMachine>;\n","import { usePathname, useRouter, useSearchParams } from 'next/navigation';\n\nimport { NEXT_WINDOW_HISTORY_SUPPORT_VERSION } from '~/internals/constants';\n\nimport type { ClerkHostRouter } from './router';\n\n/**\n * Clerk router integration with Next.js's router.\n */\nexport const useNextRouter = (): ClerkHostRouter => {\n  const router = useRouter();\n  const pathname = usePathname();\n  // eslint-disable-next-line react-hooks/rules-of-hooks -- The order doesn't differ between renders as we're checking the execution environment.\n  const searchParams = typeof window === 'undefined' ? new URLSearchParams() : useSearchParams();\n\n  // The window.history APIs seem to prevent Next.js from triggering a full page re-render, allowing us to\n  // preserve internal state between steps.\n  const canUseWindowHistoryAPIs =\n    typeof window !== 'undefined' && window.next && window.next.version >= NEXT_WINDOW_HISTORY_SUPPORT_VERSION;\n\n  return {\n    mode: 'path',\n    name: 'NextRouter',\n    push: (path: string) => router.push(path),\n    replace: (path: string) =>\n      canUseWindowHistoryAPIs ? window.history.replaceState(null, '', path) : router.replace(path),\n    shallowPush(path: string) {\n      canUseWindowHistoryAPIs ? window.history.pushState(null, '', path) : router.push(path, {});\n    },\n    pathname: () => pathname,\n    searchParams: () => searchParams,\n  };\n};\n","import { createContext, useContext } from 'react';\n\nimport type { ClerkHostRouter, ClerkRouter } from './router';\nimport { createClerkRouter } from './router';\n\nexport const ClerkRouterContext = createContext<ClerkRouter | null>(null);\n\nexport function useClerkRouter() {\n  const ctx = useContext(ClerkRouterContext);\n\n  if (!ctx) {\n    throw new Error('clerk: Unable to locate ClerkRouter, make sure this is rendered within `<Router>`.');\n  }\n\n  return ctx;\n}\n\nexport function Router({\n  basePath,\n  children,\n  router,\n}: {\n  children: React.ReactNode;\n  basePath?: string;\n  router: ClerkHostRouter;\n}) {\n  const clerkRouter = createClerkRouter(router, basePath);\n\n  return <ClerkRouterContext.Provider value={clerkRouter}>{children}</ClerkRouterContext.Provider>;\n}\n\ntype RouteProps = { path?: string; index?: boolean };\n\nexport function Route({ path, children, index }: RouteProps & { children: React.ReactNode }) {\n  // check for parent router, if exists, create child router, otherwise create one\n  const parentRouter = useClerkRouter();\n\n  if (!path && !index) {\n    return children;\n  }\n\n  if (!parentRouter?.match(path, index)) {\n    return null;\n  }\n\n  return children;\n}\n","import { withLeadingSlash, withoutTrailingSlash } from '@clerk/shared/url';\n\nimport type { ROUTING } from '~/internals/constants';\n\nexport const PRESERVED_QUERYSTRING_PARAMS = ['after_sign_in_url', 'after_sign_up_url', 'redirect_url'];\n\n/**\n * This type represents a generic router interface that Clerk relies on to interact with the host router.\n */\nexport type ClerkHostRouter = {\n  readonly mode: ROUTING;\n  readonly name: string;\n  pathname: () => string;\n  push: (path: string) => void;\n  replace: (path: string) => void;\n  searchParams: () => URLSearchParams;\n  shallowPush: (path: string) => void;\n};\n\n/**\n * Internal Clerk router, used by Clerk components to interact with the host's router.\n */\nexport type ClerkRouter = {\n  /**\n   * The basePath the router is currently mounted on.\n   */\n  basePath: string;\n  /**\n   * Creates a child router instance scoped to the provided base path.\n   */\n  child: (childBasePath: string) => ClerkRouter;\n  /**\n   * Matches the provided path against the router's current path. If index is provided, matches against the root route of the router.\n   */\n  match: (path?: string, index?: boolean) => boolean;\n\n  /**\n   * Mode of the router instance, path-based or virtual\n   */\n  readonly mode: ROUTING;\n\n  /**\n   * Name of the router instance\n   */\n  readonly name: string;\n\n  /**\n   * Navigates to the provided path via a history push\n   */\n  push: ClerkHostRouter['push'];\n  /**\n   * Navigates to the provided path via a history replace\n   */\n  replace: ClerkHostRouter['replace'];\n  /**\n   * If supported by the host router, navigates to the provided path without triggering a full navigation\n   */\n  shallowPush: ClerkHostRouter['shallowPush'];\n  /**\n   * Returns the current pathname (including the base path)\n   */\n  pathname: ClerkHostRouter['pathname'];\n  /**\n   * Returns the current search params\n   */\n  searchParams: ClerkHostRouter['searchParams'];\n};\n\n/**\n * Ensures the provided path has a leading slash and no trailing slash\n */\nfunction normalizePath(path: string) {\n  return withoutTrailingSlash(withLeadingSlash(path));\n}\n\n/**\n * Factory function to create an instance of ClerkRouter with the provided host router.\n *\n * @param router host router instance to be used by the router\n * @param basePath base path of the router, navigation and matching will be scoped to this path\n * @returns A ClerkRouter instance\n */\nexport function createClerkRouter(router: ClerkHostRouter, basePath: string = '/'): ClerkRouter {\n  const normalizedBasePath = normalizePath(basePath);\n\n  /**\n   * Certain query parameters need to be preserved when navigating internally. These query parameters are ultimately used by Clerk to dictate behavior, so we keep them around.\n   */\n  function makeDestinationUrlWithPreservedQueryParameters(path: string) {\n    const destinationUrl = new URL(path, window.location.origin);\n    const currentSearchParams = router.searchParams();\n\n    PRESERVED_QUERYSTRING_PARAMS.forEach(key => {\n      const maybeValue = currentSearchParams.get(key);\n      if (maybeValue) {\n        destinationUrl.searchParams.set(key, maybeValue);\n      }\n    });\n\n    return `${destinationUrl.pathname}${destinationUrl.search}`;\n  }\n\n  function match(path?: string, index?: boolean) {\n    const pathToMatch = path ?? (index && '/');\n\n    if (!pathToMatch) {\n      throw new Error('[clerk] router.match() requires either a path to match, or the index flag must be set to true.');\n    }\n\n    const normalizedPath = normalizePath(pathToMatch);\n\n    return normalizePath(`${normalizedBasePath}${normalizedPath}`) === normalizePath(router.pathname());\n  }\n\n  function child(childBasePath: string) {\n    return createClerkRouter(router, `${normalizedBasePath}${normalizePath(childBasePath)}`);\n  }\n\n  function push(path: string) {\n    const destinationUrl = makeDestinationUrlWithPreservedQueryParameters(path);\n    return router.push(destinationUrl);\n  }\n\n  function replace(path: string) {\n    const destinationUrl = makeDestinationUrlWithPreservedQueryParameters(path);\n    return router.replace(destinationUrl);\n  }\n\n  function shallowPush(path: string) {\n    const destinationUrl = makeDestinationUrlWithPreservedQueryParameters(path);\n    return router.shallowPush(destinationUrl);\n  }\n\n  return {\n    child,\n    match,\n    mode: router.mode,\n    name: router.name,\n    push,\n    replace,\n    shallowPush,\n    pathname: router.pathname,\n    searchParams: router.searchParams,\n    basePath: normalizedBasePath,\n  };\n}\n","'use client';\n\nimport { useSyncExternalStore } from 'react';\n\nimport type { ClerkHostRouter } from './router';\n\nconst DUMMY_ORIGIN = 'https://clerk.dummy';\n\n// TODO: introduce history stack?\nclass VirtualRouter implements ClerkHostRouter {\n  readonly name = 'VirtualRouter';\n  readonly mode = 'virtual';\n\n  #url: URL;\n  #listeners: Set<(url: URL) => void> = new Set();\n\n  constructor(path?: string) {\n    const origin = typeof window === 'undefined' ? DUMMY_ORIGIN : window.location.origin;\n\n    this.#url = new URL(path ?? '/', origin);\n  }\n\n  push(path: string) {\n    const newUrl = new URL(this.#url.toString());\n    newUrl.pathname = path;\n\n    this.#url = newUrl;\n    this.emit();\n  }\n\n  replace(path: string) {\n    this.push(path);\n  }\n\n  shallowPush(path: string) {\n    this.push(path);\n  }\n\n  pathname() {\n    return this.#url.pathname;\n  }\n\n  searchParams() {\n    return this.#url.searchParams;\n  }\n\n  subscribe(listener: () => void) {\n    this.#listeners.add(listener);\n\n    return () => this.#listeners.delete(listener);\n  }\n\n  emit() {\n    this.#listeners.forEach(listener => listener(this.#url));\n  }\n\n  getSnapshot() {\n    return this.#url;\n  }\n}\n\nconst virtualRouter = new VirtualRouter('/');\n\nexport const useVirtualRouter = (): ClerkHostRouter => {\n  const url = useSyncExternalStore(\n    virtualRouter.subscribe.bind(virtualRouter),\n    virtualRouter.getSnapshot.bind(virtualRouter),\n  );\n\n  return {\n    mode: virtualRouter.mode,\n    name: virtualRouter.name,\n    pathname: () => url.pathname,\n    push: virtualRouter.push.bind(virtualRouter),\n    replace: virtualRouter.replace.bind(virtualRouter),\n    searchParams: () => url.searchParams,\n    shallowPush: virtualRouter.shallowPush.bind(virtualRouter),\n  };\n};\n","import { useSelector as useSelectorUnbound } from '@xstate/react';\nimport * as React from 'react';\nimport type { ActorRefFrom, AnyActorRef, AnyStateMachine, SnapshotFrom } from 'xstate';\n\n/**\n * Creates a context and hooks for a given actor ref.\n\n * @example\n * const SignInRouterCtx = createContextFromActorRef<typeof SignInRouterMachine>('SignInRouterCtx')\n *\n * const Parent = () => {\n *   const ref = useActorRef(SignInRouterMachine, { input: { basePath: '/sign-in' } });\n *\n *   return (\n *     <SignInRouterCtx.Provider ref={ref}>\n *       <Child />\n *     </SignInRouterCtx>\n *   )\n * }\n *\n * const Child = () => {\n *   const ref = SignInRouterCtx.useActorRef();\n *   const status = SignInRouterCtx.useSelector(state => state.context.clerk);\n\n *   const handleClick = useCallback(() => ref.send({ type: 'NEXT' }), [ref]);\n *\n *   return <button onClick={handleClick}>;\n * }\n */\n\nexport function createContextFromActorRef<TMachine extends AnyStateMachine, TRef = ActorRefFrom<TMachine>>(\n  displayName: string,\n) {\n  const ReactContext = React.createContext<TRef | null>(null);\n  const OriginalProvider = ReactContext.Provider;\n\n  function Provider({ children, actorRef }: { children: React.ReactNode; actorRef: TRef }) {\n    return React.createElement(\n      OriginalProvider,\n      {\n        value: actorRef,\n      },\n      children,\n    );\n  }\n\n  Provider.displayName = displayName;\n\n  function useContext(allowMissingActor?: false | undefined): TRef;\n  function useContext(allowMissingActor: true): TRef | null;\n  function useContext(allowMissingActor: boolean = false): TRef | null {\n    const actorRef = React.useContext(ReactContext);\n\n    if (!allowMissingActor && !actorRef) {\n      throw new Error(\n        `You used a hook from \"${Provider.displayName}\" but it's not inside a <${Provider.displayName}.Provider> component.`,\n      );\n    }\n\n    return actorRef;\n  }\n\n  function useSelector<T>(selector: (snapshot: SnapshotFrom<TRef>) => T, compare?: (a: T, b: T) => boolean): T {\n    const actor = useContext();\n    return useSelectorUnbound(actor as AnyActorRef, selector, compare);\n  }\n\n  return {\n    Provider,\n    useActorRef: useContext,\n    useSelector,\n  };\n}\n","import type { ActorRefFrom, AnyActorRef, AnyStateMachine, SnapshotFrom } from 'xstate';\n\nimport type {\n  TSignInFirstFactorMachine,\n  TSignInResetPasswordMachine,\n  TSignInRouterMachine,\n  TSignInSecondFactorMachine,\n  TSignInStartMachine,\n} from '~/internals/machines/sign-in';\nimport { createContextFromActorRef } from '~/react/utils/create-context-from-actor-ref';\n\nexport type SnapshotState = SnapshotFrom<TSignInRouterMachine>;\n\nexport const SignInRouterCtx = createContextFromActorRef<TSignInRouterMachine>('SignInRouterCtx');\n\nfunction useSignInStep<M extends AnyStateMachine, T = ActorRefFrom<M>>(name: string) {\n  return SignInRouterCtx.useSelector(state => state.children[name] as AnyActorRef) as T;\n}\n\nexport const useSignInStartStep = () => useSignInStep<TSignInStartMachine>('start');\nexport const useSignInFirstFactorStep = () => useSignInStep<TSignInFirstFactorMachine>('firstFactor');\nexport const useSignInSecondFactorStep = () => useSignInStep<TSignInSecondFactorMachine>('secondFactor');\nexport const useSignInResetPasswordStep = () => useSignInStep<TSignInResetPasswordMachine>('resetPassword');\n\nexport const useSignInPasskeyAutofill = () =>\n  SignInRouterCtx.useSelector(state => state.context.webAuthnAutofillSupport);\n","import type { SignInStrategy } from '@clerk/types';\nimport { createContext, useContext } from 'react';\n\nimport { ClerkElementsRuntimeError } from '~/internals/errors';\nimport type { SignInStrategyName } from '~/internals/machines/shared';\n\nexport type StrategiesContextValue = {\n  current: SignInStrategy | undefined;\n  isActive: (name: string) => boolean;\n  preferred: SignInStrategy | undefined;\n};\n\nexport const StrategiesContext = createContext<StrategiesContextValue>({\n  current: undefined,\n  isActive: _name => false,\n  preferred: undefined,\n});\n\nexport function useStrategy(name: SignInStrategyName) {\n  const ctx = useContext(StrategiesContext);\n\n  if (!ctx) {\n    throw new ClerkElementsRuntimeError(\n      'useStrategy must be used within a <SignIn.Step name=\"verifications\"> component. Did you mean to `import { Step } from \"@clerk/elements/sign-up\"` instead?',\n    );\n  }\n\n  const { current, preferred, isActive } = ctx;\n\n  return {\n    current,\n    preferred,\n    get active() {\n      return isActive(name);\n    },\n  };\n}\n","import { useClerk } from '@clerk/clerk-react';\nimport { logger } from '@clerk/shared/logger';\nimport { eventComponentMounted } from '@clerk/shared/telemetry';\nimport type { Autocomplete } from '@clerk/types';\nimport { composeEventHandlers } from '@radix-ui/primitive';\nimport type {\n  FormControlProps,\n  FormControlProps as RadixFormControlProps,\n  FormFieldProps as RadixFormFieldProps,\n  FormMessageProps as RadixFormMessageProps,\n  FormProps as RadixFormProps,\n  FormSubmitProps as RadixFormSubmitProps,\n} from '@radix-ui/react-form';\nimport {\n  Control as RadixControl,\n  Field as RadixField,\n  Form as RadixForm,\n  FormMessage as RadixFormMessage,\n  Label as RadixLabel,\n  Submit as RadixSubmit,\n} from '@radix-ui/react-form';\nimport { Slot } from '@radix-ui/react-slot';\nimport * as React from 'react';\nimport type { SetRequired } from 'type-fest';\nimport type { BaseActorRef } from 'xstate';\n\nimport type { ClerkElementsError } from '~/internals/errors';\nimport { ClerkElementsFieldError, ClerkElementsRuntimeError } from '~/internals/errors';\nimport type { FieldDetails } from '~/internals/machines/form';\nimport {\n  fieldFeedbackSelector,\n  fieldHasValueSelector,\n  fieldValueSelector,\n  globalErrorsSelector,\n  useFormSelector,\n  useFormStore,\n} from '~/internals/machines/form/form.context';\nimport { usePassword } from '~/react/hooks/use-password.hook';\nimport { SignInRouterCtx } from '~/react/sign-in/context';\nimport { useSignInPasskeyAutofill } from '~/react/sign-in/context/router.context';\nimport type { ErrorMessagesKey } from '~/react/utils/generate-password-error-text';\nimport { isReactFragment } from '~/react/utils/is-react-fragment';\n\nimport type { OTPInputProps } from './otp';\nimport { OTP_LENGTH_DEFAULT, OTPInput } from './otp';\nimport { type ClerkFieldId, FIELD_STATES, FIELD_VALIDITY, type FieldStates } from './types';\n\n/* -------------------------------------------------------------------------------------------------\n * Context\n * -----------------------------------------------------------------------------------------------*/\n\nconst FieldContext = React.createContext<Pick<FieldDetails, 'name'> | null>(null);\nconst useFieldContext = () => React.useContext(FieldContext);\n\n/* -------------------------------------------------------------------------------------------------\n * Hooks\n * -----------------------------------------------------------------------------------------------*/\n\nconst useGlobalErrors = () => {\n  const errors = useFormSelector(globalErrorsSelector);\n\n  return {\n    errors,\n  };\n};\n\nconst useFieldFeedback = ({ name }: Partial<Pick<FieldDetails, 'name'>>) => {\n  const feedback = useFormSelector(fieldFeedbackSelector(name));\n\n  return {\n    feedback,\n  };\n};\n\nconst determineInputTypeFromName = (name: FormFieldProps['name']) => {\n  if (name === 'password' || name === 'confirmPassword' || name === 'currentPassword' || name === 'newPassword') {\n    return 'password' as const;\n  }\n  if (name === 'emailAddress') {\n    return 'email' as const;\n  }\n  if (name === 'phoneNumber') {\n    return 'tel' as const;\n  }\n  if (name === 'code') {\n    return 'otp' as const;\n  }\n\n  return 'text' as const;\n};\n\n/**\n * Given a field name, determine the current state of the field\n */\nconst useFieldState = ({ name }: Partial<Pick<FieldDetails, 'name'>>) => {\n  const { feedback } = useFieldFeedback({ name });\n  const hasValue = useFormSelector(fieldHasValueSelector(name));\n\n  /**\n   * If hasValue is false, the state should be idle\n   * The rest depends on the feedback type\n   */\n  let state: FieldStates = FIELD_STATES.idle;\n\n  if (!hasValue) {\n    state = FIELD_STATES.idle;\n  }\n\n  switch (feedback?.type) {\n    case 'error':\n      state = FIELD_STATES.error;\n      break;\n    case 'warning':\n      state = FIELD_STATES.warning;\n      break;\n    case 'info':\n      state = FIELD_STATES.info;\n      break;\n    case 'success':\n      state = FIELD_STATES.success;\n      break;\n    default:\n      break;\n  }\n\n  return {\n    state,\n  };\n};\n\n/**\n * Provides the form submission handler along with the form's validity via a data attribute\n */\nconst useForm = ({ flowActor }: { flowActor?: BaseActorRef<{ type: 'SUBMIT' }> }) => {\n  const { errors } = useGlobalErrors();\n  const validity = errors.length > 0 ? FIELD_VALIDITY.invalid : FIELD_VALIDITY.valid;\n\n  // Register the onSubmit handler for form submission\n  // TODO: merge user-provided submit handler\n  const onSubmit = React.useCallback(\n    (event: React.FormEvent<Element>) => {\n      event.preventDefault();\n      if (flowActor) {\n        flowActor.send({ type: 'SUBMIT' });\n      }\n    },\n    [flowActor],\n  );\n\n  return {\n    props: {\n      [`data-${validity}`]: true,\n      onSubmit,\n    },\n  };\n};\n\nconst useField = ({ name }: Partial<Pick<FieldDetails, 'name'>>) => {\n  const hasValue = useFormSelector(fieldHasValueSelector(name));\n  const { feedback } = useFieldFeedback({ name });\n\n  const shouldBeHidden = false; // TODO: Implement clerk-js utils\n  const hasError = feedback ? feedback.type === 'error' : false;\n  const validity = hasError ? FIELD_VALIDITY.invalid : FIELD_VALIDITY.valid;\n\n  return {\n    hasValue,\n    props: {\n      [`data-${validity}`]: true,\n      'data-hidden': shouldBeHidden ? true : undefined,\n      serverInvalid: hasError,\n    },\n  };\n};\n\nconst useInput = ({\n  name: inputName,\n  value: initialValue,\n  type: inputType,\n  onChange: onChangeProp,\n  onBlur: onBlurProp,\n  onFocus: onFocusProp,\n  ...passthroughProps\n}: FormInputProps) => {\n  // Inputs can be used outside a <Field> wrapper if desired, so safely destructure here\n  const fieldContext = useFieldContext();\n  const name = inputName || fieldContext?.name;\n  const { state: fieldState } = useFieldState({ name });\n\n  if (!name) {\n    throw new Error('Clerk: <Input /> must be wrapped in a <Field> component or have a name prop.');\n  }\n\n  const ref = useFormStore();\n  const [hasPassedValiation, setHasPassedValidation] = React.useState(false);\n\n  const { validatePassword } = usePassword({\n    onValidationComplexity: hasPassed => setHasPassedValidation(hasPassed),\n    onValidationSuccess: () => {\n      ref.send({\n        type: 'FIELD.FEEDBACK.SET',\n        field: { name, feedback: { type: 'success', message: 'Your password meets all the necessary requirements.' } },\n      });\n    },\n    onValidationError: (error, keys) => {\n      if (error) {\n        ref.send({\n          type: 'FIELD.FEEDBACK.SET',\n          field: {\n            name,\n            feedback: {\n              type: 'error',\n              message: new ClerkElementsFieldError('password-validation-error', error),\n              codes: keys,\n            },\n          },\n        });\n      }\n    },\n    onValidationWarning: (warning, keys) =>\n      ref.send({\n        type: 'FIELD.FEEDBACK.SET',\n        field: { name, feedback: { type: 'warning', message: warning, codes: keys } },\n      }),\n    onValidationInfo: (info, keys) => {\n      // TODO: If input is not focused, make this info an error\n      ref.send({\n        type: 'FIELD.FEEDBACK.SET',\n        field: { name, feedback: { type: 'info', message: info, codes: keys } },\n      });\n    },\n  });\n  const value = useFormSelector(fieldValueSelector(name));\n  const hasValue = Boolean(value);\n  const type = inputType ?? determineInputTypeFromName(name);\n  let shouldValidatePassword = false;\n\n  if (type === 'password' || type === 'text') {\n    shouldValidatePassword = Boolean((passthroughProps as PasswordInputProps).validatePassword);\n  }\n\n  // Register the field in the machine context\n  React.useEffect(() => {\n    if (!name || ref.getSnapshot().context.fields.get(name)) {\n      return;\n    }\n\n    ref.send({ type: 'FIELD.ADD', field: { name, value: initialValue } });\n\n    return () => ref.send({ type: 'FIELD.REMOVE', field: { name } });\n  }, [ref]); // eslint-disable-line react-hooks/exhaustive-deps\n\n  // Register the onChange handler for field updates to persist to the machine context\n  const onChange = React.useCallback(\n    (event: React.ChangeEvent<HTMLInputElement>) => {\n      onChangeProp?.(event);\n      if (!name || initialValue) {\n        return;\n      }\n      ref.send({ type: 'FIELD.UPDATE', field: { name, value: event.target.value } });\n      if (shouldValidatePassword) {\n        validatePassword(event.target.value);\n      }\n    },\n    [ref, name, onChangeProp, initialValue, shouldValidatePassword, validatePassword],\n  );\n\n  const onBlur = React.useCallback(\n    (event: React.FocusEvent<HTMLInputElement>) => {\n      onBlurProp?.(event);\n      if (shouldValidatePassword) {\n        validatePassword(event.target.value);\n      }\n    },\n    [onBlurProp, shouldValidatePassword, validatePassword],\n  );\n\n  const onFocus = React.useCallback(\n    (event: React.FocusEvent<HTMLInputElement>) => {\n      onFocusProp?.(event);\n      if (shouldValidatePassword) {\n        validatePassword(event.target.value);\n      }\n    },\n    [onFocusProp, shouldValidatePassword, validatePassword],\n  );\n\n  React.useEffect(() => {\n    if (!initialValue || !name) {\n      return;\n    }\n    ref.send({ type: 'FIELD.UPDATE', field: { name, value: initialValue } });\n  }, [name, ref, initialValue]);\n\n  if (!name) {\n    throw new Error('Clerk: <Input /> must be wrapped in a <Field> component or have a name prop.');\n  }\n\n  // TODO: Implement clerk-js utils\n  const shouldBeHidden = false;\n\n  const Element = type === 'otp' ? OTPInput : RadixControl;\n\n  let props = {};\n  if (type === 'otp') {\n    const p = passthroughProps as Omit<OTPInputProps, 'name' | 'value' | 'type'>;\n    const length = p.length || OTP_LENGTH_DEFAULT;\n\n    props = {\n      'data-otp-input': true,\n      autoComplete: 'one-time-code',\n      inputMode: 'numeric',\n      pattern: `[0-9]{${length}}`,\n      minLength: length,\n      maxLength: length,\n      onChange: (event: React.ChangeEvent<HTMLInputElement>) => {\n        // Only accept numbers\n        event.currentTarget.value = event.currentTarget.value.replace(/\\D+/g, '');\n        onChange(event);\n      },\n      type: 'text',\n      spellCheck: false,\n    };\n  }\n  if (type === 'password' && shouldValidatePassword) {\n    props = {\n      'data-has-passed-validation': hasPassedValiation ? true : undefined,\n    };\n  }\n\n  // Filter out invalid props that should not be passed through\n  // @ts-expect-error - Doesn't know about type narrowing by type here\n  const { validatePassword: _1, ...rest } = passthroughProps;\n\n  return {\n    Element,\n    props: {\n      type,\n      value: value ?? '',\n      onChange,\n      onBlur,\n      onFocus,\n      'data-hidden': shouldBeHidden ? true : undefined,\n      'data-has-value': hasValue ? true : undefined,\n      'data-state': fieldState,\n      ...props,\n      ...rest,\n    },\n  };\n};\n\n/* -------------------------------------------------------------------------------------------------\n * Form\n * -----------------------------------------------------------------------------------------------*/\n\nconst FORM_NAME = 'ClerkElementsForm';\n\ntype FormElement = React.ElementRef<typeof RadixForm>;\ntype FormProps = SetRequired<RadixFormProps, 'children'> & {\n  flowActor?: BaseActorRef<{ type: 'SUBMIT' }>;\n};\n\nconst Form = React.forwardRef<FormElement, FormProps>(({ flowActor, onSubmit, ...rest }, forwardedRef) => {\n  const form = useForm({ flowActor: flowActor });\n\n  const { onSubmit: internalOnSubmit, ...internalFormProps } = form.props;\n\n  return (\n    <RadixForm\n      {...internalFormProps}\n      {...rest}\n      onSubmit={composeEventHandlers(internalOnSubmit, onSubmit)}\n      ref={forwardedRef}\n    />\n  );\n});\n\nForm.displayName = FORM_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * Field\n * -----------------------------------------------------------------------------------------------*/\n\nconst FIELD_NAME = 'ClerkElementsField';\nconst FIELD_INNER_NAME = 'ClerkElementsFieldInner';\nconst FIELD_STATE_NAME = 'ClerkElementsFieldState';\n\ntype FormFieldElement = React.ElementRef<typeof RadixField>;\ntype FormFieldProps = Omit<RadixFormFieldProps, 'children'> & {\n  name: Autocomplete<ClerkFieldId>;\n  alwaysShow?: boolean;\n  children: React.ReactNode | ((state: FieldStates) => React.ReactNode);\n};\n\n/**\n * Field is used to associate its child elements with a specific input. It automatically handles unique ID generation and associating the contained label and input elements.\n *\n * @param name - Give your `<Field>` a unique name inside the current form. If you choose one of the following names Clerk Elements will automatically set the correct type on the `<input />` element: `emailAddress`, `password`, `phoneNumber`, and `code`.\n * @param alwaysShow - Optional. When `true`, the field will always be rendered, regardless of its state. By default, a field is hidden if it's optional or if it's a filled-out required field.\n * @param {Function} children - A function that receives `state` as an argument. `state` is a union of `\"success\" | \"error\" | \"idle\" | \"warning\" | \"info\"`.\n *\n * @example\n * <Clerk.Field name=\"emailAddress\">\n *   <Clerk.Label>Email</Clerk.Label>\n *   <Clerk.Input />\n * </Clerk.Field>\n *\n * @example\n * <Clerk.Field name=\"emailAddress\">\n *  {(fieldState) => (\n *    <Clerk.Label>Email</Clerk.Label>\n *    <Clerk.Input className={`text-${fieldState}`} />\n *  )}\n * </Clerk.Field>\n */\nconst Field = React.forwardRef<FormFieldElement, FormFieldProps>(({ alwaysShow, ...rest }, forwardedRef) => {\n  const formRef = useFormStore();\n  const formCtx = formRef.getSnapshot().context;\n  // A field is marked as hidden if it's optional OR if it's a filled-out required field\n  const isHiddenField = formCtx.progressive && Boolean(formCtx.hidden?.has(rest.name));\n\n  // Only alwaysShow={true} should force behavior to render the field, on `undefined` or alwaysShow={false} the isHiddenField logic should take over\n  const shouldHide = alwaysShow ? false : isHiddenField;\n\n  return shouldHide ? null : (\n    <FieldContext.Provider value={{ name: rest.name }}>\n      <FieldInner\n        {...rest}\n        ref={forwardedRef}\n      />\n    </FieldContext.Provider>\n  );\n});\n\nconst FieldInner = React.forwardRef<FormFieldElement, FormFieldProps>((props, forwardedRef) => {\n  const { children, ...rest } = props;\n  const field = useField({ name: rest.name });\n  const { state: fieldState } = useFieldState({ name: rest.name });\n\n  return (\n    <RadixField\n      {...field.props}\n      {...rest}\n      ref={forwardedRef}\n    >\n      {typeof children === 'function' ? children(fieldState) : children}\n    </RadixField>\n  );\n});\n\nField.displayName = FIELD_NAME;\nFieldInner.displayName = FIELD_INNER_NAME;\n\ntype FieldStateRenderFn = {\n  children: (state: {\n    state: FieldStates;\n    message: string | undefined;\n    codes: ErrorMessagesKey[] | undefined;\n  }) => React.ReactNode;\n};\n\n/**\n * Programmatically access the state of the wrapping `<Field>`. Useful for implementing animations when direct access to the state value is necessary.\n *\n * @param {Function} children - A function that receives `state`, `message`, and `codes` as an argument. `state` will is a union of `\"success\" | \"error\" | \"idle\" | \"warning\" | \"info\"`. `message` will be the corresponding message, e.g. error message. `codes` will be an array of keys that were used to generate the password validation messages. This prop is only available when the field is of type `password` and has `validatePassword` set to `true`.\n *\n * @example\n *\n * <Clerk.Field name=\"email\">\n *  <Clerk.Label>Email</Clerk.Label>\n *  <Clerk.FieldState>\n *    {({ state }) => (\n *      <Clerk.Input className={`text-${state}`} />\n *    )}\n *  </Clerk.FieldState>\n * </Clerk.Field>\n *\n * @example\n * <Clerk.Field name=\"password\">\n *  <Clerk.Label>Password</Clerk.Label>\n *  <Clerk.Input validatePassword />\n *  <Clerk.FieldState>\n *    {({ state, message, codes }) => (\n *      <pre>Field state: {state}</pre>\n *      <pre>Field msg: {message}</pre>\n *      <pre>Pwd keys: {codes.join(', ')}</pre>\n *    )}\n *  </Clerk.FieldState>\n * </Clerk.Field>\n */\nfunction FieldState({ children }: FieldStateRenderFn) {\n  const field = useFieldContext();\n  const { feedback } = useFieldFeedback({ name: field?.name });\n  const { state } = useFieldState({ name: field?.name });\n\n  const message = feedback?.message instanceof ClerkElementsFieldError ? feedback.message.message : feedback?.message;\n  const codes = feedback?.codes;\n\n  const fieldState = { state, message, codes };\n\n  return children(fieldState);\n}\n\nFieldState.displayName = FIELD_STATE_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * Input\n * -----------------------------------------------------------------------------------------------*/\n\nconst INPUT_NAME = 'ClerkElementsInput';\n\ntype PasswordInputProps = Exclude<FormControlProps, 'type'> & {\n  validatePassword?: boolean;\n};\n\ntype FormInputProps =\n  | RadixFormControlProps\n  | ({ type: 'otp'; render: OTPInputProps['render'] } & Omit<OTPInputProps, 'asChild'>)\n  | ({ type: 'otp'; render?: undefined } & OTPInputProps)\n  // Usecase: Toggle the visibility of the password input, therefore 'password' and 'text' are allowed\n  | ({ type: 'password' | 'text' } & PasswordInputProps);\n\n/**\n * Handles rendering of `<input>` elements within Clerk's flows. Supports special `type` prop values to render input types that are unique to authentication and user management flows. Additional props will be passed through to the `<input>` element.\n *\n * @param {boolean} [asChild] - If true, `<Input />` will render as its child element, passing along any necessary props.\n * @param {string} [name] - Used to target a specific field by name when rendering outside of a `<Field>` component.\n *\n * @example\n * <Clerk.Field name=\"identifier\">\n *   <Clerk.Label>Email</Clerk.Label>\n *   <Clerk.Input type=\"email\" autoComplete=\"email\" className=\"emailInput\" />\n * </Clerk.Field>\n *\n * @param {Number} [length] - The length of the OTP input. Defaults to 6.\n * @param {Number} [passwordManagerOffset] - Password managers place their icon inside an `<input />`. This default behaviour is not desirable when you use the render prop to display N distinct element. With this prop you can increase the width of the `<input />` so that the icon is rendered outside the OTP inputs.\n * @param {string} [type] - Type of control to render. Supports a special `'otp'` type for one-time password inputs. If the wrapping `<Field>` component has `name='code'`, the type will default to `'otp'`. With the `'otp'` type, the input will have a pattern and length set to 6 by default and render a single `<input />` element.\n *\n * @example\n * <Clerk.Field name=\"code\">\n *   <Clerk.Label>Email code</Clerk.Label>\n *   <Clerk.Input type=\"otp\" />\n * </Clerk.Field>\n *\n * @param {Function} [render] - Optionally, you can use a render prop that controls how each individual character is rendered. If no `render` prop is provided, a single text `<input />` will be rendered.\n *\n * @example\n * <Clerk.Field name=\"code\">\n *   <Clerk.Label>Email code</Clerk.Label>\n *   <Clerk.Input\n *     type=\"otp\"\n *     render={({ value, status }) => <span data-status={status}>{value}</span>}\n *   />\n * </Clerk.Field>\n */\nconst Input = React.forwardRef<React.ElementRef<typeof RadixControl>, FormInputProps>(\n  (props: FormInputProps, forwardedRef) => {\n    const clerk = useClerk();\n    const field = useInput(props);\n\n    const hasPasskeyAutofillProp = Boolean(field.props.autoComplete?.includes('webauthn'));\n    const allowedTypeForPasskey = (['text', 'email', 'tel'] as FormInputProps['type'][]).includes(field.props.type);\n    const signInRouterRef = SignInRouterCtx.useActorRef(true);\n\n    clerk.telemetry?.record(\n      eventComponentMounted('Elements_Input', {\n        type: props.type ?? false,\n        // @ts-expect-error - Depending on type the props can be different\n        render: Boolean(props?.render),\n        // @ts-expect-error - Depending on type the props can be different\n        asChild: Boolean(props?.asChild),\n        // @ts-expect-error - Depending on type the props can be different\n        validatePassword: Boolean(props?.validatePassword),\n      }),\n    );\n\n    if (signInRouterRef && hasPasskeyAutofillProp && allowedTypeForPasskey) {\n      return (\n        <InputWithPasskeyAutofill\n          ref={forwardedRef}\n          {...props}\n        />\n      );\n    }\n\n    if (hasPasskeyAutofillProp && !allowedTypeForPasskey) {\n      logger.warnOnce(\n        `<Input autoComplete=\"webauthn\"> can only be used with <Input type=\"text\"> or <Input type=\"email\">`,\n      );\n    } else if (hasPasskeyAutofillProp) {\n      logger.warnOnce(\n        `<Input autoComplete=\"webauthn\"> can only be used inside <SignIn> in order to trigger a sign-in attempt, otherwise it will be ignored.`,\n      );\n    }\n\n    return (\n      <field.Element\n        ref={forwardedRef}\n        {...field.props}\n      />\n    );\n  },\n);\n\nInput.displayName = INPUT_NAME;\n\nconst InputWithPasskeyAutofill = React.forwardRef<React.ElementRef<typeof RadixControl>, FormInputProps>(\n  (props: FormInputProps, forwardedRef) => {\n    const signInRouterRef = SignInRouterCtx.useActorRef(true);\n    const passkeyAutofillSupported = useSignInPasskeyAutofill();\n\n    React.useEffect(() => {\n      if (passkeyAutofillSupported) {\n        signInRouterRef?.send({ type: 'AUTHENTICATE.PASSKEY.AUTOFILL' });\n      }\n    }, [passkeyAutofillSupported, signInRouterRef]);\n\n    const field = useInput(props);\n    return (\n      <field.Element\n        ref={forwardedRef}\n        {...field.props}\n      />\n    );\n  },\n);\n\n/* -------------------------------------------------------------------------------------------------\n * Label\n * -----------------------------------------------------------------------------------------------*/\n\nconst LABEL_NAME = 'ClerkElementsLabel';\n\n/**\n * Renders a `<label>` element that is automatically associated with its sibling `<Input />` inside of a `<Field>`. Additional props will be passed through to the `<label>` element.\n *\n * @param {boolean} [asChild] - If true, `<Label />` will render as its child element, passing along any necessary props.\n *\n * @example\n * <Clerk.Field name=\"email\">\n *   <Clerk.Label>Email</Clerk.Label>\n *   <Clerk.Input />\n * </Clerk.Field>\n */\nconst Label = RadixLabel;\n\nLabel.displayName = LABEL_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * Submit\n * -----------------------------------------------------------------------------------------------*/\n\nconst SUBMIT_NAME = 'ClerkElementsSubmit';\n\ntype FormSubmitProps = SetRequired<RadixFormSubmitProps, 'children'>;\ntype FormSubmitComponent = React.ForwardRefExoticComponent<FormSubmitProps & React.RefAttributes<HTMLButtonElement>>;\n\n/**\n * A `<button type=\"submit\">` element.\n *\n * @param {boolean} [asChild] - When `true`, the component will render its child and passes all props to it.\n */\nconst Submit = RadixSubmit as FormSubmitComponent;\n\nSubmit.displayName = SUBMIT_NAME;\n\n/* -------------------------------------------------------------------------------------------------\n * GlobalError & FieldError\n * -----------------------------------------------------------------------------------------------*/\n\nconst GLOBAL_ERROR_NAME = 'ClerkElementsGlobalError';\nconst FIELD_ERROR_NAME = 'ClerkElementsFieldError';\n\ntype FormErrorRenderProps = Pick<ClerkElementsError, 'code' | 'message'>;\n\ntype FormErrorPropsAsChild = {\n  asChild?: true | never;\n  children?: React.ReactElement | ((error: FormErrorRenderProps) => React.ReactNode);\n  code?: string;\n};\n\ntype FormErrorPropsStd = {\n  asChild?: false;\n  children: React.ReactNode;\n  code: string;\n};\n\ntype FormErrorProps<T> = Omit<T, 'asChild' | 'children'> & (FormErrorPropsStd | FormErrorPropsAsChild);\n\ntype FormGlobalErrorElement = React.ElementRef<'div'>;\ntype FormGlobalErrorProps = FormErrorProps<React.ComponentPropsWithoutRef<'div'>>;\ntype FormFieldErrorElement = React.ElementRef<typeof RadixFormMessage>;\ntype FormFieldErrorProps = FormErrorProps<RadixFormMessageProps & { name?: string }>;\n\n/**\n * Used to render errors that are returned from Clerk's API, but that are not associated with a specific form field. By default, will render the error's message wrapped in a `<div>`. Optionally, the `children` prop accepts a function to completely customize rendering. Must be placed **inside** components like `<SignIn>`/`<SignUp>` to have access to the underlying form state.\n *\n * @param {string} [code] - Forces the message with the matching code to be shown. This is useful when using server-side validation.\n * @param {Function} [children] - A function that receives `message` and `code` as arguments.\n * @param {boolean} [asChild] - If `true`, `<GlobalError>` will render as its child element, passing along any necessary props.\n *\n * @example\n * <SignIn.Root>\n *   <Clerk.GlobalError />\n * </SignIn.Root>\n *\n * @example\n * <SignIn.Root>\n *   <Clerk.GlobalError code=\"user_locked\">Your custom error message.</Clerk.GlobalError>\n * </SignIn.Root>\n *\n * @example\n * <SignIn.Root>\n *   <Clerk.GlobalError>\n *     {({ message, code }) => (\n *       <span data-error-code={code}>{message}</span>\n *     )}\n *   </Clerk.GlobalError>\n * </SignIn.Root>\n */\nconst GlobalError = React.forwardRef<FormGlobalErrorElement, FormGlobalErrorProps>(\n  ({ asChild = false, children, code, ...rest }, forwardedRef) => {\n    const { errors } = useGlobalErrors();\n\n    const error = errors?.[0];\n\n    if (!error || (code && error.code !== code)) {\n      return null;\n    }\n\n    const Comp = asChild ? Slot : 'div';\n    const child = typeof children === 'function' ? children(error) : children;\n\n    if (isReactFragment(child)) {\n      throw new ClerkElementsRuntimeError('<GlobalError /> cannot render a Fragment as a child.');\n    }\n\n    return (\n      <Comp\n        role='alert'\n        {...rest}\n        ref={forwardedRef}\n      >\n        {child || error.message}\n      </Comp>\n    );\n  },\n);\n\n/**\n * FieldError renders error messages associated with a specific field. By default, the error's message will be rendered in an unstyled `<span>`. Optionally, the `children` prop accepts a function to completely customize rendering.\n *\n * @param {string} [name] - Used to target a specific field by name when rendering outside of a `<Field>` component.\n * @param {Function} [children] - A function that receives `message` and `code` as arguments.\n *\n * @example\n * <Clerk.Field name=\"email\">\n *   <Clerk.FieldError />\n * </Clerk.Field>\n *\n * @example\n * <Clerk.Field name=\"email\">\n *   <Clerk.FieldError>\n *     {({ message, code }) => (\n *       <span data-error-code={code}>{message}</span>\n *     )}\n *   </Clerk.FieldError>\n * </Clerk.Field>\n */\nconst FieldError = React.forwardRef<FormFieldErrorElement, FormFieldErrorProps>(\n  ({ asChild = false, children, code, name, ...rest }, forwardedRef) => {\n    const fieldContext = useFieldContext();\n    const fieldName = fieldContext?.name || name;\n    const { feedback } = useFieldFeedback({ name: fieldName });\n\n    if (!(feedback?.type === 'error')) {\n      return null;\n    }\n\n    const error = feedback.message;\n\n    if (!error) {\n      return null;\n    }\n\n    const Comp = asChild ? Slot : 'span';\n    const child = typeof children === 'function' ? children(error) : children;\n\n    // const forceMatch = code ? error.code === code : undefined; // TODO: Re-add when Radix Form is updated\n\n    if (isReactFragment(child)) {\n      throw new ClerkElementsRuntimeError('<FieldError /> cannot render a Fragment as a child.');\n    }\n\n    return (\n      <RadixFormMessage\n        data-error-code={error.code}\n        // forceMatch={forceMatch}\n        {...rest}\n        ref={forwardedRef}\n        asChild\n      >\n        <Comp>{child || error.message}</Comp>\n      </RadixFormMessage>\n    );\n  },\n);\n\nGlobalError.displayName = GLOBAL_ERROR_NAME;\nFieldError.displayName = FIELD_ERROR_NAME;\n\nexport { Field, FieldError, FieldState, Form, GlobalError, Input, Label, Submit };\nexport type {\n  RadixFormControlProps as FormControlProps,\n  FormErrorProps,\n  FormErrorRenderProps,\n  FormFieldErrorProps,\n  FormFieldProps,\n  FormGlobalErrorProps,\n  FormInputProps,\n  FormProps,\n  FormSubmitProps,\n};\n","export { composeEventHandlers } from './primitive';\n","function composeEventHandlers<E>(\n  originalEventHandler?: (event: E) => void,\n  ourEventHandler?: (event: E) => void,\n  { checkForDefaultPrevented = true } = {}\n) {\n  return function handleEvent(event: E) {\n    originalEventHandler?.(event);\n\n    if (checkForDefaultPrevented === false || !((event as unknown) as Event).defaultPrevented) {\n      return ourEventHandler?.(event);\n    }\n  };\n}\n\nexport { composeEventHandlers };\n","import { useClerk } from '@clerk/clerk-react';\nimport { noop } from '@clerk/shared';\nimport type { PasswordSettingsData, PasswordValidation } from '@clerk/types';\nimport * as React from 'react';\n\nimport type { ErrorMessagesKey } from '../utils/generate-password-error-text';\nimport { generatePasswordErrorText } from '../utils/generate-password-error-text';\n\n// This hook should mimic the already existing usePassword hook in the clerk-js package\n// @see packages/clerk-js/src/ui/hooks/usePassword.ts\n\ntype UsePasswordCallbacks = {\n  onValidationError?: (error: string | undefined, keys: ErrorMessagesKey[]) => void;\n  onValidationSuccess?: () => void;\n  onValidationWarning?: (warning: string, keys: string[]) => void;\n  onValidationInfo?: (info: string, keys: ErrorMessagesKey[]) => void;\n  onValidationComplexity?: (b: boolean) => void;\n};\n\nexport const usePassword = (callbacks?: UsePasswordCallbacks) => {\n  const clerk = useClerk();\n  const passwordSettings = clerk.__unstable__environment?.userSettings.passwordSettings as PasswordSettingsData;\n  const { disable_hibp, min_zxcvbn_strength, show_zxcvbn, ...config } = passwordSettings || {};\n\n  const {\n    onValidationError = noop,\n    onValidationSuccess = noop,\n    onValidationWarning = noop,\n    onValidationInfo = noop,\n    onValidationComplexity,\n  } = callbacks || {};\n\n  const onValidate = React.useCallback(\n    (res: PasswordValidation) => {\n      /**\n       * Failed complexity rules always have priority\n       */\n      if (res.complexity) {\n        if (Object.values(res?.complexity).length > 0) {\n          const { message, keys } = generatePasswordErrorText({\n            config,\n            failedValidations: res.complexity,\n          });\n\n          if (res.complexity?.min_length) {\n            return onValidationInfo(message, keys);\n          }\n\n          return onValidationError(message, keys);\n        }\n      }\n\n      /**\n       * Failed strength\n       */\n      if (res?.strength?.state === 'fail') {\n        const keys = res.strength.keys;\n        const error = keys.map(key => get(zxcvbnKeys, key)).join(' ');\n        return onValidationError(error, keys);\n      }\n\n      /**\n       * Password meets all criteria but could be stronger\n       */\n      if (res?.strength?.state === 'pass') {\n        const keys = res.strength.keys;\n        const error = keys.map(key => get(zxcvbnKeys, key)).join(' ');\n        return onValidationWarning(error, keys);\n      }\n\n      /**\n       * Password meets all criteria and is strong\n       */\n      return onValidationSuccess();\n    },\n    [callbacks],\n  );\n\n  const validatePassword = React.useMemo(() => {\n    return (password: string) => {\n      return clerk.client.signUp.validatePassword(password, {\n        onValidation: onValidate,\n        onValidationComplexity,\n      });\n    };\n  }, [onValidate]);\n\n  return {\n    validatePassword,\n  };\n};\n\nconst get = (t: Record<string, any>, path: string) => path.split('.').reduce((r, k) => r?.[k], t);\n\nconst zxcvbnKeys = {\n  unstable__errors: {\n    zxcvbn: {\n      couldBeStronger: 'Your password works, but could be stronger. Try adding more characters.',\n      goodPassword: 'Your password meets all the necessary requirements.',\n      notEnough: 'Your password is not strong enough.',\n      suggestions: {\n        allUppercase: 'Capitalize some, but not all letters.',\n        anotherWord: 'Add more words that are less common.',\n        associatedYears: 'Avoid years that are associated with you.',\n        capitalization: 'Capitalize more than the first letter.',\n        dates: 'Avoid dates and years that are associated with you.',\n        l33t: \"Avoid predictable letter substitutions like '@' for 'a'.\",\n        longerKeyboardPattern: 'Use longer keyboard patterns and change typing direction multiple times.',\n        noNeed: 'You can create strong passwords without using symbols, numbers, or uppercase letters.',\n        pwned: 'If you use this password elsewhere, you should change it.',\n        recentYears: 'Avoid recent years.',\n        repeated: 'Avoid repeated words and characters.',\n        reverseWords: 'Avoid reversed spellings of common words.',\n        sequences: 'Avoid common character sequences.',\n        useWords: 'Use multiple words, but avoid common phrases.',\n      },\n      warnings: {\n        common: 'This is a commonly used password.',\n        commonNames: 'Common names and surnames are easy to guess.',\n        dates: 'Dates are easy to guess.',\n        extendedRepeat: 'Repeated character patterns like \"abcabcabc\" are easy to guess.',\n        keyPattern: 'Short keyboard patterns are easy to guess.',\n        namesByThemselves: 'Single names or surnames are easy to guess.',\n        pwned: 'Your password was exposed by a data breach on the Internet.',\n        recentYears: 'Recent years are easy to guess.',\n        sequences: 'Common character sequences like \"abc\" are easy to guess.',\n        similarToCommon: 'This is similar to a commonly used password.',\n        simpleRepeat: 'Repeated characters like \"aaa\" are easy to guess.',\n        straightRow: 'Straight rows of keys on your keyboard are easy to guess.',\n        topHundred: 'This is a frequently used password.',\n        topTen: 'This is a heavily used password.',\n        userInputs: 'There should not be any personal or page related data.',\n        wordByItself: 'Single words are easy to guess.',\n      },\n    },\n  },\n};\n","import type { Autocomplete, PasswordSettingsData } from '@clerk/types';\n\n// Copied from packages/clerk-js/src/ui/hooks/usePasswordComplexity.ts\n\ntype ComplexityErrors = {\n  [key in keyof Partial<Omit<PasswordSettingsData, 'disable_hibp' | 'min_zxcvbn_strength' | 'show_zxcvbn'>>]?: boolean;\n};\n\nexport type ComplexityConfig = Omit<PasswordSettingsData, 'disable_hibp' | 'min_zxcvbn_strength' | 'show_zxcvbn'>;\n\nconst errorMessages: Record<keyof Omit<ComplexityErrors, 'allowed_special_characters'>, [string, string] | string> = {\n  max_length: ['less than %length% characters', 'length'],\n  min_length: ['%length% or more characters', 'length'],\n  require_numbers: 'a number',\n  require_lowercase: 'a lowercase letter',\n  require_uppercase: 'an uppercase letter',\n  require_special_char: 'a special character',\n};\n\nexport type ErrorMessagesKey = Autocomplete<keyof typeof errorMessages>;\n\nconst createListFormat = (message: string[]) => {\n  let messageWithPrefix: string;\n  if ('ListFormat' in Intl) {\n    const formatter = new Intl.ListFormat('en', { style: 'long', type: 'conjunction' });\n    messageWithPrefix = formatter.format(message);\n  } else {\n    messageWithPrefix = message.join(', ');\n  }\n\n  return messageWithPrefix;\n};\n\ntype GeneratePasswordErrorTextProps = {\n  config: ComplexityConfig;\n  failedValidations: ComplexityErrors | undefined;\n};\n\nexport const generatePasswordErrorText = ({ config, failedValidations }: GeneratePasswordErrorTextProps) => {\n  const keys: ErrorMessagesKey[] = [];\n\n  if (!failedValidations || Object.keys(failedValidations).length === 0) {\n    return {\n      keys,\n      message: '',\n    };\n  }\n\n  // show min length error first by itself\n  const hasMinLengthError = failedValidations?.min_length || false;\n\n  const messages = Object.entries(failedValidations)\n    .filter(k => (hasMinLengthError ? k[0] === 'min_length' : true))\n    .filter(([, v]) => !!v)\n    .map(([k]) => {\n      const entry = k as keyof typeof errorMessages;\n      keys.push(entry);\n      const errorKey = errorMessages[entry];\n\n      if (Array.isArray(errorKey)) {\n        const [msg, replaceValue] = errorKey;\n        return msg.replace(`%${replaceValue}%`, config[k as keyof ComplexityConfig] as string);\n      }\n      return errorKey;\n    });\n\n  const messageWithPrefix = createListFormat(messages);\n\n  return {\n    keys,\n    message: `Your password must contain ${messageWithPrefix}.`,\n  };\n};\n","import * as React from 'react';\n\nexport function isReactFragment(node: React.ReactNode) {\n  return React.isValidElement(node) && node.type === React.Fragment;\n}\n","import { Control as RadixControl } from '@radix-ui/react-form';\nimport * as React from 'react';\n\nimport type { FormControlProps } from '~/react/common/form';\n\nexport type OTPInputProps = Exclude<\n  FormControlProps,\n  'type' | 'autoComplete' | 'minLength' | 'maxLength' | 'inputMode' | 'pattern' | 'spellCheck'\n> & {\n  render?: (props: { value: string; status: OTPInputSegmentStatus; index: number }) => React.ReactNode;\n  length?: number;\n  autoSubmit?: boolean;\n  passwordManagerOffset?: number;\n};\n\ntype SelectionRange = readonly [start: number | null, end: number | null];\nconst ZERO: SelectionRange = [0, 0];\nconst OUTSIDE: SelectionRange = [-1, -1];\n\nexport const OTP_LENGTH_DEFAULT = 6;\nconst PASSWORD_MANAGER_OFFSET_DEFAULT = 40;\n\n/**\n * The status of a single segment element in the OTP input\n */\nexport type OTPInputSegmentStatus = 'none' | 'cursor' | 'selected' | 'hovered';\n\n/**\n * If the render prop is provided, a custom segmented input will be rendered. Otherwise a standard input will be rendered.\n */\nexport const OTPInput = React.forwardRef<HTMLInputElement, OTPInputProps>(function OTPInput(props, ref) {\n  const { render, length, autoSubmit, ...rest } = props;\n  const hasRenderProp = typeof render !== 'undefined';\n\n  if (hasRenderProp) {\n    return (\n      <OTPInputSegmented\n        {...rest}\n        ref={ref}\n        render={render}\n        length={length}\n        autoSubmit={autoSubmit}\n      />\n    );\n  }\n\n  return (\n    <OTPInputStandard\n      {...rest}\n      ref={ref}\n      length={length}\n      autoSubmit={autoSubmit}\n    />\n  );\n});\n\n/**\n * Standard `<input />` element that receives the same props as the OTPInput component except for the render prop.\n */\nconst OTPInputStandard = React.forwardRef<HTMLInputElement, Omit<OTPInputProps, 'render'>>(\n  function OTPInput(props, ref) {\n    const { length = OTP_LENGTH_DEFAULT, autoSubmit = false, ...rest } = props;\n\n    const innerRef = React.useRef<HTMLInputElement>(null);\n    // This ensures we can access innerRef internally while still exposing it via the ref prop\n    React.useImperativeHandle(ref, () => innerRef.current as HTMLInputElement, []);\n\n    // Fire the requestSubmit callback when the input has the required length and autoSubmit is enabled\n    React.useEffect(() => {\n      if (String(props.value).length === length && autoSubmit) {\n        innerRef.current?.form?.requestSubmit();\n      }\n    }, [props.value, length, autoSubmit]);\n\n    return (\n      <RadixControl\n        ref={innerRef}\n        {...rest}\n        data-otp-input-standard\n      />\n    );\n  },\n);\n\n/**\n * A custom input component to handle accepting OTP codes. An invisible input element is used to capture input and handle native input\n * interactions, while the provided render prop is used to visually render the input's contents.\n */\nconst OTPInputSegmented = React.forwardRef<HTMLInputElement, Required<Pick<OTPInputProps, 'render'>> & OTPInputProps>(\n  function OTPInput(props, ref) {\n    const {\n      className: userProvidedClassName,\n      render,\n      length = OTP_LENGTH_DEFAULT,\n      autoSubmit = false,\n      passwordManagerOffset = PASSWORD_MANAGER_OFFSET_DEFAULT,\n      ...rest\n    } = props;\n\n    const innerRef = React.useRef<HTMLInputElement>(null);\n    const [selectionRange, setSelectionRange] = React.useState<SelectionRange>(props.autoFocus ? ZERO : OUTSIDE);\n    const [isHovering, setIsHovering] = React.useState(false);\n\n    const isFocused = () => document.activeElement === innerRef.current;\n\n    // This ensures we can access innerRef internally while still exposing it via the ref prop\n    React.useImperativeHandle(ref, () => innerRef.current as HTMLInputElement, []);\n\n    /**\n     * A layout effect is used here to avoid any perceived visual lag when changing the selection\n     * This effect ensures that when deleting characters from the input the selection is updated\n     */\n    React.useLayoutEffect(() => {\n      if (document.activeElement !== innerRef.current) {\n        return;\n      }\n      setSelectionRange(cur => selectionRangeUpdater(cur, innerRef));\n    }, [props.value]);\n\n    /**\n     * Attach a selectionchange handler on the document during the capture phase to the selection range is updated\n     * immediately.\n     *\n     * One concrete example, if using onSelect on the input, the handler wouldn't fire when pressing cmd + left/right arrow.\n     */\n    React.useEffect(() => {\n      function onSelectionChange() {\n        if (!isFocused()) {\n          return;\n        }\n        setSelectionRange(cur => selectionRangeUpdater(cur, innerRef));\n      }\n\n      document.addEventListener('selectionchange', onSelectionChange, { capture: true });\n      return () => document.removeEventListener('selectionchange', onSelectionChange);\n    }, []);\n\n    // Fire the requestSubmit callback when the input has the required length and autoSubmit is enabled\n    React.useEffect(() => {\n      if (String(props.value).length === length && autoSubmit) {\n        innerRef.current?.form?.requestSubmit();\n      }\n    }, [props.value, length, autoSubmit]);\n\n    return (\n      <div\n        data-otp-input-wrapper\n        style={wrapperStyle}\n      >\n        {/* We can't target pseudo-elements with the style prop, so we inject a tag here */}\n        <style>{`\n      input[data-otp-input-segmented]::selection {\n        color: transparent;\n        background-color: transparent;\n      }\n      `}</style>\n        <RadixControl\n          data-otp-input-segmented\n          ref={innerRef}\n          {...rest}\n          onFocus={event => {\n            // Place the caret at the end of the current value\n            if (innerRef.current) {\n              const start = Math.min(innerRef.current.value.length, length - 1);\n              const end = innerRef.current.value.length;\n              innerRef.current.setSelectionRange(start, end);\n              setSelectionRange([start, end]);\n            }\n            rest?.onFocus?.(event);\n          }}\n          onBlur={event => {\n            setSelectionRange([-1, -1]);\n            rest?.onBlur?.(event);\n          }}\n          onMouseOver={event => {\n            if (!isFocused()) {\n              setIsHovering(true);\n            }\n            props.onMouseOver?.(event);\n          }}\n          onMouseLeave={event => {\n            setIsHovering(false);\n            props.onMouseLeave?.(event);\n          }}\n          style={{\n            ...inputStyle,\n            clipPath: `inset(0 calc(1ch + ${passwordManagerOffset}px) 0 0)`,\n            width: `calc(100% + 1ch + ${passwordManagerOffset}px)`,\n          }}\n        />\n        <div\n          className={userProvidedClassName}\n          aria-hidden\n          style={segmentWrapperStyle}\n        >\n          {Array.from({ length }).map((_, i) => {\n            const isHovered = isHovering && !isFocused();\n            const isCursor = selectionRange[0] === selectionRange[1] && selectionRange[0] === i;\n            const isSelected = (selectionRange[0] ?? -1) <= i && (selectionRange[1] ?? -1) > i;\n\n            return (\n              <React.Fragment key={`otp-segment-${i}`}>\n                {render({\n                  value: String(props.value)[i] || '',\n                  status: isHovered ? 'hovered' : isCursor ? 'cursor' : isSelected ? 'selected' : 'none',\n                  index: i,\n                })}\n              </React.Fragment>\n            );\n          })}\n        </div>\n      </div>\n    );\n  },\n);\n\n/**\n * Handle updating the input selection range to ensure a single character is selected when moving the cursor, or if the input value changes.\n */\nfunction selectionRangeUpdater(cur: SelectionRange, inputRef: React.RefObject<HTMLInputElement>) {\n  let updated: [number, number, HTMLInputElement['selectionDirection']] = [\n    inputRef.current?.selectionStart ?? 0,\n    inputRef.current?.selectionEnd ?? 0,\n    inputRef.current?.selectionDirection ?? null,\n  ];\n\n  // Abort unnecessary updates\n  if (cur[0] === updated[0] && cur[1] === updated[1]) {\n    return cur;\n  }\n\n  // ensures that forward selection works properly when landing on the first character\n  if (updated[0] === 0 && updated[1] === 1) {\n    updated[2] = 'forward';\n  }\n\n  // When moving the selection, we want to select either the previous or next character instead of only moving the cursor.\n  // If the start and end indices are the same, it means only the cursor has moved and we need to make a decision on which character to select.\n  if (updated[0] === updated[1]) {\n    if (updated[0] > 0 && cur[0] === updated[0] && cur[1] === updated[0] + 1) {\n      updated = [updated[0] - 1, updated[1], 'backward'];\n    } else if (typeof inputRef.current?.value[updated[0]] !== 'undefined') {\n      updated = [updated[0], updated[1] + 1, 'backward'];\n    } else if (updated[0] >= OTP_LENGTH_DEFAULT) {\n      updated = [updated[0] - 1, updated[1], 'backward'];\n    }\n  }\n\n  inputRef.current?.setSelectionRange(updated[0], updated[1], updated[2] ?? undefined);\n\n  return [updated[0], updated[1]] satisfies SelectionRange;\n}\n\nconst wrapperStyle = {\n  position: 'relative',\n  userSelect: 'none',\n} satisfies React.CSSProperties;\n\nconst inputStyle = {\n  display: 'block',\n  background: 'transparent',\n  opacity: 1,\n  outline: 'transparent solid 0px',\n  appearance: 'none',\n  color: 'transparent',\n  position: 'absolute',\n  inset: 0,\n  caretColor: 'transparent',\n  border: '0 px solid transparent',\n  // width is handled inline\n  height: '100%',\n  letterSpacing: '-1rem',\n} satisfies React.CSSProperties;\n\nconst segmentWrapperStyle = {\n  zIndex: 1,\n  pointerEvents: 'none',\n} satisfies React.CSSProperties;\n","import type { HTMLInputTypeAttribute } from 'react';\n\n/** Extracted relevant fields from @clerk/types  */\nexport type ClerkFieldId =\n  | 'code'\n  | 'confirmPassword'\n  | 'currentPassword'\n  | 'emailAddress'\n  | 'firstName'\n  | 'identifier'\n  | 'lastName'\n  | 'name'\n  | 'newPassword'\n  | 'password'\n  | 'phoneNumber'\n  | 'username';\n\n/**\n * Possible types for the Clerk input element, several 'special' input types are included.\n */\nexport type ClerkInputType = HTMLInputTypeAttribute | 'otp';\n\nexport const FIELD_STATES = {\n  success: 'success',\n  error: 'error',\n  idle: 'idle',\n  warning: 'warning',\n  info: 'info',\n} as const;\n\nexport type FieldStates = (typeof FIELD_STATES)[keyof typeof FIELD_STATES];\n\nexport const FIELD_VALIDITY = {\n  valid: 'valid',\n  invalid: 'invalid',\n} as const;\n\nexport type FieldValidity = (typeof FIELD_VALIDITY)[keyof typeof FIELD_VALIDITY];\n","import { useRouter } from 'next/compat/router';\nimport { useParams, usePathname } from 'next/navigation';\nimport React from 'react';\n\nimport { removeOptionalCatchAllSegment } from './utils';\n\n// Adapted from packages/nextjs/src/client-boundary/hooks/usePathnameWithoutCatchAll.tsx\n\n/**\n * This hook grabs the current pathname (both in pages and app router) and removes any (optional) catch all segments.\n * @example\n * 1. /user/[id]/profile/[[...rest]]/page.tsx\n * 2. /user/123/profile/security\n * 3. /user/123/profile\n * @returns The pathname without any catch all segments\n */\nexport const usePathnameWithoutCatchAll = () => {\n  const pathRef = React.useRef<string>();\n\n  /**\n   * The compat version of useRouter returns null instead of throwing an error when used inside App router.\n   * Use it to detect if the component is used inside pages or app router\n   */\n  const pagesRouter = useRouter();\n\n  if (pagesRouter) {\n    if (pathRef.current) {\n      return pathRef.current;\n    } else {\n      // The optional catch all route is included in the pathname in pages router. It starts with [[... and we can just remove it\n      pathRef.current = removeOptionalCatchAllSegment(pagesRouter.pathname);\n      return pathRef.current;\n    }\n  }\n\n  /**\n   * Get the pathname that includes any named or catch all params.\n   * @example\n   * /user/[id]/profile/[[...rest]]/page.tsx\n   *\n   * This filesystem route could give us the following pathname:\n   * /user/123/profile/security\n   * if the user navigates to the security section of the user profile\n   */\n  const pathname = usePathname() || '';\n  const pathParts = pathname.split('/').filter(Boolean);\n  /**\n   * For /user/[id]/profile/[[...rest]]/page.tsx useParams will return { id: '123', rest: ['security'] }.\n   * So catch all params are always arrays\n   */\n  const catchAllParams = Object.values(useParams() || {})\n    .filter(v => Array.isArray(v))\n    .flat(Infinity);\n  if (pathRef.current) {\n    return pathRef.current;\n  } else {\n    // /user/123/profile/security should be transformed to /user/123/profile\n    pathRef.current = `/${pathParts.slice(0, pathParts.length - catchAllParams.length).join('/')}`;\n    return pathRef.current;\n  }\n};\n","export function removeOptionalCatchAllSegment(pathname: string) {\n  return pathname.replace(/\\/\\[\\[\\.\\.\\..*/, '');\n}\n","import { useClerk } from '@clerk/clerk-react';\nimport { eventComponentMounted } from '@clerk/shared/telemetry';\n\nimport { ClerkElementsRuntimeError } from '~/internals/errors';\n\nimport type { SignInChooseStrategyProps } from './choose-strategy';\nimport { SignInChooseStrategy, SignInForgotPassword } from './choose-strategy';\nimport type { SignInResetPasswordProps } from './reset-password';\nimport { SignInResetPassword } from './reset-password';\nimport type { SignInStartProps } from './start';\nimport { SignInStart } from './start';\nimport type { SignInVerificationsProps } from './verifications';\nimport { SignInVerifications } from './verifications';\n\nexport const SIGN_IN_STEPS = {\n  start: 'start',\n  verifications: 'verifications',\n  'choose-strategy': 'choose-strategy',\n  'forgot-password': 'forgot-password',\n  'reset-password': 'reset-password',\n} as const;\n\nexport type TSignInStep = (typeof SIGN_IN_STEPS)[keyof typeof SIGN_IN_STEPS];\ntype StepWithProps<N extends TSignInStep, T> = { name: N } & T;\n\nexport type SignInStepProps =\n  | StepWithProps<'start', SignInStartProps>\n  | StepWithProps<'verifications', SignInVerificationsProps>\n  | StepWithProps<'choose-strategy' | 'forgot-password', SignInChooseStrategyProps>\n  | StepWithProps<'reset-password', SignInResetPasswordProps>;\n\n/**\n * Render different steps of the sign-in flow. Initially the `'start'` step is rendered. Once a sign-in attempt has been created, `'verifications'` will be displayed. If during that verification step the user decides to choose a different method of signing in or verifying, the `'choose-strategy'` step will be displayed.\n *\n * You typically want to place fields like username, password, or social providers in the `'start'` step. The `'verifications'` step is used to verify the user's credentials like password or MFA. Once the user has been verified, the sign-in attempt will be completed.\n *\n * @param {string} name - Step name. Use `'start'`, `'verifications'`, `'choose-strategy'`, `'reset-password'`, or `'forgot-password'`.\n *\n * @example\n * <SignIn.Root>\n *  <SignIn.Step name='start' />\n *  <SignIn.Step name='verifications' />\n *  <SignIn.Step name='choose-strategy' />\n *  <SignIn.Step name='forgot-password' />\n *  <SignIn.Step name='reset-password' />\n * </SignIn.Root>\n */\nexport function SignInStep(props: SignInStepProps) {\n  const clerk = useClerk();\n\n  clerk.telemetry?.record(eventComponentMounted('Elements_SignInStep', { name: props.name }));\n\n  switch (props.name) {\n    case SIGN_IN_STEPS['start']:\n      return <SignInStart {...props} />;\n    case SIGN_IN_STEPS['verifications']:\n      return <SignInVerifications {...props} />;\n    case SIGN_IN_STEPS['choose-strategy']:\n      return <SignInChooseStrategy {...props} />;\n    case SIGN_IN_STEPS['forgot-password']:\n      return <SignInForgotPassword {...props} />;\n    case SIGN_IN_STEPS['reset-password']:\n      return <SignInResetPassword {...props} />;\n    default:\n      throw new ClerkElementsRuntimeError(`Invalid step name. Use: ${Object.keys(SIGN_IN_STEPS).join(',')}.`);\n  }\n}\n","import type { SignInFactor, SignInFirstFactor, SignInStrategy as TSignInStrategy } from '@clerk/types';\nimport { Slot } from '@radix-ui/react-slot';\nimport { useSelector } from '@xstate/react';\nimport * as React from 'react';\nimport type { ActorRefFrom } from 'xstate';\n\nimport type { TSignInFirstFactorMachine } from '~/internals/machines/sign-in';\nimport { SignInRouterSystemId } from '~/internals/machines/sign-in';\n\nimport { useActiveTags } from '../hooks';\nimport { ActiveTagsMode } from '../hooks/use-active-tags.hook';\nimport { createContextForDomValidation } from '../utils/create-context-for-dom-validation';\nimport { SignInRouterCtx } from './context';\n\n// --------------------------------- HELPERS ---------------------------------\n\nconst localStrategies: Set<TSignInStrategy> = new Set(['email_code', 'password', 'phone_code', 'email_link']);\nconst resetPasswordStrategies: Set<TSignInStrategy> = new Set([\n  'reset_password_phone_code',\n  'reset_password_email_code',\n]);\n\nexport function isResetPasswordStrategy(strategy: TSignInStrategy | null | undefined): boolean {\n  if (!strategy) {\n    return false;\n  }\n  return resetPasswordStrategies.has(strategy as TSignInStrategy);\n}\n\nexport function factorHasLocalStrategy(factor: SignInFactor | undefined | null): boolean {\n  if (!factor) {\n    return false;\n  }\n  return localStrategies.has(factor.strategy);\n}\n\n// --------------------------------- COMPONENTS ---------------------------------\n\nexport type SignInChooseStrategyProps = React.HTMLAttributes<HTMLDivElement>;\nexport type SignInForgotPasswordProps = React.HTMLAttributes<HTMLDivElement>;\n\nexport const SignInChooseStrategyCtx = createContextForDomValidation('SignInChooseStrategyCtx');\n\nexport function SignInChooseStrategy({ children, ...props }: SignInChooseStrategyProps) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, ['route:first-factor', 'route:choose-strategy'], ActiveTagsMode.all);\n\n  return activeState ? (\n    <SignInChooseStrategyCtx.Provider>\n      <div {...props}>{children}</div>\n    </SignInChooseStrategyCtx.Provider>\n  ) : null;\n}\n\nexport function SignInForgotPassword({ children, ...props }: SignInForgotPasswordProps) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, ['route:first-factor', 'route:forgot-password'], ActiveTagsMode.all);\n\n  return activeState ? (\n    <SignInChooseStrategyCtx.Provider>\n      <div {...props}>{children}</div>\n    </SignInChooseStrategyCtx.Provider>\n  ) : null;\n}\n\nconst SUPPORTED_STRATEGY_NAME = 'SignInSupportedStrategy';\n\nexport type SignInSupportedStrategyElement = React.ElementRef<'button'>;\nexport type SignInSupportedStrategyProps = {\n  asChild?: boolean;\n  name: Exclude<SignInFirstFactor['strategy'], `oauth_${string}` | 'saml'>;\n  children: React.ReactNode;\n};\n\n/**\n * By default, renders a button which will trigger a change in the chosen sign-in strategy. It **must** be used within a `<Step name='choose-strategy'>` component.\n *\n * @description This component will only render its contents if the chosen strategy is enabled (in the Clerk dashboard) and if it's not the current strategy.\n *\n * @param name - Define a strategy to be used.\n * @param {boolean} [asChild] - When `true`, the component will render its child and passes all props to it.\n *\n * @example\n * <SignIn.Step name='choose-strategy'>\n *   <SignIn.SupportedStrategy name='password'>\n *     Sign in with password\n *   </SignIn.SupportedStrategy>\n * </SignIn.Step>\n */\nexport const SignInSupportedStrategy = React.forwardRef<SignInSupportedStrategyElement, SignInSupportedStrategyProps>(\n  ({ asChild, children, name, ...rest }, forwardedRef) => {\n    const routerRef = SignInRouterCtx.useActorRef();\n    const snapshot = routerRef.getSnapshot();\n\n    const supportedFirstFactors = snapshot.context.clerk.client.signIn.supportedFirstFactors;\n    const factor = supportedFirstFactors.find(factor => name === factor.strategy);\n\n    const currentFirstFactor = useSelector(\n      snapshot.children[SignInRouterSystemId.firstFactor] as unknown as ActorRefFrom<TSignInFirstFactorMachine>,\n      state => state?.context.currentFactor?.strategy,\n    );\n\n    const sendUpdateStrategyEvent = React.useCallback(\n      () => routerRef.send({ type: 'STRATEGY.UPDATE', factor }),\n      [routerRef, factor],\n    );\n\n    // Don't render if the current factor is the same as the one we're trying to render\n    if (currentFirstFactor === name) {\n      return null;\n    }\n\n    const Comp = asChild ? Slot : 'button';\n    const defaultProps = asChild ? {} : { type: 'button' as const };\n\n    return factor ? (\n      <Comp\n        {...defaultProps}\n        {...rest}\n        ref={forwardedRef}\n        onClick={sendUpdateStrategyEvent}\n      >\n        {children || factor.strategy}\n      </Comp>\n    ) : null;\n  },\n);\n\nSignInSupportedStrategy.displayName = SUPPORTED_STRATEGY_NAME;\n","import { useSelector } from '@xstate/react';\nimport type { ActorRef, AnyActorRef, AnyMachineSnapshot, MachineSnapshot } from 'xstate';\n\ntype TaggedActor<TActor extends AnyActorRef> =\n  TActor extends ActorRef<MachineSnapshot<any, any, any, any, infer TTags, any, any>, any> ? TTags : never;\n\nexport const ActiveTagsMode = {\n  any: 'any',\n  all: 'all',\n} as const;\n\nexport type UseActiveTagsMode = (typeof ActiveTagsMode)[keyof typeof ActiveTagsMode];\nexport type UseActiveTagsSingleReturn = boolean;\nexport type UseActiveTagsMultiAnyReturn<TTag> = { active: boolean; activeTags: Set<TTag> };\nexport type UseActiveTagsReturn<TTag> = UseActiveTagsSingleReturn | UseActiveTagsMultiAnyReturn<TTag>;\n\n/**\n * Generic hook to check if a tag is active.\n *\n * @example\n * const ref = SignUpCtx.useActorRef();\n *\n * useActiveTags(ref, 'external');\n * useActiveTags(ref, ['external', 'email_code']);\n * useActiveTags(ref, ['external', 'email_code'], 'all');\n *\n * @param actor {ActorRef} Machine actor reference\n * @param tag {(string | string[])} The tag(s) to check\n * @param mode {UseActiveTagsMode} Whether to match all tags or any tag\n *\n * @returns {(boolean|UseActiveTagsReturn)} Whether the tag(s) are active\n */\nexport function useActiveTags<TActor extends AnyActorRef, TTag extends TaggedActor<TActor>>(\n  actor: TActor,\n  tag: TTag,\n): boolean;\nexport function useActiveTags<TActor extends AnyActorRef, TTag extends TaggedActor<TActor>>(\n  actor: TActor,\n  tags: TTag[],\n  mode: 'all',\n): boolean;\nexport function useActiveTags<TActor extends AnyActorRef, TTag extends TaggedActor<TActor>>(\n  actor: TActor,\n  tags: TTag[],\n  mode?: 'any',\n): UseActiveTagsMultiAnyReturn<TTag>;\nexport function useActiveTags<TActor extends AnyActorRef, TTag extends TaggedActor<TActor>>(\n  actor: TActor,\n  tags: TTag | TTag[],\n  mode: UseActiveTagsMode = ActiveTagsMode.any,\n): UseActiveTagsReturn<TTag> {\n  const state = useSelector<TActor, AnyMachineSnapshot>(\n    actor,\n    s => s,\n    (prev, next) => prev.tags === next.tags,\n  );\n\n  if (typeof tags === 'string') {\n    return state.hasTag(tags);\n  }\n\n  if (!Array.isArray(tags)) {\n    throw new Error('Invalid tags parameter provided to useActiveTags');\n  }\n\n  switch (mode) {\n    case ActiveTagsMode.any: {\n      const matching = new Set(tags.filter(tag => state.hasTag(tag)));\n      return { active: matching.size > 0, activeTags: matching };\n    }\n    case ActiveTagsMode.all:\n      return tags.length === state.tags.size ? tags.every(tag => state.hasTag(tag)) : false;\n    default:\n      return false;\n  }\n}\n","import * as React from 'react';\n\n/**\n * Use this context helper to detect whether a component has a particular parent higher up in the DOM or not.\n */\nexport function createContextForDomValidation(displayName: string) {\n  const ReactContext = React.createContext(false);\n  const OriginalProvider = ReactContext.Provider;\n\n  function Provider({ children }: { children: React.ReactNode }) {\n    return React.createElement(\n      OriginalProvider,\n      {\n        value: true,\n      },\n      children,\n    );\n  }\n\n  Provider.displayName = displayName;\n\n  function useContext(allowMissingContext: boolean = false) {\n    const context = React.useContext(ReactContext);\n\n    if (!allowMissingContext && !context) {\n      throw new Error(\n        `You used a hook from \"${Provider.displayName}\" but it's not inside a <${Provider.displayName}.Provider> component.`,\n      );\n    }\n\n    return context;\n  }\n\n  return {\n    Provider,\n    useDomValidation: useContext,\n  };\n}\n","import type { TSignInResetPasswordMachine } from '~/internals/machines/sign-in';\nimport type { FormProps } from '~/react/common/form';\nimport { Form } from '~/react/common/form';\nimport { useActiveTags } from '~/react/hooks';\nimport { SignInRouterCtx, useSignInResetPasswordStep } from '~/react/sign-in/context';\nimport { createContextFromActorRef } from '~/react/utils/create-context-from-actor-ref';\n\nexport type SignInResetPasswordProps = FormProps;\n\nexport const SignInResetPasswordCtx = createContextFromActorRef<TSignInResetPasswordMachine>('SignInResetPasswordCtx');\n\nexport function SignInResetPassword(props: SignInResetPasswordProps) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, 'route:reset-password');\n\n  return activeState ? <SignInResetPasswordInner {...props} /> : null;\n}\n\nfunction SignInResetPasswordInner(props: SignInResetPasswordProps) {\n  const ref = useSignInResetPasswordStep();\n\n  if (!ref) {\n    return null;\n  }\n\n  return (\n    <SignInResetPasswordCtx.Provider actorRef={ref}>\n      <Form\n        flowActor={ref}\n        {...props}\n      />\n    </SignInResetPasswordCtx.Provider>\n  );\n}\n","import type { TSignInStartMachine } from '~/internals/machines/sign-in';\nimport type { FormProps } from '~/react/common/form';\nimport { Form } from '~/react/common/form';\nimport { useActiveTags } from '~/react/hooks';\nimport { SignInRouterCtx, useSignInStartStep } from '~/react/sign-in/context';\nimport { createContextFromActorRef } from '~/react/utils/create-context-from-actor-ref';\n\nexport type SignInStartProps = FormProps;\n\nexport const SignInStartCtx = createContextFromActorRef<TSignInStartMachine>('SignInStartCtx');\n\nexport function SignInStart(props: SignInStartProps) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, 'route:start');\n\n  return activeState ? <SignInStartInner {...props} /> : null;\n}\n\nfunction SignInStartInner(props: SignInStartProps) {\n  const ref = useSignInStartStep();\n\n  if (!ref) {\n    return null;\n  }\n\n  return (\n    <SignInStartCtx.Provider actorRef={ref}>\n      <Form\n        flowActor={ref}\n        {...props}\n      />\n    </SignInStartCtx.Provider>\n  );\n}\n","import type { SignInFactor, SignInStrategy as ClerkSignInStrategy } from '@clerk/types';\nimport { useSelector } from '@xstate/react';\nimport { useCallback, useEffect } from 'react';\nimport type { ActorRefFrom, SnapshotFrom } from 'xstate';\n\nimport type { SignInStrategyName } from '~/internals/machines/shared';\nimport type { TSignInFirstFactorMachine, TSignInSecondFactorMachine } from '~/internals/machines/sign-in';\nimport { matchStrategy } from '~/internals/machines/utils/strategies';\nimport type { FormProps } from '~/react/common/form';\nimport { Form } from '~/react/common/form';\nimport { useActiveTags } from '~/react/hooks';\nimport {\n  SignInRouterCtx,\n  StrategiesContext,\n  useSignInFirstFactorStep,\n  useSignInSecondFactorStep,\n  useStrategy,\n} from '~/react/sign-in/context';\nimport { createContextFromActorRef } from '~/react/utils/create-context-from-actor-ref';\n\nexport type SignInVerificationsProps = { preferred?: ClerkSignInStrategy } & FormProps;\n\nexport const SignInFirstFactorCtx = createContextFromActorRef<TSignInFirstFactorMachine>('SignInFirstFactorCtx');\nexport const SignInSecondFactorCtx = createContextFromActorRef<TSignInSecondFactorMachine>('SignInSecondFactorCtx');\n\nconst strategiesSelector = (state: SnapshotFrom<TSignInFirstFactorMachine | TSignInSecondFactorMachine>) =>\n  state.context.currentFactor?.strategy;\n\nfunction SignInStrategiesProvider({\n  children,\n  preferred,\n  actorRef,\n  ...props\n}: SignInVerificationsProps & { actorRef: ActorRefFrom<TSignInFirstFactorMachine | TSignInSecondFactorMachine> }) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const current = useSelector(actorRef, strategiesSelector);\n  const isChoosingAltStrategy = useActiveTags(routerRef, ['route:choose-strategy', 'route:forgot-password']);\n  const isActive = useCallback((name: string) => (current ? matchStrategy(current, name) : false), [current]);\n\n  return (\n    <StrategiesContext.Provider value={{ current: current, preferred, isActive }}>\n      {isChoosingAltStrategy.active ? null : (\n        <Form\n          flowActor={actorRef}\n          {...props}\n        >\n          {children}\n        </Form>\n      )}\n    </StrategiesContext.Provider>\n  );\n}\n\nexport type SignInStrategyProps = { name: SignInStrategyName; children: React.ReactNode };\n\nfunction useFactorCtx() {\n  const firstFactorRef = SignInFirstFactorCtx.useActorRef(true);\n  const secondFactorRef = SignInSecondFactorCtx.useActorRef(true);\n\n  return firstFactorRef || secondFactorRef;\n}\n\n/**\n * Generic component to handle both first and second factor verifications.\n *\n * @param {string} name - The name of the strategy for which its children will be rendered.\n *\n * @example\n * <SignIn.Step name=\"verifications\">\n *   <SignIn.Strategy name=\"password\">...</SignIn.Strategy>\n * </SignIn.Step>\n */\nexport function SignInStrategy({ children, name }: SignInStrategyProps) {\n  const { active } = useStrategy(name);\n  const factorCtx = useFactorCtx();\n\n  useEffect(() => {\n    if (factorCtx) {\n      factorCtx.send({ type: 'STRATEGY.REGISTER', factor: name as unknown as SignInFactor });\n    }\n\n    return () => {\n      if (factorCtx?.getSnapshot().status === 'active') {\n        factorCtx.send({ type: 'STRATEGY.UNREGISTER', factor: name as unknown as SignInFactor });\n      }\n    };\n  }, [factorCtx, name]);\n\n  return active ? <>{children}</> : null;\n}\n\n/**\n * Generic component to handle both first and second factor verifications.\n *\n * @example\n * <Step name=\"verifications\">...</Step>\n */\nexport function SignInVerifications(props: SignInVerificationsProps) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const { activeTags: activeRoutes } = useActiveTags(routerRef, ['route:first-factor', 'route:second-factor']);\n\n  if (activeRoutes.has('route:first-factor')) {\n    return <SignInFirstFactorInner {...props} />;\n  }\n\n  if (activeRoutes.has('route:second-factor')) {\n    return <SignInSecondFactorInner {...props} />;\n  }\n\n  return null;\n}\n\n/**\n * Component to handle specifically first factor verifications.\n * Generally, you should use the <SignInVerifications> component instead via <Step name=\"verifications\">.\n *\n * @example\n * <FirstFactor>...</FirstFactor>\n */\nexport function SignInFirstFactor(props: SignInVerificationsProps) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, 'route:first-factor');\n\n  return activeState ? <SignInFirstFactorInner {...props} /> : null;\n}\n\n/**\n * Component to handle specifically second factor verifications.\n * Generally, you should use the <SignInVerifications> component instead via <Step name=\"verifications\">.\n *\n * @example\n * <SecondFactor>...</SecondFactor>\n */\nexport function SignInSecondFactor(props: SignInVerificationsProps) {\n  const routerRef = SignInRouterCtx.useActorRef();\n  const activeState = useActiveTags(routerRef, 'route:second-factor');\n\n  return activeState ? <SignInSecondFactorInner {...props} /> : null;\n}\n\nexport function SignInFirstFactorInner(props: SignInVerificationsProps) {\n  const ref = useSignInFirstFactorStep();\n\n  if (!ref) {\n    return null;\n  }\n\n  return ref ? (\n    <SignInFirstFactorCtx.Provider actorRef={ref}>\n      <SignInStrategiesProvider\n        actorRef={ref}\n        {...props}\n      />\n    </SignInFirstFactorCtx.Provider>\n  ) : null;\n}\n\nexport function SignInSecondFactorInner(props: SignInVerificationsProps) {\n  const ref = useSignInSecondFactorStep();\n\n  if (!ref) {\n    return null;\n  }\n\n  return ref ? (\n    <SignInSecondFactorCtx.Provider actorRef={ref}>\n      <SignInStrategiesProvider\n        actorRef={ref}\n        {...props}\n      />\n    </SignInSecondFactorCtx.Provider>\n  ) : null;\n}\n\nexport type SignInVerificationResendableRenderProps = {\n  resendable: boolean;\n  resendableAfter: number;\n};\n\nexport type SignInVerificationResendableProps = {\n  children: (props: SignInVerificationResendableRenderProps) => React.ReactNode;\n};\n","export const matchStrategy = (current: string | undefined, desired: string | undefined): boolean => {\n  if (!current || !desired) {\n    return false;\n  }\n\n  if (current === desired) {\n    return true;\n  }\n\n  return current.startsWith(`${desired}_`);\n};\n","import * as React from 'react';\n\nimport type { FormSubmitProps } from '~/react/common';\nimport { Submit } from '~/react/common';\n\nimport type { SignInNavigateElementKey, SignInNavigateProps } from './navigate';\nimport { SignInNavigate } from './navigate';\nimport type { SignInResendProps } from './resend';\nimport { SignInResend } from './resend';\n\nexport type SignInActionProps = { asChild?: boolean } & FormSubmitProps &\n  (\n    | ({\n        navigate: SignInNavigateProps['to'];\n        resend?: never;\n        submit?: never;\n      } & Omit<SignInNavigateProps, 'to'>)\n    | { navigate?: never; resend?: never; submit: true }\n    | ({ navigate?: never; resend: true; submit?: never } & SignInResendProps)\n  );\n\nexport type SignInActionCompProps = React.ForwardRefExoticComponent<\n  Exclude<SignInActionProps, 'navigate'> & {\n    to: SignInNavigateElementKey;\n  } & React.RefAttributes<HTMLButtonElement>\n>;\n\nconst SIGN_IN_ACTION_NAME = 'SignInAction';\n\n/**\n * Perform various actions during the sign-in process. This component is used to navigate between steps, submit the form, or resend a verification codes.\n *\n * @param {boolean} [submit] - If `true`, the action will submit the form.\n * @param {string} [navigate] - The name of the step to navigate to.\n * @param {boolean} [resend] - If `true`, the action will resend the verification code for the currently active strategy, if applicable.\n * @param {Function} [fallback] - Only used when `resend` is `true`. If provided, the fallback markup will be rendered before the resend delay has expired.\n *\n * @example\n * <SignIn.Action navigate=\"start\">Go Back</SignIn.Action>\n *\n * @example\n * <SignIn.Action submit>Sign In</SignIn.Action>\n *\n * @example\n * <SignIn.Action resend>Resend</SignIn.Action>\n */\nexport const SignInAction = React.forwardRef<React.ElementRef<'button'>, SignInActionProps>((props, forwardedRef) => {\n  const { submit, navigate, resend, ...rest } = props;\n  let Comp: React.ForwardRefExoticComponent<any> | undefined;\n\n  if (submit) {\n    Comp = Submit;\n  } else if (navigate) {\n    Comp = SignInNavigate;\n  } else if (resend) {\n    Comp = SignInResend;\n  }\n\n  return Comp ? (\n    <Comp\n      to={navigate}\n      {...rest}\n      ref={forwardedRef}\n    />\n  ) : null;\n});\n\nSignInAction.displayName = SIGN_IN_ACTION_NAME;\n","// Mark as a client-only package. This will error if you try to import it in a React Server Component.\nimport 'client-only';\n\nexport { Field, FieldError, FieldState, GlobalError, Input, Label, Submit } from '~/react/common/form';\nexport { Connection, Icon } from '~/react/common/connections';\nexport { Loading } from '~/react/common/loading';\n\nexport type {\n  FormFieldErrorProps,\n  FormErrorProps,\n  FormErrorRenderProps,\n  FormFieldProps,\n  FormGlobalErrorProps,\n  FormInputProps,\n  FormProps,\n  FormSubmitProps,\n} from '~/react/common/form';\nexport type { ConnectionProps, IconProps } from '~/react/common/connections';\nexport type { OTPInputSegmentStatus } from '~/react/common/form/otp';\n","import { Slot } from '@radix-ui/react-slot';\nimport * as React from 'react';\n\nimport { SignInRouterCtx } from '~/react/sign-in/context';\n\nconst SIGN_IN_NAVIGATE_NAME = 'SignInNavigate';\nconst SignInNavigationEventMap = {\n  start: `NAVIGATE.START`,\n  previous: `NAVIGATE.PREVIOUS`,\n  'choose-strategy': `NAVIGATE.CHOOSE_STRATEGY`,\n  'forgot-password': `NAVIGATE.FORGOT_PASSWORD`,\n} as const;\n\nexport type SignInNavigateElementKey = keyof typeof SignInNavigationEventMap;\n\nexport type SignInNavigateElement = React.ElementRef<'button'>;\nexport type SignInNavigateProps = {\n  asChild?: boolean;\n  to: SignInNavigateElementKey;\n  children: React.ReactNode;\n};\n\n/**\n * Renders a button which will navigate to a different step in the sign-in flow.\n *\n * @param {SignInNavigateElementKey} to - The step to navigate to.\n * @param {boolean} [asChild] - When `true`, the component will render its child and passes all props to it.\n *\n * @example\n * <Navigate to=\"choose-strategy\">\n *    Choose a different sign-in method...\n * </Navigate>\n */\nexport const SignInNavigate = React.forwardRef<SignInNavigateElement, SignInNavigateProps>(\n  ({ asChild, to, ...rest }, forwardedRef) => {\n    const actorRef = SignInRouterCtx.useActorRef();\n\n    const Comp = asChild ? Slot : 'button';\n    const defaultProps = asChild ? {} : { type: 'button' as const };\n\n    const sendEvent = React.useCallback(() => {\n      const type = SignInNavigationEventMap[to];\n\n      if (actorRef.getSnapshot().can({ type })) {\n        actorRef.send({ type });\n      } else {\n        console.warn('Invalid navigation event.'); // TODO: Add better handling\n      }\n    }, [actorRef, to]);\n\n    return (\n      <Comp\n        {...defaultProps}\n        {...rest}\n        onClick={sendEvent}\n        ref={forwardedRef}\n      />\n    );\n  },\n);\n\nSignInNavigate.displayName = SIGN_IN_NAVIGATE_NAME;\n","import { Slot } from '@radix-ui/react-slot';\nimport { useSelector } from '@xstate/react';\nimport * as React from 'react';\n\nimport { SignInFirstFactorCtx, SignInSecondFactorCtx } from '../verifications';\n\nexport type SignInResendElement = React.ElementRef<'button'>;\nexport type SignInResendFallbackProps = {\n  resendable: boolean;\n  resendableAfter: number;\n};\nexport type SignInResendProps = {\n  asChild?: boolean;\n  children: React.ReactNode;\n  /**\n   * A fallback component to render when the resend action is not available.\n   * This can be a React element or a function that receives the `resendableAfter` prop.\n   */\n  fallback?: React.ReactNode | ((props: SignInResendFallbackProps) => React.ReactNode);\n};\n\nconst SIGN_IN_RESEND_NAME = 'SignInResend';\n\n/**\n * Resend verification codes during the sign-in process.\n * This component must be used within the <Step name=\"verifications\">.\n *\n * @note This component is not intended to be used directly. Instead, use the <Action resend> component.\n *\n * @example\n * import { Action } from '@clerk/elements/sign-in';\n * <Action resend fallback={({ resendableAfter }) => <p>Resendable in: {resendableAfter}s</p>}>Resend</Action>;\n */\nexport const SignInResend = React.forwardRef<SignInResendElement, SignInResendProps>(\n  ({ asChild, fallback, ...rest }, forwardedRef) => {\n    const firstFactorRef = SignInFirstFactorCtx.useActorRef(true);\n    const secondFactorRef = SignInSecondFactorCtx.useActorRef(true);\n    const actorRef = firstFactorRef || secondFactorRef;\n\n    if (!actorRef) {\n      throw new Error('The resend action must be used within <SignIn.Step name=\"verifications\">.');\n    }\n\n    const fallbackProps: SignInResendFallbackProps = useSelector(\n      actorRef,\n      state => ({\n        resendable: state.context.resendable,\n        resendableAfter: state.context.resendableAfter,\n      }),\n      (a, b) => a.resendableAfter === b.resendableAfter && a.resendable === b.resendable,\n    );\n\n    if (fallback && !fallbackProps.resendable) {\n      return typeof fallback === 'function' ? fallback(fallbackProps) : fallback;\n    }\n\n    const Comp = asChild ? Slot : 'button';\n    const defaultProps = asChild ? {} : { type: 'button' as const };\n\n    return (\n      <Comp\n        {...defaultProps}\n        {...rest}\n        disabled={!fallbackProps.resendable}\n        onClick={() => actorRef.send({ type: 'RETRY' })}\n        ref={forwardedRef}\n      />\n    );\n  },\n);\n\nSignInResend.displayName = SIGN_IN_RESEND_NAME;\n","import { Slot } from '@radix-ui/react-slot';\nimport * as React from 'react';\n\nimport { SignInRouterCtx } from '~/react/sign-in/context';\n\nexport type SignInPasskeyElement = React.ElementRef<'button'>;\n\nexport type SignInPasskeyProps = {\n  asChild?: boolean;\n  children: React.ReactNode;\n} & React.DetailedHTMLProps<React.HTMLAttributes<HTMLButtonElement>, HTMLButtonElement>;\n\nconst SIGN_IN_PASSKEY_NAME = 'SignInPasskey';\n\n/**\n * Prompt users to select a passkey from their device in order to sign in.\n * This component must be used within the <Step name=\"start\">.\n *\n * @example\n * <SignIn.Action passkey>Use Passkey instead</SignIn.Action>\n */\nexport const SignInPasskey = React.forwardRef<SignInPasskeyElement, SignInPasskeyProps>(\n  ({ asChild, ...rest }, forwardedRef) => {\n    const actorRef = SignInRouterCtx.useActorRef(true);\n\n    const Comp = asChild ? Slot : 'button';\n    const defaultProps = asChild ? {} : { type: 'button' as const };\n\n    const sendEvent = React.useCallback(() => {\n      actorRef?.send({ type: 'AUTHENTICATE.PASSKEY' });\n    }, [actorRef]);\n\n    return (\n      <Comp\n        {...defaultProps}\n        {...rest}\n        onClick={sendEvent}\n        ref={forwardedRef}\n      />\n    );\n  },\n);\n\nSignInPasskey.displayName = SIGN_IN_PASSKEY_NAME;\n","import { SignInSafeIdentifierSelector, SignInSalutationSelector } from '~/internals/machines/sign-in';\n\nimport { SignInRouterCtx } from './context';\n\n/**\n * Render an identifier that has been provided by the user during a sign-in attempt. Renders a `string` (or empty string if it can't find an identifier).\n *\n * @example\n * <SignIn.Strategy name=\"email_code\">\n *  <h1>Check your email</h1>\n *  <p>We've sent a code to <SignIn.SafeIdentifier />.</p>\n * </SignIn.Strategy>\n */\nexport function SignInSafeIdentifier(): string {\n  return SignInRouterCtx.useSelector(SignInSafeIdentifierSelector);\n}\n\n/**\n * Render a salutation for the user during a sign-in attempt. It attempts to resolve these values in this specific order: First name, Last name, Identifier. Renders a `string` (or empty string if it can't find an identifier).\n *\n * @example\n * <SignIn.Strategy name=\"password\">\n *  <p>Welcome back <SignIn.Salutation />!</p>\n * </SignIn.Strategy>\n */\nexport function SignInSalutation(): string {\n  return SignInRouterCtx.useSelector(SignInSalutationSelector);\n}\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA,IAAAA,sBAAO;;;ACDP,IAAAC,sBAAoD;AACpD,IAAAC,oBAAsC;AACtC,IAAAC,gBAAiC;AACjC,IAAAC,iBAA4B;;;ACHrB,IAAM,0BAA0B;AAAvC;AAGO,IAAM,6BACX,mBAAQ,IAAI,sBAAZ,YAAiC,QAAQ,IAAI,kCAA7C,YAA8E;AAJhF,IAAAC,KAAAC;AAKO,IAAM,6BACXA,OAAAD,MAAA,QAAQ,IAAI,sBAAZ,OAAAA,MAAiC,QAAQ,IAAI,kCAA7C,OAAAC,MAA8E;AAIzE,IAAM,sCAAsC;AAe5C,IAAM,+BAA+B;AAKrC,IAAM,cAAc;AAAA,EACzB,2BAA2B;AAAA,EAC3B,yBAAyB;AAAA,EACzB,2BAA2B;AAAA,EAC3B,wBAAwB;AAAA,EACxB,qBAAqB;AAAA,EACrB,qCAAqC;AAAA,EACrC,oBAAoB;AAAA,EACpB,6BAA6B;AAAA,EAC7B,aAAa;AACf;AAEO,IAAM,UAAU;AAAA,EACrB,MAAM;AAAA,EACN,SAAS;AACX;;;AC7CA,mBAAmC;;;ACAnC,mBAA6B;AAC7B,wBAA6B;AAE7B,oBAA8C;;;ACDvC,IAAe,yBAAf,cAA8C,MAAM;AAAA,EAKzD,YACW,MACT,SACA;AACA,UAAM,OAAO;AAHJ;AALX,sBAAa;AACb,8BAAqB;AASnB,SAAK,OAAO;AACZ,SAAK,aAAa;AAAA,EACpB;AAAA,EAEA,WAAW;AACT,WAAO,IAAI,KAAK,IAAI;AAAA,QAAY,KAAK,IAAI;AAAA,WAAc,KAAK,OAAO;AAAA,EACrE;AACF;AAEO,IAAM,qBAAN,MAAM,4BAA2B,uBAAuB;AAAA,EAC7D,OAAO,aAAa,OAAsB;AACxC,WAAO,IAAI,oBAAmB,MAAM,MAAM,MAAM,eAAe,MAAM,OAAO;AAAA,EAC9E;AAAA,EAEA,YAAY,MAAc,SAAiB;AACzC,UAAM,MAAM,OAAO;AACnB,SAAK,OAAO;AAAA,EACd;AACF;AAEO,IAAM,4BAAN,cAAwC,uBAAuB;AAAA,EACpE,YAAY,SAAiB;AAC3B,UAAM,0BAA0B,OAAO;AACvC,SAAK,OAAO;AAAA,EACd;AACF;AAEO,IAAM,0BAAN,MAAM,iCAAgC,uBAAuB;AAAA,EAKlE,YAAY,MAAc,SAAiB;AACzC,UAAM,MAAM,OAAO;AAYrB,mBAAU,MAAM;AAXd,SAAK,OAAO;AAAA,EACd;AAAA,EAPA,OAAO,aAAa,OAAsB;AACxC,WAAO,IAAI,yBAAwB,MAAM,MAAM,MAAM,eAAe,MAAM,OAAO;AAAA,EACnF;AAAA,EAOA,IAAI,gBAAgB;AAClB,WAAO,KAAK;AAAA,EACd;AAAA,EAEA,IAAI,aAAa;AACf,WAAO;AAAA,EACT;AAGF;;;ADDO,IAAM,kBAAc,qBAAM;AAAA,EAC/B,SAAS;AAAA,IACP,qBAAiB,sBAAO;AAAA,MACtB,QAAQ,CAAC,GAAG,WAA6C,CAAC,GAAG,OAAO,MAAM;AAAA,IAC5E,CAAC;AAAA,IACD,sBAAkB,sBAAO;AAAA,MACvB,QAAQ,CAAC,EAAE,QAAQ,GAAG,WAAoD;AACxE,YAAI,CAAC,OAAO,MAAM;AAChB,gBAAM,IAAI,MAAM,wBAAwB;AAAA,QAC1C;AAEA,YAAI,QAAQ,OAAO,IAAI,OAAO,IAAI,GAAG;AAEnC,kBAAQ,OAAO,IAAI,OAAO,IAAI,EAAG,WAAW,OAAO;AAAA,QACrD;AAEA,eAAO,QAAQ;AAAA,MACjB;AAAA,IACF,CAAC;AAAA,EACH;AAAA,EACA,OAAO,CAAC;AACV,CAAC,EAAE,cAAc;AAAA,EACf,IAAI;AAAA,EACJ,SAAS,OAAO;AAAA,IACd,eAAe,oBAAI,IAAI;AAAA,IACvB,QAAQ,CAAC;AAAA,IACT,QAAQ,oBAAI,IAAI;AAAA,IAChB,aAAa;AAAA,EACf;AAAA,EACA,IAAI;AAAA,IACF,cAAc;AAAA,MACZ,aAAS,8BAAe,CAAC,EAAE,SAAS,MAAM,MAAM;AAzFtD,YAAAC,KAAAC;AA0FQ,gBAAI,2BAAa,MAAM,KAAK,GAAG;AAC7B,gBAAM,SAAoD,CAAC;AAC3D,gBAAM,eAAqC,CAAC;AAE5C,qBAAW,SAAS,MAAM,MAAM,UAAU,CAAC,MAAM,KAAK,GAAG;AACvD,kBAAM,WAAO,iCAAaD,MAAA,MAAM,SAAN,gBAAAA,IAAY,SAAS;AAE/C,gBAAI,CAAC,MAAM;AACT,2BAAa,KAAK,mBAAmB,aAAa,KAAK,CAAC;AACxD;AAAA,YACF,WAAW,CAAC,OAAO,IAAI,GAAG;AACxB,qBAAO,IAAI,IAAI,CAAC;AAAA,YAClB;AAEA,aAAAC,MAAA,OAAO,IAAI,MAAX,gBAAAA,IAAc,KAAK,wBAAwB,aAAa,KAAK;AAAA,UAC/D;AAEA,kBAAQ;AAAA,YACN,MAAM;AAAA,YACN,QAAQ;AAAA,cACN,QAAQ;AAAA,YACV;AAAA,UACF,CAAC;AAED,qBAAW,SAAS,QAAQ;AAC1B,oBAAQ;AAAA,cACN,MAAM;AAAA,cACN,QAAQ;AAAA,gBACN,MAAM;AAAA,gBACN,UAAU;AAAA,kBACR,MAAM;AAAA,kBACN,SAAS,OAAO,KAAK,EAAE,CAAC;AAAA,gBAC1B;AAAA,cACF;AAAA,YACF,CAAC;AAAA,UACH;AAAA,QACF;AAAA,MACF,CAAC;AAAA,IACH;AAAA,IACA,gBAAgB;AAAA,MACd,aAAS,sBAAO;AAAA,QACd,QAAQ,MAAM,CAAC;AAAA,MACjB,CAAC;AAAA,IACH;AAAA,IACA,aAAa;AAAA,MACX,aAAS,sBAAO;AAAA,QACd,QAAQ,CAAC,EAAE,SAAS,MAAM,MAAM;AAC9B,cAAI,CAAC,MAAM,MAAM,MAAM;AACrB,kBAAM,IAAI,MAAM,wBAAwB;AAAA,UAC1C;AAEA,gBAAM,MAAM,QAAQ,MAAM,MAAM,SAAS,QAAQ,cAAc,IAAI,MAAM,MAAM,IAAI,KAAK;AAExF,kBAAQ,OAAO,IAAI,MAAM,MAAM,MAAM,MAAM,KAAK;AAChD,iBAAO,QAAQ;AAAA,QACjB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,IACA,gBAAgB;AAAA,MACd,aAAS,sBAAO;AAAA,QACd,QAAQ,CAAC,EAAE,SAAS,MAAM,MAAM;AAC9B,cAAI,CAAC,MAAM,MAAM,MAAM;AACrB,kBAAM,IAAI,MAAM,wBAAwB;AAAA,UAC1C;AAEA,cAAI,QAAQ,OAAO,IAAI,MAAM,MAAM,IAAI,GAAG;AAExC,oBAAQ,OAAO,IAAI,MAAM,MAAM,IAAI,EAAG,QAAQ,MAAM,MAAM;AAAA,UAC5D;AAEA,iBAAO,QAAQ;AAAA,QACjB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,IACA,gBAAgB;AAAA,MACd,aAAS,sBAAO;AAAA,QACd,QAAQ,CAAC,EAAE,SAAS,MAAM,MAAM;AAC9B,cAAI,CAAC,MAAM,MAAM,MAAM;AACrB,kBAAM,IAAI,MAAM,wBAAwB;AAAA,UAC1C;AAEA,kBAAQ,OAAO,OAAO,MAAM,MAAM,IAAI;AACtC,iBAAO,QAAQ;AAAA,QACjB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,IACA,sBAAsB;AAAA,MACpB,SAAS;AAAA,QACP;AAAA,UACE,MAAM;AAAA,UACN,QAAQ,CAAC,EAAE,MAAM,MAAM,MAAM;AAAA,QAC/B;AAAA,MACF;AAAA,IACF;AAAA,IACA,wBAAwB;AAAA,MACtB,aAAS,sBAAO;AAAA,QACd,QAAQ,CAAC,EAAE,SAAS,MAAM,MAAM;AAC9B,cAAI,CAAC,MAAM,MAAM,MAAM;AACrB,kBAAM,IAAI,MAAM,wBAAwB;AAAA,UAC1C;AACA,cAAI,QAAQ,OAAO,IAAI,MAAM,MAAM,IAAI,GAAG;AAExC,oBAAQ,OAAO,IAAI,MAAM,MAAM,IAAI,EAAG,WAAW;AAAA,UACnD;AAEA,iBAAO,QAAQ;AAAA,QACjB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,IACA,4BAA4B;AAAA,MAC1B,aAAS,sBAAO;AAAA,QACd,QAAQ,CAAC,EAAE,QAAQ,MAAM;AACvB,kBAAQ,OAAO,QAAQ,WAAS;AAC9B,kBAAM,WAAW;AAAA,UACnB,CAAC;AAED,iBAAO,QAAQ;AAAA,QACjB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,IACA,qBAAqB;AAAA,MACnB,aAAS,sBAAO,CAAC,EAAE,MAAM,MAAM;AAC7B,cAAM,UAAU,IAAI,IAAI,MAAM,OAAO;AAErC,eAAO;AAAA,UACL,eAAe,MAAM;AAAA,UACrB,QAAQ,oBAAI,IAAI,CAAC,GAAG,MAAM,SAAS,OAAO,OAAK,CAAC,QAAQ,IAAI,CAAC,CAAC,GAAG,GAAG,MAAM,QAAQ,CAAC;AAAA,UACnF;AAAA,UACA,UAAU,IAAI,IAAI,MAAM,QAAQ;AAAA,UAChC,aAAa;AAAA,UACb,UAAU,IAAI,IAAI,MAAM,QAAQ;AAAA,QAClC;AAAA,MACF,CAAC;AAAA,IACH;AAAA,IACA,uBAAuB;AAAA,MACrB,aAAS,sBAAO;AAAA,QACd,eAAe,oBAAI,IAAI;AAAA,QACvB,QAAQ;AAAA,QACR,SAAS;AAAA,QACT,UAAU;AAAA,QACV,aAAa;AAAA,QACb,UAAU;AAAA,MACZ,CAAC;AAAA,IACH;AAAA,EACF;AACF,CAAC;;;AEtOM,IAAI;AAEX,IAAI,OAAS;AACX,aAAU,yBAAoB,MAApB,YAAyB,oBAAoB;AACzD;;;AHDA,IAAM,yBAAqB,iCAAmB,aAAa,EAAE,QAAQ,CAAC;AAE/D,IAAM,oBAAoB,mBAAmB;AAC7C,IAAM,eAAe,mBAAmB;AACxC,IAAM,kBAAkB,mBAAmB;AAK3C,IAAM,uBAAuB,CAAC,UAAyB,MAAM,QAAQ;AAKrE,IAAM,qBAAqB,CAAC,SAA6B,CAAC,UAAsB;AAtBvF,MAAAC;AAuBE,iBAAOA,MAAA,MAAM,QAAQ,OAAO,IAAI,IAAI,MAA7B,gBAAAA,IAAgC,QAAQ;AAAA;AAK1C,IAAM,wBAAwB,CAAC,SAA6B,CAAC,UAClE,QAAQ,mBAAmB,IAAI,EAAE,KAAK,CAAC;AAKlC,IAAM,wBAAwB,CAAC,SAA6B,CAAC,UAAsB;AAlC1F,MAAAA;AAmCE,iBAAOA,MAAA,MAAM,QAAQ,OAAO,IAAI,IAAI,MAA7B,gBAAAA,IAAgC,WAAW;AAAA;;;AIpBpD,IAAAC,iBAAwD;;;ACyBjD,SAAS,cAAc,EAAE,SAAS,MAAM,GAA6B;AAE1E,MAAI;AACJ,MAAI;AAKJ,MAAI,MAAM,KAAK,WAAW,cAAc,KAAK,MAAM,KAAK,WAAW,eAAe,GAAG;AACnF,WAAO,QAAQ,OAAO,KAAK;AAAA,MACzB,MAAM;AAAA,MACN,WAAW;AAAA,MACX,MAAM;AAAA,MACN,UAAU;AAAA,IACZ,CAAC;AAAA,EACH;AAGA,MAAI,QAAQ,gBAAgB,YAAY;AACtC,WAAO;AAGP,QAAI,MAAM,SAAS,YAAY;AAC7B,iBAAW,MAAM,OAAO;AAAA,IAC1B;AAEA,WAAO,QAAQ,OAAO,KAAK;AAAA,MACzB,MAAM;AAAA,MACN,WAAW;AAAA,MACX;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH,WAAW,QAAQ,gBAAgB,YAAY;AAC7C,WAAO;AACP,eAAW;AAEX,WAAO,QAAQ,OAAO,KAAK;AAAA,MACzB,MAAM;AAAA,MACN,WAAW;AAAA,MACX;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH,WAAW,QAAQ,gBAAgB,kBAAkB;AACnD,WAAO;AACP,eAAW;AAEX,WAAO,QAAQ,OAAO,KAAK;AAAA,MACzB,MAAM;AAAA,MACN,WAAW;AAAA,MACX;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH,OAAO;AACL,WAAO,QAAQ;AACf,eAAW;AAEX,WAAO,QAAQ,OAAO,KAAK;AAAA,MACzB,MAAM;AAAA,MACN,WAAW;AAAA,MACX;AAAA,MACA;AAAA,IACF,CAAC;AAAA,EACH;AACF;;;ACrGA,sBAAoC;AAGpC,IAAM,gCAAgC,CAAC,WAAW,YAAY,cAAc,cAAc,YAAY;AACtG,IAAM,2BAA2B,CAAC,cAAc,cAAc,cAAc,WAAW,UAAU;AAGjG,IAAM,0BAA0B,CAAC,MAAqB,CAAC,MAAoB;AACzE,SAAO,oBAAoB,KAAK,EAAE,mBAAmB;AACvD;AAIO,SAAS,8BACd,cACA,YACA,yBACqB;AACrB,MAAI,CAAC,gBAAgB,aAAa,WAAW,GAAG;AAC9C,WAAO;AAAA,EACT;AAEA,SAAO,4BAA4B,aAC/B,yCAAyC,cAAc,UAAU,IACjE,oCAAoC,cAAc,UAAU;AAClE;AAEA,SAAS,oBAAoB,SAA8C;AACzE,UAAI,qCAAoB,GAAG;AACzB,UAAM,gBAAgB,QAAQ,KAAK,CAAC,EAAE,SAAS,MAAM,aAAa,SAAS;AAE3E,QAAI,eAAe;AACjB,aAAO;AAAA,IACT;AAAA,EACF;AACA,SAAO;AACT;AAEA,SAAS,yCACP,SACA,YACqB;AACrB,QAAM,gBAAgB,oBAAoB,OAAO;AACjD,MAAI,eAAe;AACjB,WAAO;AAAA,EACT;AAGA,QAAM,iBAAiB,QAAQ,KAAK,YAAU,OAAO,aAAa,UAAU;AAC5E,MAAI,gBAAgB;AAClB,WAAO;AAAA,EACT;AAGA,QAAM,sBAAsB,QAAQ,KAAK,wBAAwB,UAAU,CAAC;AAC5E,MAAI,qBAAqB;AACvB,WAAO;AAAA,EACT;AAEA,aAAW,mBAAmB,+BAA+B;AAC3D,UAAM,SAAS,QAAQ,KAAK,CAAAC,YAAUA,QAAO,aAAa,eAAe;AACzE,QAAI,QAAQ;AACV,aAAO;AAAA,IACT;AAAA,EACF;AAEA,SAAO;AACT;AAEA,SAAS,oCAAoC,SAAyB,YAAgD;AACpH,QAAM,gBAAgB,oBAAoB,OAAO;AACjD,MAAI,eAAe;AACjB,WAAO;AAAA,EACT;AAEA,QAAM,sBAAsB,QAAQ,KAAK,wBAAwB,UAAU,CAAC;AAC5E,MAAI,qBAAqB;AACvB,WAAO;AAAA,EACT;AAGA,QAAM,kBAAkB,QAAQ,KAAK,YAAU,OAAO,aAAa,YAAY;AAC/E,MAAI,iBAAiB;AACnB,WAAO;AAAA,EACT;AAEA,aAAW,mBAAmB,0BAA0B;AACtD,UAAM,SAAS,QAAQ,KAAK,CAAAA,YAAUA,QAAO,aAAa,eAAe;AACzE,QAAI,QAAQ;AACV,aAAO;AAAA,IACT;AAAA,EACF;AAEA,SAAO;AACT;AAGO,SAAS,oCAAoC,eAAoD;AACtG,MAAI,CAAC,iBAAiB,cAAc,WAAW,GAAG;AAChD,WAAO;AAAA,EACT;AAEA,QAAM,aAAa,cAAc,KAAK,OAAK,EAAE,aAAa,MAAM;AAChE,MAAI,YAAY;AACd,WAAO;AAAA,EACT;AAEA,QAAM,kBAAkB,cAAc,KAAK,OAAK,EAAE,aAAa,YAAY;AAC3E,MAAI,iBAAiB;AACnB,WAAO;AAAA,EACT;AAEA,SAAO,cAAc,CAAC;AACxB;;;ACjHO,SAAS,gBAAmB,OAAU,OAAiD;AAC5F,MAAI,UAAU,UAAa,UAAU,MAAM;AACzC,UAAM,IAAI,MAAM,GAAG,SAAS,KAAK,iBAAiB;AAAA,EACpD;AACF;AAQO,SAAS,sBAAiC,OAAyD;AACxG,MAAI,WAAW,UAAU,OAAO;AAC9B,UAAM,IAAI,MAAM,iCAAiC,MAAM,IAAI,GAAG;AAAA,EAChE;AACF;;;ACsCO,IAAM,2BAA2B;AAAA,EACtC,mBAAmB;AAAA;AACrB;;;AJFA,IAAM,0BAA0B,CAAC,aAA8E;AAC7G,MAAI,CAAC,UAAU;AACb,WAAO;AAAA,EACT;AAEA,SAAO,CAAC,WAAW,UAAU,EAAE,SAAS,QAAQ;AAClD;AAEO,IAAM,8BAA8B;AAE3C,IAAM,gCAA4B,sBAAM;AAAA,EACtC,QAAQ;AAAA,IACN,6BAAyB;AAAA,MAA+D,MACtF,QAAQ,OAAO,IAAI,0BAA0B,oDAAoD,CAAC;AAAA,IACpG;AAAA,IACA,aAAS;AAAA,MAAgF,MACvF,QAAQ,OAAO,IAAI,0BAA0B,oCAAoC,CAAC;AAAA,IACpF;AAAA,IACA,aAAS;AAAA,MAAgF,MACvF,QAAQ,OAAO,IAAI,0BAA0B,oCAAoC,CAAC;AAAA,IACpF;AAAA,EACF;AAAA,EACA,SAAS;AAAA,IACP,oBAAgB,uBAAO,CAAC,EAAE,QAAQ,OAAO;AAAA,MACvC,YAAY,QAAQ,oBAAoB;AAAA,MACxC,iBAAiB,QAAQ,kBAAkB,IAAI,QAAQ,kBAAkB,IAAI,QAAQ;AAAA,IACvF,EAAE;AAAA,IACF,qBAAiB,uBAAO;AAAA,MACtB,YAAY;AAAA,MACZ,iBAAiB;AAAA,IACnB,CAAC;AAAA,IACD,8BAA8B,CAAC,EAAE,QAAQ,MAAM;AAvFnD,UAAAC;AAwFM,YAAM,QAAQ,QAAQ,OAAO,YAAY,EAAE,QAAQ;AAEnD,WAAIA,MAAA,MAAM,4BAAN,gBAAAA,IAA+B,gBAAgB;AACjD;AAAA,MACF;AAEA,UACE,CAAC,MAAM,OAAO,OAAO,sBAAsB;AAAA,QAAM,YAC/C,QAAQ,qBAAqB,IAAI,OAAO,QAAmC;AAAA,MAC7E,GACA;AACA,gBAAQ;AAAA,UACN,mEAAmE,MAAM,OAAO,OAAO,sBACpF,IAAI,CAAC,WAAgB,OAAO,QAAQ,EACpC,KAAK,IAAI,CAAC,sCAAsC,MAAM,KAAK,QAAQ,oBAAoB,EAAE;AAAA,YAC1F;AAAA,UACF,CAAC;AAAA,QACH;AAAA,MACF;AAEA,UACE,MAAM,OAAO,OAAO,0BACpB,CAAC,MAAM,OAAO,OAAO,uBAAuB;AAAA,QAAM,YAChD,QAAQ,qBAAqB,IAAI,OAAO,QAAmC;AAAA,MAC7E,GACA;AACA,gBAAQ;AAAA,UACN,uEAAuE;AAAA,YACrE,GAAG,MAAM,OAAO,OAAO;AAAA,UACzB,EACG,IAAI,OAAK,EAAE,QAAQ,EACnB,KAAK,IAAI,CAAC,sCAAsC,MAAM,KAAK,QAAQ,oBAAoB,EAAE;AAAA,YAC1F;AAAA,UACF,CAAC;AAAA,QACH;AAAA,MACF;AAEA,UACE,OAGA;AACA,cAAM,IAAI;AAAA,UACR,sCAAqC,aAAQ,kBAAR,mBAAuB,QAAQ,yCAAwC,aAAQ,kBAAR,mBAAuB,QAAQ;AAAA,QAC7I;AAAA,MACF,WAAW,OAA4E;AACrF,cAAM,IAAI;AAAA,UACR;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IACA,YAAY,CAAC,EAAE,SAAS,MAAM,MAC5B,QAAQ,OAAO,KAAK,EAAE,MAAM,QAAQ,UAAW,MAAoD,OAAO,CAAC;AAAA,IAC7G;AAAA,IACA,mBAAe;AAAA,MACb,CAAC,EAAE,QAAQ,MAAM,QAAQ;AAAA,MACzB,CAAC,EAAE,MAAM,MAAM;AACb,8BAAsB,KAAK;AAC3B,eAAO;AAAA,UACL,MAAM;AAAA,UACN,OAAO,MAAM;AAAA,QACf;AAAA,MACF;AAAA,IACF;AAAA,IACA,iBAAiB,CAAC,EAAE,MAAM,MAAM;AAC9B,UAAI,OAAwC;AAC1C,8BAAsB,KAAK;AAE3B,cAAM,IAAI,0BAA0B;AAAA,SACnC,MAAM,MAAM,OAAO;AAAA;AAAA,6DAEiC;AAAA,MACvD;AAAA,IACF;AAAA,EACF;AAAA,EACA,QAAQ;AAAA,IACN,cAAc,CAAC,EAAE,QAAQ,MAAM,QAAQ,cAAc,QAAQ,oBAAoB;AAAA,IACjF,mBAAmB,CAAC,EAAE,QAAQ,MAAG;AArKrC,UAAAA;AAqKwC,sCAAwBA,MAAA,QAAQ,kBAAR,gBAAAA,IAAuB,QAAQ;AAAA;AAAA,EAC7F;AAAA,EACA,QAAQ;AAAA,EACR,OAAO,CAAC;AACV,CAAC,EAAE,cAAc;AAAA,EACf,IAAI;AAAA,EACJ,SAAS,CAAC,EAAE,MAAM,OAAO;AAAA,IACvB,eAAe;AAAA,IACf,SAAS,MAAM;AAAA,IACf,aAAa;AAAA,IACb,QAAQ,MAAM;AAAA,IACd,sBAAsB,oBAAI,IAAkB;AAAA,IAC5C,YAAY;AAAA,IACZ,iBAAiB;AAAA,EACnB;AAAA,EACA,SAAS;AAAA,EACT,IAAI;AAAA,IACF,qBAAqB;AAAA,IACrB,qBAAqB;AAAA,MACnB,aAAS,uBAAO;AAAA,QACd,sBAAsB,CAAC,EAAE,SAAS,MAAM,MAAM,QAAQ,qBAAqB,IAAI,MAAM,MAAM;AAAA,MAC7F,CAAC;AAAA,IACH;AAAA,IACA,uBAAuB;AAAA,MACrB,aAAS,uBAAO;AAAA,QACd,sBAAsB,CAAC,EAAE,SAAS,MAAM,MAAM;AAC5C,kBAAQ,qBAAqB,OAAO,MAAM,MAAM;AAChD,iBAAO,QAAQ;AAAA,QACjB;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF;AAAA,EACA,QAAQ;AAAA,IACN,MAAM;AAAA,MACJ,MAAM,CAAC,mBAAmB,eAAe;AAAA,MACzC,QAAQ;AAAA,QACN,IAAI;AAAA,QACJ,KAAK;AAAA,QACL,OAAO,CAAC,EAAE,QAAQ,OAAO;AAAA,UACvB,QAAQ,QAAQ;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,QAAQ;AAAA,UACR,aAAS,uBAAO;AAAA,YACd,eAAe,CAAC,EAAE,MAAM,MAAM,MAAM;AAAA,UACtC,CAAC;AAAA,QACH;AAAA,QACA,SAAS;AAAA,UACP,QAAQ;AAAA,UACR,SAAS;AAAA,gBACP,oBAAI,iEAAiE;AAAA,gBACrE,uBAAO;AAAA,cACL,eAAe,EAAE,UAAU,WAAW;AAAA,YACxC,CAAC;AAAA,UACH;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IACA,WAAW;AAAA,MACT,MAAM,CAAC,mBAAmB,eAAe;AAAA,MACzC,QAAQ;AAAA,QACN,IAAI;AAAA,QACJ,KAAK;AAAA,QACL,OAAO,CAAC,EAAE,QAAQ,OAAO;AAAA,UACvB,QAAQ,QAAQ;AAAA,UAChB,YAAY,QAAQ;AAAA,UACpB,QAAQ,QAAQ;AAAA,QAClB;AAAA,QACA,QAAQ;AAAA,UACN,SAAS;AAAA,UACT,QAAQ;AAAA,QACV;AAAA,QACA,SAAS;AAAA,UACP,SAAS,CAAC,iBAAiB,iBAAiB;AAAA,UAC5C,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,IACF;AAAA,IACA,SAAS;AAAA,MACP,MAAM,CAAC,eAAe;AAAA,MACtB,aAAa;AAAA,MACb,IAAI;AAAA,QACF,4BAA4B;AAAA,QAC5B,4BAA4B;AAAA,QAC5B,OAAO;AAAA,QACP,QAAQ;AAAA,UACN,QAAQ;AAAA,UACR,SAAS;AAAA,QACX;AAAA,MACF;AAAA,MACA,SAAS;AAAA,MACT,QAAQ;AAAA,QACN,MAAM;AAAA,UACJ,aAAa;AAAA,UACb,QAAQ;AAAA,YACN;AAAA,cACE,OAAO;AAAA,cACP,QAAQ;AAAA,YACV;AAAA,YACA;AAAA,cACE,QAAQ;AAAA,YACV;AAAA,UACF;AAAA,QACF;AAAA,QACA,YAAY;AAAA,UACV,aAAa;AAAA,QACf;AAAA,QACA,iBAAiB;AAAA,UACf,aAAa;AAAA,UACb,IAAI;AAAA,YACF,OAAO;AAAA,cACL,aAAS,oBAAI,iBAAiB;AAAA,YAChC;AAAA,UACF;AAAA,QACF;AAAA,QACA,eAAe;AAAA,UACb,aAAa;AAAA,UACb,IAAI;AAAA,YACF,OAAO;AAAA,cACL,aAAS,oBAAI,CAAC,EAAE,QAAQ,MAAM,+BAA+B,QAAQ,eAAe,GAAG;AAAA,YACzF;AAAA,UACF;AAAA,UACA,OAAO;AAAA,YACL,mBAAmB;AAAA,cACjB;AAAA,gBACE,aAAa;AAAA,gBACb,OAAO;AAAA,gBACP,SAAS;AAAA,gBACT,QAAQ;AAAA,cACV;AAAA,cACA;AAAA,gBACE,aAAa;AAAA,gBACb,SAAS;AAAA,gBACT,QAAQ;AAAA,gBACR,SAAS;AAAA,cACX;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,MACA,OAAO;AAAA,QACL,KAAM;AAAA,UACJ,SAAS;AAAA,QACX;AAAA,MACF;AAAA,IACF;AAAA,IACA,gBAAgB;AAAA,MACd,aAAa;AAAA,MACb,MAAM,CAAC,yBAAyB,uBAAuB;AAAA,MACvD,IAAI;AAAA,QACF,mBAAmB;AAAA,UACjB,aAAS,uBAAO,EAAE,eAAe,CAAC,EAAE,MAAM,MAAM,MAAM,UAAU,KAAK,CAAC;AAAA,UACtE,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,IACF;AAAA,IACA,YAAY;AAAA,MACV,MAAM,CAAC,oBAAoB,eAAe;AAAA,MAC1C,OAAO;AAAA,MACP,QAAQ;AAAA,QACN,IAAI;AAAA,QACJ,KAAK;AAAA,QACL,OAAO,CAAC,EAAE,QAAQ,OAAO;AAAA,UACvB,QAAQ,QAAQ;AAAA,UAChB,eAAe,QAAQ;AAAA,UACvB,QAAQ,QAAQ,QAAQ,YAAY,EAAE,QAAQ;AAAA,QAChD;AAAA,QACA,QAAQ;AAAA,UACN,SAAS,CAAC,cAAc,eAAe;AAAA,QACzC;AAAA,QACA,SAAS;AAAA,UACP,SAAS,CAAC,iBAAiB,mBAAmB,eAAe;AAAA,UAC7D,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,IACF;AAAA,IACA,MAAM;AAAA,MACJ,MAAM;AAAA,IACR;AAAA,EACF;AACF,CAAC;AAEM,IAAM,2BAA2B,0BAA0B,QAAQ;AAAA,EACxE,QAAQ;AAAA,IACN,6BAAyB,4BAAY,OAAO,EAAE,MAAM,MAAM;AA7V9D,UAAAA;AA8VM,YAAM,QAAQ,MAAM,OAAO,YAAY,EAAE,QAAQ;AAEjD,aAAO,QAAQ;AAAA,QACb;AAAA,UACE,MAAM,OAAO,OAAO;AAAA,UACpB,MAAM,OAAO,OAAO;AAAA,WACpBA,MAAA,MAAM,4BAAN,gBAAAA,IAA+B,cAAc;AAAA,QAC/C;AAAA,MACF;AAAA,IACF,CAAC;AAAA,IACD,aAAS,4BAAY,OAAO,EAAE,MAAM,MAAM;AACxC,YAAM,EAAE,QAAQ,QAAQ,WAAW,IAAI;AACvC,YAAM,QAAQ,OAAO,YAAY,EAAE,QAAQ;AAG3C,YAAM,gCAAgC,MAAM,OAAO,OAAO,wBAAwB;AAClF,YAAM,eAAe,cAAc,CAAC,iCAAiC,gCAAgC,oBAAI,KAAK;AAE9G,UAAI,wBAAwB,iCAAQ,QAAQ,KAAK,CAAC,cAAc;AAC9D,eAAO,QAAQ,QAAQ,MAAM,OAAO,MAAM;AAAA,MAC5C;AAEA,sBAAgB,QAAQ,qBAAqB;AAE7C,aAAO,MAAM,MAAM,OAAO,OAAO,mBAAmB,MAAkC;AAAA,IACxF,CAAC;AAAA,IACD,aAAS,4BAAY,OAAO,EAAE,MAAM,MAAM;AAxX9C,UAAAA,KAAAC,KAAA;AAyXM,YAAM,EAAE,eAAe,QAAQ,OAAO,IAAI;AAE1C,sBAAgB,eAAe,gBAAgB;AAE/C,UAAI;AAEJ,YAAM,WAAW,cAAc;AAC/B,YAAM,QAAOD,MAAA,OAAO,IAAI,MAAM,MAAjB,gBAAAA,IAAoB;AACjC,YAAM,YAAWC,MAAA,OAAO,IAAI,UAAU,MAArB,gBAAAA,IAAwB;AAEzC,cAAQ,UAAU;AAAA,QAChB,KAAK,WAAW;AACd,iBAAO,MAAM,OAAO,YAAY,EAAE,QAAQ,MAAM,OAAO,OAAO,wBAAwB;AAAA,QACxF;AAAA,QACA,KAAK,YAAY;AACf,0BAAgB,UAAU,UAAU;AAEpC,0BAAgB;AAAA,YACd;AAAA,YACA;AAAA,UACF;AAEA;AAAA,QACF;AAAA,QACA,KAAK;AAAA,QACL,KAAK,6BAA6B;AAChC,0BAAgB,MAAM,gCAAgC;AAEtD,0BAAgB;AAAA,YACd;AAAA,YACA;AAAA,YACA;AAAA,UACF;AAEA;AAAA,QACF;AAAA,QACA,KAAK;AAAA,QACL,KAAK,cAAc;AACjB,0BAAgB,MAAM,sBAAsB;AAE5C,0BAAgB;AAAA,YACd;AAAA,YACA;AAAA,UACF;AAEA;AAAA,QACF;AAAA,QACA,KAAK,2BAA2B;AAC9B,gBAAM,aAAY,YAAO,IAAI,WAAW,MAAtB,mBAAyB;AAC3C,0BAAgB,WAAW,yBAAyB;AAEpD,0BAAgB;AAAA,YACd;AAAA,YACA;AAAA,UACF;AAEA;AAAA,QACF;AAAA,QACA;AACE,gBAAM,IAAI,0BAA0B,qBAAqB,QAAQ,EAAE;AAAA,MACvE;AAEA,aAAO,MAAM,OAAO,YAAY,EAAE,QAAQ,MAAM,OAAO,OAAO,mBAAmB,aAAa;AAAA,IAChG,CAAC;AAAA,EACH;AACF,CAAC;AAEM,IAAM,4BAA4B,0BAA0B,QAAQ;AAAA,EACzE,QAAQ;AAAA,IACN,6BAAyB;AAAA,MAAY,OAAO,EAAE,MAAM,MAClD,QAAQ;AAAA,QACN;AAAA,UACE,MAAM,OAAO,YAAY,EAAE,QAAQ,MAAM,OAAO,OAAO;AAAA,QACzD;AAAA,MACF;AAAA,IACF;AAAA,IACA,aAAS,4BAAY,OAAO,EAAE,MAAM,MAAM;AACxC,YAAM,EAAE,QAAQ,QAAQ,WAAW,IAAI;AACvC,YAAM,QAAQ,OAAO,YAAY,EAAE,QAAQ;AAG3C,YAAM,gCAAgC,MAAM,OAAO,OAAO,yBAAyB;AACnF,YAAM,eAAe,cAAc,CAAC,iCAAiC,gCAAgC,oBAAI,KAAK;AAE9G,sBAAgB,QAAQ,sBAAsB;AAE9C,UAAI,OAAO,aAAa,gBAAgB,CAAC,cAAc;AACrD,eAAO,QAAQ,QAAQ,MAAM,OAAO,MAAM;AAAA,MAC5C;AAEA,aAAO,MAAM,MAAM,OAAO,OAAO,oBAAoB;AAAA,QACnD,UAAU,OAAO;AAAA,QACjB,eAAe,OAAO;AAAA,MACxB,CAAC;AAAA,IACH,CAAC;AAAA,IACD,aAAS,4BAAY,OAAO,EAAE,MAAM,MAAM;AAxd9C,UAAAD;AAydM,YAAM,EAAE,QAAQ,QAAQ,cAAc,IAAI;AAE1C,YAAM,QAAOA,MAAA,OAAO,IAAI,MAAM,MAAjB,gBAAAA,IAAoB;AAEjC,sBAAgB,eAAe,gBAAgB;AAC/C,sBAAgB,MAAM,MAAM;AAE5B,aAAO,MAAM,OAAO,YAAY,EAAE,QAAQ,MAAM,OAAO,OAAO,oBAAoB;AAAA,QAChF,UAAU,cAAc;AAAA,QACxB;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAAA,EACH;AACF,CAAC;;;AKteD,iBAAwB;AACxB,IAAAE,mBAA4C;AAG5C,IAAAC,iBAAwF;;;ACIxF,IAAAC,iBAA0C;;;ACKnC,SAAS,eACd,UACA,OACuB;AACvB,SAAO,OAAO,OAAO,QAAQ,EAAE,SAAS,KAAY;AACtD;AAKO,IAAM,yBAAyD;AAAA,EACpE,UAAU;AAAA,EACV,QAAQ;AAAA,EACR,UAAU;AAAA,EACV,SAAS;AAAA,EACT,eAAe;AAAA,EACf,QAAQ;AAAA,EACR,cAAc;AAChB;AAEO,SAAS,yBAAyB,OAAiD;AACxF,SAAO,eAAe,wBAAwB,KAAiC;AACjF;;;ADRO,IAAM,eAAW;AAAA,EACtB,OAAO,EAAE,OAAO,EAAE,MAAM,QAAQ,OAAO,EAAE,MAAM;AAC7C,UAAM,QAAqB,OAAO,YAAY,EAAE,QAAQ;AAExD,WAAO,MAAM,OAAO,IAAI,EAAE,yBAAyB;AAAA,MACjD,aAAa,MAAM,iBAAiB,OAAO,eAAe,GAAG;AAAA,MAC7D,qBAAqB,MAAM,iBAAiB,OAAO,uBAAuB,GAAG;AAAA,MAC7E,GAAG;AAAA,IACL,CAAC;AAAA,EACH;AACF;AAYO,IAAM,6BAAyB;AAAA,EACpC,CAAC,EAAE,UAAU,OAAO,OAAO,MAAM;AAlDnC,QAAAC;AAmDI,UAAM,QAAqB,OAAO,YAAY,EAAE,QAAQ;AACxD,UAAM,iBAAgBA,MAAA,MAAM,4BAAN,gBAAAA,IAA+B;AAErD,UAAM,iBAAiB,CAAC,UAAkB;AACxC,YAAM,KAAK,MAAM,MAAM,GAAG,EAAE,MAAM,EAAE,EAAE,CAAC;AAEvC,UAAI,yBAAyB,EAAE,GAAG;AAEhC,iBAAS,EAAE,MAAM,GAAG,CAAC;AAAA,MACvB,WAAW,QAAO,+CAAe,YAAW;AAE1C,iBAAS,EAAE,MAAM,uBAAuB,OAAO,CAAC;AAAA,MAClD,WAAW,QAAO,+CAAe,YAAW;AAE1C,iBAAS,EAAE,MAAM,uBAAuB,OAAO,CAAC;AAAA,MAClD,OAAO;AAEL,iBAAS,EAAE,MAAM,WAAW,OAAO,IAAI,0BAA0B,6BAA6B,EAAE,EAAE,EAAE,CAAC;AAAA,MACvG;AAEA,aAAO,QAAQ,QAAQ;AAAA,IACzB;AAIA,UAAM,cAAc,MAAM;AAE1B,SAAK,YAAY;AAAA,MACf;AAAA,QACE,wBAAwB,uBAAuB;AAAA,QAC/C,2BAA2B,uBAAuB;AAAA,QAClD,wBAAwB,uBAAuB;AAAA,QAC/C,2BAA2B,uBAAuB;AAAA,QAClD,mBAAmB,uBAAuB;AAAA,QAC1C,gBAAgB,uBAAuB;AAAA,QACvC,kBAAkB,uBAAuB;AAAA,QACzC,iBAAiB,uBAAuB;AAAA,QACxC,uBAAuB,uBAAuB;AAAA,QAC9C,sBAAsB,uBAAuB;AAAA,QAC7C,WAAW,uBAAuB;AAAA,QAClC,WAAW,uBAAuB;AAAA,MACpC;AAAA,MACA;AAAA,IACF;AAEA,WAAO,MAAM;AAAA,EACf;AACF;;;AElGA,IAAAC,iBAA6D;AAQtD,IAAM,sBAAsB;AAI5B,IAAM,wBAAoB,sBAAM;AAAA,EACrC,QAAQ;AAAA,IACN;AAAA,IACA;AAAA,EACF;AAAA,EACA,SAAS;AAAA,IACP,cAAU,oBAAI,CAAC,EAAE,MAAM,MAAM,UAAU,MAAM,IAAI,EAAE;AAAA,IACnD,0BAAsB,uBAAO;AAAA,MAC3B,gBAAgB,CAAC,EAAE,MAAM,MAAM;AAC7B,wCAAY,OAAO,UAAU;AAC7B,eAAO,MAAM,OAAO;AAAA,MACtB;AAAA,IACF,CAAC;AAAA,IACD,4BAAwB,uBAAO;AAAA,MAC7B,gBAAgB;AAAA,IAClB,CAAC;AAAA,IACD,YAAY,CAAC,EAAE,QAAQ,MAAM,QAAQ,OAAO,KAAK,EAAE,MAAM,OAAO,CAAC;AAAA,IACjE;AAAA,IACA,mBAAe;AAAA,MACb,CAAC,EAAE,QAAQ,MAAM,QAAQ;AAAA,MACzB,CAAC,EAAE,MAAM,MAAM;AACb,8BAAsB,KAAK;AAC3B,eAAO;AAAA,UACL,MAAM;AAAA,UACN,OAAO,MAAM;AAAA,QACf;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA,EACA,QAAQ;AAAA,IACN,eAAe,CAAC,EAAE,QAAQ,MAAM,QAAQ,QAAQ,OAAO,YAAY,EAAE,QAAQ,WAAW;AAAA,EAC1F;AAAA,EACA,OAAO,CAAC;AACV,CAAC,EAAE,cAAc;AAAA,EACf,IAAI;AAAA,EACJ,SAAS,CAAC,EAAE,MAAM,OAAO;AAAA,IACvB,gBAAgB;AAAA,IAChB,UAAU,MAAM;AAAA,IAChB,SAAS,MAAM;AAAA,IACf,MAAM,MAAM;AAAA,IACZ,QAAQ,MAAM;AAAA,IACd,aAAa;AAAA,EACf;AAAA,EACA,SAAS;AAAA,EACT,QAAQ;AAAA,IACN,MAAM;AAAA,MACJ,aAAa;AAAA,MACb,IAAI;AAAA,QACF,UAAU;AAAA,QACV,UAAU;AAAA,UACR,WAAO,oBAAI,eAAe;AAAA,UAC1B,QAAQ;AAAA,UACR,SAAS;AAAA,QACX;AAAA,MACF;AAAA,IACF;AAAA,IACA,aAAa;AAAA,MACX,aAAa;AAAA,MACb,MAAM,CAAC,kBAAkB,eAAe;AAAA,MACxC,OAAO,CAAC,wBAAwB,eAAe;AAAA,MAC/C,MAAM,CAAC,0BAA0B,eAAe;AAAA,MAChD,QAAQ;AAAA,QACN,IAAI;AAAA,QACJ,KAAK;AAAA,QACL,OAAO,CAAC,EAAE,SAAS,MAAM,MAAM;AAC7B,0CAAY,OAAO,UAAU;AAE7B,iBAAO;AAAA,YACL,UAAU,QAAQ;AAAA,YAClB,MAAM,QAAQ;AAAA,YACd,QAAQ,MAAM;AAAA,YACd,QAAQ,QAAQ;AAAA,UAClB;AAAA,QACF;AAAA,QACA,SAAS;AAAA,UACP,SAAS;AAAA,UACT,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,IACF;AAAA,IACA,kBAAkB;AAAA,MAChB,aAAa;AAAA,MACb,MAAM,CAAC,kBAAkB,eAAe;AAAA,MACxC,QAAQ;AAAA,QACN,IAAI;AAAA,QACJ,KAAK;AAAA,QACL,OAAO,CAAC,EAAE,QAAQ,MAAM,QAAQ;AAAA,QAChC,SAAS;AAAA,UACP,SAAS,CAAC,YAAY,eAAe;AAAA,UACrC,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,MACA,IAAI;AAAA,QACF,sBAAsB;AAAA,UACpB,SAAS;AAAA,UACT,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF,CAAC;;;AC9GM,SAAS,0BAA0B;AACxC,MAAI,OAAO,WAAW,aAAa;AACjC,WAAO;AAAA,EACT;AAEA,MAAI,CAAC,OAAO,MAAM;AAChB,WAAO;AAAA,EACT;AAEA,SAAO,OAAO,KAAK,UAAU;AAC/B;;;ACVA,IAAAC,iBAA2C;AAWpC,IAAM,+BAA+B;AAErC,IAAM,iCAA6B,sBAAM;AAAA,EAC9C,QAAQ;AAAA,IACN,aAAS;AAAA,MACP,CAAC,EAAE,OAAO,EAAE,QAAQ,OAAO,EAAE,MAAM;AAlBzC,YAAAC;AAmBQ,cAAM,aAAYA,MAAA,OAAO,IAAI,UAAU,MAArB,gBAAAA,IAAwB,UAAoB;AAC9D,eAAO,OAAO,YAAY,EAAE,QAAQ,MAAM,OAAO,OAAO,cAAc,EAAE,SAAS,CAAC;AAAA,MACpF;AAAA,IACF;AAAA,EACF;AAAA,EACA,SAAS;AAAA,IACP;AAAA,IACA,YAAY,CAAC,EAAE,SAAS,MAAM,MAC5B,QAAQ,OAAO,KAAK,EAAE,MAAM,QAAQ,UAAW,MAAoD,OAAO,CAAC;AAAA,IAC7G,mBAAe;AAAA,MACb,CAAC,EAAE,QAAQ,MAAM,QAAQ;AAAA,MACzB,CAAC,EAAE,MAAM,MAAM;AACb,8BAAsB,KAAK;AAC3B,eAAO;AAAA,UACL,MAAM;AAAA,UACN,OAAO,MAAM;AAAA,QACf;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA,EACA,OAAO,CAAC;AACV,CAAC,EAAE,cAAc;AAAA,EACf,IAAI;AAAA,EACJ,SAAS,CAAC,EAAE,MAAM,OAAO;AAAA,IACvB,aAAa;AAAA,IACb,QAAQ,MAAM;AAAA,IACd,SAAS,MAAM;AAAA,EACjB;AAAA,EACA,SAAS;AAAA,EACT,QAAQ;AAAA,IACN,SAAS;AAAA,MACP,MAAM,CAAC,eAAe;AAAA,MACtB,aAAa;AAAA,MACb,IAAI;AAAA,QACF,QAAQ;AAAA,UACN,QAAQ;AAAA,UACR,SAAS;AAAA,QACX;AAAA,MACF;AAAA,IACF;AAAA,IACA,YAAY;AAAA,MACV,MAAM,CAAC,oBAAoB,eAAe;AAAA,MAC1C,OAAO;AAAA,MACP,QAAQ;AAAA,QACN,IAAI;AAAA,QACJ,KAAK;AAAA,QACL,OAAO,CAAC,EAAE,QAAQ,OAAO;AAAA,UACvB,QAAQ,QAAQ;AAAA,UAChB,QAAQ,QAAQ,QAAQ,YAAY,EAAE,QAAQ;AAAA,QAChD;AAAA,QACA,QAAQ;AAAA,UACN,SAAS,CAAC,cAAc,eAAe;AAAA,QACzC;AAAA,QACA,SAAS;AAAA,UACP,SAAS,CAAC,iBAAiB,eAAe;AAAA,UAC1C,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF,CAAC;;;AC9ED,IAAAC,iBAAgD;AAYzC,IAAM,uBAAuB;AAE7B,IAAM,yBAAqB,sBAAM;AAAA,EACtC,QAAQ;AAAA,IACN,oBAAgB,4BAGd,CAAC,EAAE,OAAO,EAAE,QAAQ,KAAK,EAAE,MAAM;AACjC,aAAO,OAAO,YAAY,EAAE,QAAQ,MAAM,OAAO,OAAO,wBAAwB;AAAA,QAC9E;AAAA,MACF,CAAC;AAAA,IACH,CAAC;AAAA,IACD,aAAS;AAAA,MACP,CAAC,EAAE,OAAO,EAAE,QAAQ,OAAO,EAAE,MAAM;AACjC,cAAM,QAAQ,OAAO,YAAY,EAAE,QAAQ;AAE3C,cAAM,WAAW,OAAO,IAAI,UAAU;AACtC,cAAM,aAAa,OAAO,IAAI,YAAY;AAE1C,cAAM,kBAAiB,qCAAU,SAC7B;AAAA,UACE,UAAU,SAAS;AAAA,UACnB,UAAU;AAAA,QACZ,IACA,CAAC;AAEL,eAAO,MAAM,OAAO,OAAO,OAAO;AAAA,UAChC,aAAa,yCAAY,UAAoB;AAAA,UAC7C,GAAG;AAAA,QACL,CAAC;AAAA,MACH;AAAA,IACF;AAAA,EACF;AAAA,EACA,SAAS;AAAA,IACP,YAAY,CAAC,EAAE,SAAS,MAAM,MAAM;AAElC,aAAO,QAAQ,OAAO,KAAK,EAAE,MAAM,QAAQ,UAAU,+BAAO,OAAO,CAAC;AAAA,IACtE;AAAA,IACA;AAAA,IACA,mBAAe;AAAA,MACb,CAAC,EAAE,QAAQ,MAAM,QAAQ;AAAA,MACzB,CAAC,EAAE,MAAM,MAAM;AACb,8BAAsB,KAAK;AAC3B,eAAO;AAAA,UACL,MAAM;AAAA,UACN,OAAO,MAAM;AAAA,QACf;AAAA,MACF;AAAA,IACF;AAAA,EACF;AAAA,EACA,QAAQ;AAAA,IACN,eAAe,CAAC,EAAE,QAAQ,MAAM,QAAQ,QAAQ,OAAO,YAAY,EAAE,QAAQ,WAAW;AAAA,EAC1F;AAAA,EACA,OAAO,CAAC;AACV,CAAC,EAAE,cAAc;AAAA,EACf,IAAI;AAAA,EACJ,SAAS,CAAC,EAAE,MAAM,OAAO;AAAA,IACvB,UAAU,MAAM,YAAY;AAAA,IAC5B,QAAQ,MAAM;AAAA,IACd,SAAS,MAAM;AAAA,IACf,aAAa;AAAA,EACf;AAAA,EACA,SAAS;AAAA,EACT,QAAQ;AAAA,IACN,SAAS;AAAA,MACP,MAAM,CAAC,eAAe;AAAA,MACtB,aAAa;AAAA,MACb,IAAI;AAAA,QACF,QAAQ;AAAA,UACN,WAAO,oBAAI,eAAe;AAAA,UAC1B,QAAQ;AAAA,UACR,SAAS;AAAA,QACX;AAAA,QACA,wBAAwB;AAAA,UACtB,WAAO,oBAAI,eAAe;AAAA,UAC1B,QAAQ;AAAA,UACR,SAAS;AAAA,QACX;AAAA,QACA,iCAAiC;AAAA,UAC/B,WAAO,oBAAI,eAAe;AAAA,UAC1B,QAAQ;AAAA,UACR,SAAS;AAAA,QACX;AAAA,MACF;AAAA,IACF;AAAA,IACA,YAAY;AAAA,MACV,MAAM,CAAC,oBAAoB,eAAe;AAAA,MAC1C,OAAO;AAAA,MACP,QAAQ;AAAA,QACN,IAAI;AAAA,QACJ,KAAK;AAAA,QACL,OAAO,CAAC,EAAE,QAAQ,OAAO;AAAA,UACvB,QAAQ,QAAQ;AAAA,UAChB,QAAQ,QAAQ,QAAQ,YAAY,EAAE,QAAQ;AAAA,QAChD;AAAA,QACA,QAAQ;AAAA,UACN,SAAS,CAAC,cAAc,eAAe;AAAA,QACzC;AAAA,QACA,SAAS;AAAA,UACP,SAAS,CAAC,iBAAiB,eAAe;AAAA,UAC1C,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,IACF;AAAA,IACA,mBAAmB;AAAA,MACjB,MAAM,CAAC,oBAAoB,eAAe;AAAA,MAC1C,OAAO;AAAA,MACP,QAAQ;AAAA,QACN,IAAI;AAAA,QACJ,KAAK;AAAA,QACL,OAAO,CAAC,EAAE,QAAQ,OAAO;AAAA,UACvB,QAAQ,QAAQ;AAAA,UAChB,MAAM;AAAA,QACR;AAAA,QACA,QAAQ;AAAA,UACN,SAAS,CAAC,cAAc,eAAe;AAAA,QACzC;AAAA,QACA,SAAS;AAAA,UACP,SAAS,CAAC,iBAAiB,eAAe;AAAA,UAC1C,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,IACF;AAAA,IACA,2BAA2B;AAAA,MACzB,IAAI;AAAA,QACF,wBAAwB;AAAA,UACtB,WAAO,oBAAI,eAAe;AAAA,UAC1B,QAAQ;AAAA,UACR,SAAS;AAAA,QACX;AAAA,QACA,QAAQ;AAAA,UACN,WAAO,oBAAI,eAAe;AAAA,UAC1B,QAAQ;AAAA,UACR,SAAS;AAAA,QACX;AAAA,MACF;AAAA,MACA,QAAQ;AAAA,QACN,IAAI;AAAA,QACJ,KAAK;AAAA,QACL,OAAO,CAAC,EAAE,QAAQ,OAAO;AAAA,UACvB,QAAQ,QAAQ;AAAA,UAChB,MAAM;AAAA,QACR;AAAA,QACA,QAAQ;AAAA,UACN,SAAS,CAAC,YAAY;AAAA,QACxB;AAAA,QACA,SAAS;AAAA,UACP,SAAS,CAAC,eAAe;AAAA,UACzB,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF,CAAC;;;ANxID,IAAM,gBACJ,CAAC,SACD,CAAC,EAAE,QAAQ,GAAqC,YAAkC;AAhCpF,MAAAC,KAAAC;AAiCI,UAAOA,OAAAD,MAAA,QAAQ,WAAR,gBAAAA,IAAgB,MAAM,UAAtB,OAAAC,MAA+B;AACxC;AAEF,IAAM,cACJ,CAAC,WACD,CAAC,EAAE,SAAS,MAAM,GAAiE,MAAyB;AAtC9G,MAAAD,KAAAC;AAuCK,WAAAD,MAAA,+BAAiC,aAAjC,gBAAAA,IAA2C,YAAW,YAAUC,MAAA,QAAQ,UAAR,gBAAAA,IAAe,OAAO,OAAO,YAAW;AAAA;AAEtG,IAAM,wBAAwB;AAE9B,IAAM,0BAAsB,sBAAM;AAAA,EACvC,QAAQ;AAAA,IACN,oBAAoB;AAAA,IACpB,aAAa;AAAA,IACb,sBAAsB;AAAA,IACtB,cAAc;AAAA,IACd,qBAAqB;AAAA,IACrB,mBAAmB;AAAA,IACnB,6BAAyB,4BAAY,UAAM,8CAA4B,CAAC;AAAA,EAC1E;AAAA,EACA,SAAS;AAAA,IACP,qBAAiB,uBAAO,CAAC,EAAE,QAAQ,MAAM,QAAQ,SAAS,EAAE,MAAM,eAAe,CAAC;AAAA,IAClF,kBAAkB,CAAC,EAAE,QAAQ,GAAG,EAAE,MAAM,QAAQ,MAAM,MAAyC;AAC7F,UAAI,CAAC,QAAQ,QAAQ;AACnB;AAAA,MACF;AACA,UAAI,CAAC,SAAS,wBAAwB,GAAG;AACvC;AAAA,MACF;AACA,UAAI,QAAQ,aAAa;AACvB;AAAA,MACF;AAEA,YAAM,mBAAe,oBAAQ,QAAQ,OAAO,UAAU,IAAI;AAC1D,UAAI,iBAAiB,QAAQ,OAAO,SAAS,GAAG;AAC9C;AAAA,MACF;AAEA,cAAQ,OAAO,YAAY,YAAY;AAAA,IACzC;AAAA,IACA,kBAAkB,CAAC,EAAE,QAAQ,GAAG,EAAE,KAAK,MAAqB;AAzEhE,UAAAD;AAyEmE,cAAAA,MAAA,QAAQ,WAAR,gBAAAA,IAAgB,KAAK;AAAA;AAAA,IACpF,eAAW,sBAAM,EAAE,MAAM,OAAO,CAAC;AAAA,IACjC,eAAW,+BAAe,CAAC,EAAE,SAAS,OAAO,SAAS,MAAM,MAAM;AAChE,UAAI,MAAM,eAAe,GAAG;AAC1B;AAAA,MACF;AAEA,YAAM,sBAAsB,QAAQ,MAAM,OAAO;AACjD,YAAM,qBAAqB,+BAAiC,aAAY,QAAQ,MAAM,OAAO,QAC1F;AAEH,YAAM,UAAU,oBAAoB,uBAAuB;AAE3D,YAAM,aAAa,MAAG;AAtF5B,YAAAA;AAsF+B,gBAAAA,MAAA,QAAQ,WAAR,gBAAAA,IAAgB,KAAK,QAAQ,MAAM,oBAAoB;AAAA;AAChF,WAAK,QAAQ,MAAM,UAAU,EAAE,SAAS,WAAW,CAAC;AAEpD,cAAQ,MAAM,EAAE,MAAM,QAAQ,GAAG,EAAE,OAAO,IAAK,CAAC;AAAA,IAClD,CAAC;AAAA,IACD,cAAU,uBAAO;AAAA,MACf,OAAO,CAAC,GAAG,EAAE,MAAM,MAAsC;AACvD,YAAI,OAAO;AACT,iBAAO;AAAA,QACT;AACA,eAAO,IAAI,0BAA0B,eAAe;AAAA,MACtD;AAAA,IACF,CAAC;AAAA,IACD,eAAe,CAAC,EAAE,QAAQ,GAAG,eAC3B,uBAAO,QAAQ,SAAS;AAAA,MACtB,MAAM;AAAA,MACN,OAAO,OAAO;AAAA,IAChB,CAAC;AAAA,IACH,oBAAoB,CAAC,EAAE,QAAQ,MAAM;AACnC,YAAM,YAAY,QAAQ,MAAM,OAAO,OAAO,wBAAwB;AAEtE,UAAI,CAAC,WAAW;AACd;AAAA,MACF;AAEA,UAAI;AAEJ,cAAQ,UAAU,MAAM;AAAA,QACtB,KAAK,YAAY;AAAA,QACjB,KAAK,YAAY;AAAA,QACjB,KAAK,YAAY;AAAA,QACjB,KAAK,YAAY;AAAA,QACjB,KAAK,YAAY;AAAA,QACjB,KAAK,YAAY;AACf,kBAAQ,IAAI,mBAAmB,UAAU,MAAM,UAAU,WAAY;AACrE;AAAA,QACF;AACE,kBAAQ,IAAI;AAAA,YACV;AAAA,YACA;AAAA,UACF;AAAA,MACJ;AAEA,cAAQ,QAAQ,KAAK;AAAA,QACnB,MAAM;AAAA,QACN;AAAA,MACF,CAAC;AAAA,IACH;AAAA,IACA,UAAU,CAAC,EAAE,QAAQ,MAAM;AAtI/B,UAAAA;AAuIM,YAAM,eAAe,IAAI,gBAAgB,EAAE,kBAAkB,IAAI,CAAC;AAClE,OAAAA,MAAA,QAAQ,WAAR,gBAAAA,IAAgB,KAAK,GAAG,QAAQ,UAAU,IAAI,YAAY;AAAA,IAC5D;AAAA,EACF;AAAA,EACA,QAAQ;AAAA,IACN,4BAA4B,CAAC,EAAE,QAAQ,MACrC,QAAQ,QAAQ,MAAM,OAAO,OAAO,WAAW,QAAQ,QAAQ,MAAM,OAAO,mBAAmB;AAAA,IACjG,eAAe,CAAC,EAAE,QAAQ,MAAG;AA9IjC,UAAAA,KAAAC,KAAA;AA8IoC,sBAAQ,YAAAA,OAAAD,MAAA,QAAQ,UAAR,gBAAAA,IAAe,WAAf,gBAAAC,IAAuB,WAAvB,mBAA+B,4BAA/B,mBAAwD,KAAK;AAAA;AAAA,IACrG,aAAa,CAAC,EAAE,QAAQ,MAAG;AA/I/B,UAAAD,KAAAC,KAAA;AA+IkC,sBAAQ,MAAAA,OAAAD,MAAA,QAAQ,UAAR,gBAAAA,IAAe,WAAf,gBAAAC,IAAuB,WAAvB,mBAA+B,MAAM;AAAA;AAAA,IAE3E,gCAA4B,oBAAI,CAAC,cAAc,2BAAuB,oBAAI,eAAe,CAAC,CAAC;AAAA,IAC3F,kBAAkB,cAAc,GAAG;AAAA,IACnC,YAAY,CAAC,EAAE,SAAS,MAAM,MAAM;AAClC,YAAM,WAAY,+BAAiC;AACnD,YAAM,SAAS,QAAQ,MAAM,OAAO;AAEpC,cACG,qCAAU,YAAW,cAAc,QAAQ,qCAAU,gBAAgB,KACrE,OAAO,WAAW,cAAc,QAAQ,OAAO,gBAAgB;AAAA,IAEpE;AAAA,IACA,YAAY,CAAC,EAAE,QAAQ,MAAG;AA5J9B,UAAAD;AA4JiC,sBAAQA,MAAA,QAAQ,UAAR,gBAAAA,IAAe,IAAI;AAAA;AAAA,IACxD,qBAAqB,CAAC,EAAE,QAAQ,MAAG;AA7JvC,UAAAA,KAAAC;AA6J0C,sBAAQA,OAAAD,MAAA,QAAQ,UAAR,gBAAAA,IAAe,4BAAf,gBAAAC,IAAwC,WAAW,iBAAiB;AAAA;AAAA,IAClH,eAAe,CAAC,EAAE,QAAQ,MAAM,QAAQ,QAAQ,WAAW;AAAA,IAE3D,gBAAY,mBAAG,KAAC,oBAAI,aAAa,GAAG,yBAAyB,cAAc,GAAG,CAAC,CAAC;AAAA,IAChF,sBAAkB,oBAAI,CAAC,0BAA0B,cAAc,WAAW,CAAC,CAAC;AAAA,IAC5E,uBAAmB,oBAAI,CAAC,2BAA2B,cAAc,WAAW,CAAC,CAAC;AAAA,IAC9E,eAAe,cAAc,uBAAuB;AAAA,IACpD,sBAAkB,oBAAI,CAAC,0BAA0B,cAAc,eAAe,CAAC,CAAC;AAAA,IAEhF,uBAAuB,YAAY,kBAAkB;AAAA,IACrD,wBAAwB,YAAY,oBAAoB;AAAA,IACxD,yBAAyB,YAAY,qBAAqB;AAAA,IAC1D,wBAAwB,YAAY,oBAAoB;AAAA,EAC1D;AAAA,EACA,OAAO,CAAC;AACV,CAAC,EAAE,cAAc;AAAA,EACf,IAAI;AAAA;AAAA,EAEJ,SAAS,CAAC;AAAA,EACV,SAAS;AAAA,EACT,IAAI;AAAA,IACF,sBAAsB;AAAA,MACpB,aAAS,uBAAO,qBAAqB,CAAC,EAAE,SAAS,MAAM,MAAG;AAnLhE,YAAAD,KAAAC,KAAA;AAmLoE;AAAA,UAC5D,MAAM;AAAA,UACN,QAAQ;AAAA,YACN,UAAU,MAAM;AAAA,YAChB,aAAa,KACXD,MAAA,QAAQ,WAAR,gBAAAA,IAAgB,UAAS,QAAQ,WAC7BC,MAAA,QAAQ,MAAM,4BAAd,gBAAAA,IAAuC,cAAc,aACrD,aAAQ,WAAR,mBAAgB,QACtB,GAAG,uBAAuB;AAAA,YAC1B,qBAAqB,QAAQ,MAAM,oBAAoB;AAAA,UACzD;AAAA,QACF;AAAA,OAAE;AAAA,IACJ;AAAA,IACA,qBAAqB;AAAA,MACnB,aAAS,uBAAO,qBAAqB;AAAA,QACnC,MAAM;AAAA,QACN,QAAQ,EAAE,UAAU,OAAO;AAAA,MAC7B,CAAC;AAAA,IACH;AAAA,IACA,eAAe;AAAA,MACb,aAAa;AAAA,MACb,aAAS,+BAAe,CAAC,EAAE,SAAS,MAAM,MAAM;AAC9C,gBAAQ,OAAO;AAAA,UACb,SAAS,MAAM;AAAA,QACjB,CAAC;AAGD,gBAAQ,MAAM,EAAE,MAAM,aAAa,CAAC;AAAA,MACtC,CAAC;AAAA,IACH;AAAA,IACA,qBAAqB;AAAA,IACrB,kBAAkB;AAAA,IAClB,SAAS;AAAA,MACP,aAAS,uBAAO,CAAC,EAAE,MAAM,OAAO;AAAA,QAC9B,SAAS;AAAA,UACP,WAAW,MAAM;AAAA,UACjB,MAAM,MAAM;AAAA,UACZ,UAAU,MAAM;AAAA,QAClB;AAAA,MACF,EAAE;AAAA,IACJ;AAAA,IACA,OAAO;AAAA,EACT;AAAA,EACA,QAAQ;AAAA,IACN,MAAM;AAAA,MACJ,QAAQ;AAAA,QACN,IAAI;AAAA,QACJ,KAAK;AAAA,QACL,QAAQ;AAAA,UACN,aAAS,uBAAO,EAAE,yBAAyB,CAAC,EAAE,MAAM,MAAM,MAAM,OAAO,CAAC;AAAA,QAC1E;AAAA,MACF;AAAA,MACA,IAAI;AAAA,QACF,MAAM;AAAA,UACJ,aAAS,uBAAO,CAAC,EAAE,MAAM,OAAO;AAAA,YAC9B,OAAO,MAAM;AAAA,YACb,aAAa,MAAM,eAAe;AAAA,YAClC,SAAS,MAAM;AAAA,YACf,SAAS;AAAA,cACP,WAAW;AAAA,YACb;AAAA,YACA,QAAQ,MAAM;AAAA,YACd,YAAY,MAAM,cAAc;AAAA,UAClC,EAAE;AAAA,UACF,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,IACF;AAAA,IACA,MAAM;AAAA,MACJ,WAAO,+BAAe,CAAC,EAAE,SAAS,SAAS,KAAK,MAAM;AAxP5D,YAAAD,KAAAC;AAyPQ,YAAI,CAAC,KAAK,YAAY,EAAE,SAAS,mBAAmB,GAAG;AACrD,kBAAQ,WAAW,qBAAqB;AAAA,YACtC,IAAI;AAAA,YACJ,UAAU;AAAA,YACV,OAAO;AAAA,cACL,WAAUA,OAAAD,MAAA,QAAQ,WAAR,gBAAAA,IAAgB,aAAhB,OAAAC,MAA4B;AAAA,cACtC,MAAM;AAAA,cACN,SAAS,QAAQ;AAAA,cACjB,QAAQ;AAAA,YACV;AAAA,UACF,CAAC;AAAA,QACH;AAAA,MACF,CAAC;AAAA,MACD,QAAQ;AAAA,QACN;AAAA,UACE,OAAO;AAAA,UACP,QAAQ;AAAA,QACV;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,SAAS;AAAA,QACX;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,SAAS;AAAA,YACP,MAAM,QAAQ,KAAK,+BAA+B;AAAA,YAClD;AAAA,cACE,MAAM;AAAA,cACN,QAAQ;AAAA,gBACN,OAAO,IAAI,mBAAmB,iCAAiC,4BAA4B;AAAA,cAC7F;AAAA,YACF;AAAA,UACF;AAAA,UACA,QAAQ;AAAA,QACV;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,OAAO,MAAM,MAAM,IAAI,EAAE;AAAA,UACxE,QAAQ;AAAA,QACV;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,OAAO,MAAM,MAAM,YAAY,EAAE;AAAA,UAChF,QAAQ;AAAA,QACV;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,OAAO,MAAM,MAAM,YAAY,EAAE;AAAA,UAChF,QAAQ;AAAA,QACV;AAAA,QACA;AAAA,UACE,OAAO;AAAA,UACP,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,OAAO,MAAM,MAAM,kBAAkB,EAAE;AAAA,UACtF,QAAQ;AAAA,QACV;AAAA,QACA;AAAA,UACE,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,OAAO,MAAM,MAAM,IAAI,EAAE;AAAA,UACxE,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,IACF;AAAA,IACA,OAAO;AAAA,MACL,MAAM;AAAA,MACN,MAAM;AAAA,MACN,QAAQ;AAAA,QACN,IAAI;AAAA,QACJ,KAAK;AAAA,QACL,OAAO,CAAC,EAAE,SAAS,KAAK,MAAG;AA5TnC,cAAAD;AA4TuC;AAAA,YAC7B,WAAUA,MAAA,QAAQ,WAAR,gBAAAA,IAAgB;AAAA,YAC1B,SAAS,QAAQ;AAAA,YACjB,QAAQ;AAAA,UACV;AAAA;AAAA,QACA,QAAQ;AAAA,UACN,SAAS;AAAA,QACX;AAAA,MACF;AAAA,MACA,IAAI;AAAA,QACF,cAAc;AAAA,UACZ,QAAQ;AAAA,UACR,SAAS;AAAA,QACX;AAAA,QACA,wBAAwB;AAAA,UACtB,aAAS,uBAAO,SAAS,CAAC,EAAE,MAAM,MAAM,KAAK;AAAA,QAC/C;AAAA,QACA,iCAAiC;AAAA,UAC/B,aAAS,uBAAO,SAAS,CAAC,EAAE,MAAM,MAAM,KAAK;AAAA,QAC/C;AAAA,QACA,MAAM;AAAA,UACJ;AAAA,YACE,OAAO;AAAA,YACP,SAAS;AAAA,UACX;AAAA,UACA;AAAA,YACE,OAAO;AAAA,YACP,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,MAAM,YAAY,EAAE;AAAA,YACnE,QAAQ;AAAA,UACV;AAAA,UACA;AAAA,YACE,OAAO;AAAA,YACP,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,MAAM,YAAY,EAAE;AAAA,YACnE,QAAQ;AAAA,UACV;AAAA,UACA;AAAA,YACE,OAAO;AAAA,YACP,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,MAAM,kBAAkB,EAAE;AAAA,YACzE,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IACA,aAAa;AAAA,MACX,MAAM;AAAA,MACN,QAAQ;AAAA,QACN,IAAI;AAAA,QACJ,KAAK;AAAA,QACL,OAAO,CAAC,EAAE,SAAS,KAAK,OAAO;AAAA,UAC7B,SAAS,QAAQ;AAAA,UACjB,QAAQ;AAAA,QACV;AAAA,QACA,QAAQ;AAAA,UACN,SAAS;AAAA,QACX;AAAA,MACF;AAAA,MACA,IAAI;AAAA,QACF,cAAc;AAAA,UACZ,QAAQ;AAAA,UACR,SAAS;AAAA,QACX;AAAA,QACA,MAAM;AAAA,UACJ;AAAA,YACE,OAAO;AAAA,YACP,SAAS;AAAA,UACX;AAAA,UACA;AAAA,YACE,OAAO;AAAA,YACP,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,MAAM,YAAY,EAAE;AAAA,YACnE,QAAQ;AAAA,UACV;AAAA,UACA;AAAA,YACE,OAAO;AAAA,YACP,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,MAAM,kBAAkB,EAAE;AAAA,YACzE,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,QACA,mBAAmB;AAAA,UACjB,aAAa;AAAA,UACb,aAAS,uBAAO,eAAe,CAAC,EAAE,MAAM,MAAM,KAAK;AAAA,UACnD,QAAQ;AAAA,QACV;AAAA,MACF;AAAA,MACA,SAAS;AAAA,MACT,QAAQ;AAAA,QACN,MAAM;AAAA,UACJ,IAAI;AAAA,YACF,4BAA4B;AAAA,cAC1B,aAAa;AAAA,cACb,aAAS,uBAAO,eAAe,CAAC,EAAE,MAAM,MAAM,KAAK;AAAA,cACnD,QAAQ;AAAA,YACV;AAAA,YACA,4BAA4B;AAAA,cAC1B,aAAa;AAAA,cACb,aAAS,uBAAO,eAAe,CAAC,EAAE,MAAM,MAAM,KAAK;AAAA,cACnD,QAAQ;AAAA,YACV;AAAA,UACF;AAAA,QACF;AAAA,QACA,kBAAkB;AAAA,UAChB,MAAM,CAAC,uBAAuB;AAAA,UAC9B,IAAI;AAAA,YACF,qBAAqB;AAAA,cACnB,aAAa;AAAA,cACb,QAAQ;AAAA,cACR,aAAS,uBAAO,eAAe,EAAE,MAAM,oBAAoB,CAAC;AAAA,YAC9D;AAAA,UACF;AAAA,QACF;AAAA,QACA,gBAAgB;AAAA,UACd,MAAM,CAAC,uBAAuB;AAAA,UAC9B,IAAI;AAAA,YACF,qBAAqB;AAAA,UACvB;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IACA,cAAc;AAAA,MACZ,MAAM;AAAA,MACN,QAAQ;AAAA,QACN,IAAI;AAAA,QACJ,KAAK;AAAA,QACL,OAAO,CAAC,EAAE,SAAS,KAAK,OAAO;AAAA,UAC7B,SAAS,QAAQ;AAAA,UACjB,QAAQ;AAAA,QACV;AAAA,QACA,QAAQ;AAAA,UACN,SAAS;AAAA,QACX;AAAA,MACF;AAAA,MACA,IAAI;AAAA,QACF,cAAc;AAAA,UACZ,QAAQ;AAAA,UACR,SAAS;AAAA,QACX;AAAA,QACA,MAAM;AAAA,UACJ;AAAA,YACE,OAAO;AAAA,YACP,SAAS;AAAA,UACX;AAAA,UACA;AAAA,YACE,OAAO;AAAA,YACP,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,MAAM,kBAAkB,EAAE;AAAA,YACzE,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IACA,eAAe;AAAA,MACb,MAAM;AAAA,MACN,QAAQ;AAAA,QACN,IAAI;AAAA,QACJ,KAAK;AAAA,QACL,OAAO,CAAC,EAAE,SAAS,KAAK,OAAO;AAAA,UAC7B,SAAS,QAAQ;AAAA,UACjB,QAAQ;AAAA,QACV;AAAA,QACA,QAAQ;AAAA,UACN,SAAS;AAAA,QACX;AAAA,MACF;AAAA,MACA,IAAI;AAAA,QACF,cAAc;AAAA,UACZ,QAAQ;AAAA,UACR,SAAS;AAAA,QACX;AAAA,QACA,MAAM;AAAA,UACJ;AAAA,YACE,OAAO;AAAA,YACP,SAAS;AAAA,UACX;AAAA,UACA;AAAA,YACE,OAAO;AAAA,YACP,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,MAAM,YAAY,EAAE;AAAA,YACnE,QAAQ;AAAA,UACV;AAAA,UACA;AAAA,YACE,OAAO;AAAA,YACP,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,MAAM,YAAY,EAAE;AAAA,YACnE,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IACA,UAAU;AAAA,MACR,MAAM;AAAA,MACN,WAAO,uBAAO,qBAAqB,EAAE,MAAM,WAAW,CAAC;AAAA,MACvD,IAAI;AAAA,QACF,MAAM;AAAA,UACJ;AAAA,YACE,OAAO;AAAA,YACP,SAAS,CAAC,sBAAsB,EAAE,MAAM,oBAAoB,QAAQ,EAAE,OAAO,MAAM,MAAM,IAAI,EAAE,CAAC;AAAA,YAChG,QAAQ;AAAA,UACV;AAAA,UACA;AAAA,YACE,WAAO,mBAAG,CAAC,cAAc,cAAc,4BAA4B,CAAC;AAAA,YACpE,SAAS;AAAA,UACX;AAAA,UACA;AAAA,YACE,OAAO;AAAA,YACP,SAAS;AAAA,UACX;AAAA,UACA;AAAA,YACE,OAAO;AAAA,YACP,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,MAAM,YAAY,EAAE;AAAA,YACnE,QAAQ;AAAA,UACV;AAAA,UACA;AAAA,YACE,OAAO;AAAA,YACP,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,MAAM,YAAY,EAAE;AAAA,YACnE,QAAQ;AAAA,UACV;AAAA,UACA;AAAA,YACE,OAAO;AAAA,YACP,SAAS,EAAE,MAAM,oBAAoB,QAAQ,EAAE,MAAM,kBAAkB,EAAE;AAAA,YACzE,QAAQ;AAAA,UACV;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IACA,OAAO;AAAA,MACL,MAAM;AAAA,MACN,IAAI;AAAA,QACF,MAAM;AAAA,UACJ,QAAQ;AAAA,UACR,SAAS;AAAA,QACX;AAAA,MACF;AAAA,IACF;AAAA,IACA,MAAM;AAAA,MACJ,MAAM;AAAA,MACN,MAAM;AAAA,IACR;AAAA,EACF;AACF,CAAC;;;AOtiBD,IAAAE,qBAAyB;AAIlB,SAAS,cAAc,MAAkD;AAC9E,UAAQ,KAAK,QAAQ;AAAA,IACnB,KAAK;AACH,aAAO;AAAA,IACT,KAAK;AACH,iBAAO,6BAAS,KAAK,CAAC,CAAC;AAAA,IACzB;AACE,aAAO,KAAK,OAAO,OAAO,EAAE,IAAI,2BAAQ,EAAE,KAAK,GAAG;AAAA,EACtD;AACF;AAEO,SAAS,iBAAiB;AAAA,EAC/B;AAAA,EACA;AAAA,EACA;AACF,GAIW;AACT,SAAQ,aAAa,WAAW,SAAS,KAAO,YAAY,WAAW,QAAQ,KAAM,cAAc;AACrG;;;ACrBO,SAAS,6BAA6B,GAAiC;AAJ9E,MAAAC;AAKE,WAAOA,MAAA,EAAE,QAAQ,UAAV,gBAAAA,IAAiB,OAAO,OAAO,eAAc;AACtD;AAEO,SAAS,yBAAyB,GAAiC;AAR1E,MAAAA,KAAAC,KAAA;AASE,QAAM,UAASD,MAAA,EAAE,QAAQ,UAAV,gBAAAA,IAAiB,OAAO;AAEvC,SAAO,iBAAiB;AAAA,IACtB,YAAWC,MAAA,iCAAQ,aAAR,gBAAAA,IAAkB;AAAA,IAC7B,YAAY,iCAAQ;AAAA,IACpB,WAAU,sCAAQ,aAAR,mBAAkB;AAAA,EAC9B,CAAC;AACH;;;ACwBO,IAAM,uBAAuB;AAAA,EAClC,OAAO;AAAA,EACP,aAAa;AAAA,EACb,cAAc;AAAA,EACd,eAAe;AACjB;;;AC7CA,wBAAwD;AASjD,IAAM,gBAAgB,MAAuB;AAClD,QAAM,aAAS,6BAAU;AACzB,QAAM,eAAW,+BAAY;AAE7B,QAAM,eAAe,OAAO,WAAW,cAAc,IAAI,gBAAgB,QAAI,mCAAgB;AAI7F,QAAM,0BACJ,OAAO,WAAW,eAAe,OAAO,QAAQ,OAAO,KAAK,WAAW;AAEzE,SAAO;AAAA,IACL,MAAM;AAAA,IACN,MAAM;AAAA,IACN,MAAM,CAAC,SAAiB,OAAO,KAAK,IAAI;AAAA,IACxC,SAAS,CAAC,SACR,0BAA0B,OAAO,QAAQ,aAAa,MAAM,IAAI,IAAI,IAAI,OAAO,QAAQ,IAAI;AAAA,IAC7F,YAAY,MAAc;AACxB,gCAA0B,OAAO,QAAQ,UAAU,MAAM,IAAI,IAAI,IAAI,OAAO,KAAK,MAAM,CAAC,CAAC;AAAA,IAC3F;AAAA,IACA,UAAU,MAAM;AAAA,IAChB,cAAc,MAAM;AAAA,EACtB;AACF;;;AChCA,IAAAC,gBAA0C;;;ACA1C,IAAAC,cAAuD;AAIhD,IAAM,+BAA+B,CAAC,qBAAqB,qBAAqB,cAAc;AAmErG,SAAS,cAAc,MAAc;AACnC,aAAO,sCAAqB,8BAAiB,IAAI,CAAC;AACpD;AASO,SAAS,kBAAkB,QAAyB,WAAmB,KAAkB;AAC9F,QAAM,qBAAqB,cAAc,QAAQ;AAKjD,WAAS,+CAA+C,MAAc;AACpE,UAAM,iBAAiB,IAAI,IAAI,MAAM,OAAO,SAAS,MAAM;AAC3D,UAAM,sBAAsB,OAAO,aAAa;AAEhD,iCAA6B,QAAQ,SAAO;AAC1C,YAAM,aAAa,oBAAoB,IAAI,GAAG;AAC9C,UAAI,YAAY;AACd,uBAAe,aAAa,IAAI,KAAK,UAAU;AAAA,MACjD;AAAA,IACF,CAAC;AAED,WAAO,GAAG,eAAe,QAAQ,GAAG,eAAe,MAAM;AAAA,EAC3D;AAEA,WAAS,MAAM,MAAe,OAAiB;AAC7C,UAAM,cAAc,sBAAS,SAAS;AAEtC,QAAI,CAAC,aAAa;AAChB,YAAM,IAAI,MAAM,gGAAgG;AAAA,IAClH;AAEA,UAAM,iBAAiB,cAAc,WAAW;AAEhD,WAAO,cAAc,GAAG,kBAAkB,GAAG,cAAc,EAAE,MAAM,cAAc,OAAO,SAAS,CAAC;AAAA,EACpG;AAEA,WAAS,MAAM,eAAuB;AACpC,WAAO,kBAAkB,QAAQ,GAAG,kBAAkB,GAAG,cAAc,aAAa,CAAC,EAAE;AAAA,EACzF;AAEA,WAAS,KAAK,MAAc;AAC1B,UAAM,iBAAiB,+CAA+C,IAAI;AAC1E,WAAO,OAAO,KAAK,cAAc;AAAA,EACnC;AAEA,WAAS,QAAQ,MAAc;AAC7B,UAAM,iBAAiB,+CAA+C,IAAI;AAC1E,WAAO,OAAO,QAAQ,cAAc;AAAA,EACtC;AAEA,WAAS,YAAY,MAAc;AACjC,UAAM,iBAAiB,+CAA+C,IAAI;AAC1E,WAAO,OAAO,YAAY,cAAc;AAAA,EAC1C;AAEA,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA,MAAM,OAAO;AAAA,IACb,MAAM,OAAO;AAAA,IACb;AAAA,IACA;AAAA,IACA;AAAA,IACA,UAAU,OAAO;AAAA,IACjB,cAAc,OAAO;AAAA,IACrB,UAAU;AAAA,EACZ;AACF;;;ADrHS;AAvBF,IAAM,yBAAqB,6BAAkC,IAAI;AAEjE,SAAS,iBAAiB;AAC/B,QAAM,UAAM,0BAAW,kBAAkB;AAEzC,MAAI,CAAC,KAAK;AACR,UAAM,IAAI,MAAM,oFAAoF;AAAA,EACtG;AAEA,SAAO;AACT;AAEO,SAAS,OAAO;AAAA,EACrB;AAAA,EACA;AAAA,EACA;AACF,GAIG;AACD,QAAM,cAAc,kBAAkB,QAAQ,QAAQ;AAEtD,SAAO,4CAAC,mBAAmB,UAAnB,EAA4B,OAAO,aAAc,UAAS;AACpE;;;AE3BA,IAAAC,gBAAqC;AAIrC,IAAM,eAAe;AANrB;AASA,IAAM,gBAAN,MAA+C;AAAA,EAO7C,YAAY,MAAe;AAN3B,SAAS,OAAO;AAChB,SAAS,OAAO;AAEhB;AACA,mCAAsC,oBAAI,IAAI;AAG5C,UAAM,SAAS,OAAO,WAAW,cAAc,eAAe,OAAO,SAAS;AAE9E,uBAAK,MAAO,IAAI,IAAI,sBAAQ,KAAK,MAAM;AAAA,EACzC;AAAA,EAEA,KAAK,MAAc;AACjB,UAAM,SAAS,IAAI,IAAI,mBAAK,MAAK,SAAS,CAAC;AAC3C,WAAO,WAAW;AAElB,uBAAK,MAAO;AACZ,SAAK,KAAK;AAAA,EACZ;AAAA,EAEA,QAAQ,MAAc;AACpB,SAAK,KAAK,IAAI;AAAA,EAChB;AAAA,EAEA,YAAY,MAAc;AACxB,SAAK,KAAK,IAAI;AAAA,EAChB;AAAA,EAEA,WAAW;AACT,WAAO,mBAAK,MAAK;AAAA,EACnB;AAAA,EAEA,eAAe;AACb,WAAO,mBAAK,MAAK;AAAA,EACnB;AAAA,EAEA,UAAU,UAAsB;AAC9B,uBAAK,YAAW,IAAI,QAAQ;AAE5B,WAAO,MAAM,mBAAK,YAAW,OAAO,QAAQ;AAAA,EAC9C;AAAA,EAEA,OAAO;AACL,uBAAK,YAAW,QAAQ,cAAY,SAAS,mBAAK,KAAI,CAAC;AAAA,EACzD;AAAA,EAEA,cAAc;AACZ,WAAO,mBAAK;AAAA,EACd;AACF;AA9CE;AACA;AA+CF,IAAM,gBAAgB,IAAI,cAAc,GAAG;AAEpC,IAAM,mBAAmB,MAAuB;AACrD,QAAM,UAAM;AAAA,IACV,cAAc,UAAU,KAAK,aAAa;AAAA,IAC1C,cAAc,YAAY,KAAK,aAAa;AAAA,EAC9C;AAEA,SAAO;AAAA,IACL,MAAM,cAAc;AAAA,IACpB,MAAM,cAAc;AAAA,IACpB,UAAU,MAAM,IAAI;AAAA,IACpB,MAAM,cAAc,KAAK,KAAK,aAAa;AAAA,IAC3C,SAAS,cAAc,QAAQ,KAAK,aAAa;AAAA,IACjD,cAAc,MAAM,IAAI;AAAA,IACxB,aAAa,cAAc,YAAY,KAAK,aAAa;AAAA,EAC3D;AACF;;;AC9EA,IAAAC,gBAAkD;AAClD,YAAuB;AA6BhB,SAAS,0BACd,aACA;AACA,QAAM,eAAqB,oBAA2B,IAAI;AAC1D,QAAM,mBAAmB,aAAa;AAEtC,WAAS,SAAS,EAAE,UAAU,SAAS,GAAkD;AACvF,WAAa;AAAA,MACX;AAAA,MACA;AAAA,QACE,OAAO;AAAA,MACT;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAEA,WAAS,cAAc;AAIvB,WAASC,YAAW,oBAA6B,OAAoB;AACnE,UAAM,WAAiB,iBAAW,YAAY;AAE9C,QAAI,CAAC,qBAAqB,CAAC,UAAU;AACnC,YAAM,IAAI;AAAA,QACR,yBAAyB,SAAS,WAAW,4BAA4B,SAAS,WAAW;AAAA,MAC/F;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAEA,WAASC,aAAe,UAA+C,SAAsC;AAC3G,UAAMC,SAAQF,YAAW;AACzB,eAAO,cAAAG,aAAmBD,QAAsB,UAAU,OAAO;AAAA,EACnE;AAEA,SAAO;AAAA,IACL;AAAA,IACA,aAAaF;AAAA,IACb,aAAAC;AAAA,EACF;AACF;;;AC3DO,IAAM,kBAAkB,0BAAgD,iBAAiB;AAEhG,SAAS,cAA8D,MAAc;AACnF,SAAO,gBAAgB,YAAY,WAAS,MAAM,SAAS,IAAI,CAAgB;AACjF;AAEO,IAAM,qBAAqB,MAAM,cAAmC,OAAO;AAC3E,IAAM,2BAA2B,MAAM,cAAyC,aAAa;AAC7F,IAAM,4BAA4B,MAAM,cAA0C,cAAc;AAChG,IAAM,6BAA6B,MAAM,cAA2C,eAAe;AAEnG,IAAM,2BAA2B,MACtC,gBAAgB,YAAY,WAAS,MAAM,QAAQ,uBAAuB;;;ACxB5E,IAAAG,gBAA0C;AAWnC,IAAM,wBAAoB,6BAAsC;AAAA,EACrE,SAAS;AAAA,EACT,UAAU,WAAS;AAAA,EACnB,WAAW;AACb,CAAC;AAEM,SAAS,YAAY,MAA0B;AACpD,QAAM,UAAM,0BAAW,iBAAiB;AAExC,MAAI,CAAC,KAAK;AACR,UAAM,IAAI;AAAA,MACR;AAAA,IACF;AAAA,EACF;AAEA,QAAM,EAAE,SAAS,WAAW,SAAS,IAAI;AAEzC,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA,IAAI,SAAS;AACX,aAAO,SAAS,IAAI;AAAA,IACtB;AAAA,EACF;AACF;;;ACpCA,IAAAC,sBAAyB;AACzB,oBAAuB;AACvB,uBAAsC;;;AEFtC,SAASC,0CACPC,sBACAC,iBACA,EAAA,2BAA6B,KAA3BC,IAAoC,CAAA,GACtC;AACA,SAAO,SAASC,YAAYC,OAAU;AACpCJ,6BAAoB,QAApBA,yBAAoB,UAApBA,qBAAuBI,KAAH;AAEpB,QAAIF,6BAA6B,SAAS,CAAGE,MAA4BC,iBACvE,QAAOJ,oBAAP,QAAOA,oBAAP,SAAA,SAAOA,gBAAkBG,KAAH;;;;;AFI5B,IAAAE,qBAOO;AACP,wBAAqB;AACrB,IAAAC,SAAuB;;;AGtBvB,yBAAyB;AACzB,IAAAC,iBAAqB;AAErB,IAAAC,SAAuB;;;ACOvB,IAAM,gBAA+G;AAAA,EACnH,YAAY,CAAC,iCAAiC,QAAQ;AAAA,EACtD,YAAY,CAAC,+BAA+B,QAAQ;AAAA,EACpD,iBAAiB;AAAA,EACjB,mBAAmB;AAAA,EACnB,mBAAmB;AAAA,EACnB,sBAAsB;AACxB;AAIA,IAAM,mBAAmB,CAAC,YAAsB;AAC9C,MAAI;AACJ,MAAI,gBAAgB,MAAM;AACxB,UAAM,YAAY,IAAI,KAAK,WAAW,MAAM,EAAE,OAAO,QAAQ,MAAM,cAAc,CAAC;AAClF,wBAAoB,UAAU,OAAO,OAAO;AAAA,EAC9C,OAAO;AACL,wBAAoB,QAAQ,KAAK,IAAI;AAAA,EACvC;AAEA,SAAO;AACT;AAOO,IAAM,4BAA4B,CAAC,EAAE,QAAQ,kBAAkB,MAAsC;AAC1G,QAAM,OAA2B,CAAC;AAElC,MAAI,CAAC,qBAAqB,OAAO,KAAK,iBAAiB,EAAE,WAAW,GAAG;AACrE,WAAO;AAAA,MACL;AAAA,MACA,SAAS;AAAA,IACX;AAAA,EACF;AAGA,QAAM,qBAAoB,uDAAmB,eAAc;AAE3D,QAAM,WAAW,OAAO,QAAQ,iBAAiB,EAC9C,OAAO,OAAM,oBAAoB,EAAE,CAAC,MAAM,eAAe,IAAK,EAC9D,OAAO,CAAC,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC,EACrB,IAAI,CAAC,CAAC,CAAC,MAAM;AACZ,UAAM,QAAQ;AACd,SAAK,KAAK,KAAK;AACf,UAAM,WAAW,cAAc,KAAK;AAEpC,QAAI,MAAM,QAAQ,QAAQ,GAAG;AAC3B,YAAM,CAAC,KAAK,YAAY,IAAI;AAC5B,aAAO,IAAI,QAAQ,IAAI,YAAY,KAAK,OAAO,CAA2B,CAAW;AAAA,IACvF;AACA,WAAO;AAAA,EACT,CAAC;AAEH,QAAM,oBAAoB,iBAAiB,QAAQ;AAEnD,SAAO;AAAA,IACL;AAAA,IACA,SAAS,8BAA8B,iBAAiB;AAAA,EAC1D;AACF;;;ADrDO,IAAM,cAAc,CAAC,cAAqC;AAnBjE,MAAAC;AAoBE,QAAM,YAAQ,6BAAS;AACvB,QAAM,oBAAmBA,MAAA,MAAM,4BAAN,gBAAAA,IAA+B,aAAa;AACrE,QAAM,EAAE,cAAc,qBAAqB,aAAa,GAAG,OAAO,IAAI,oBAAoB,CAAC;AAE3F,QAAM;AAAA,IACJ,oBAAoB;AAAA,IACpB,sBAAsB;AAAA,IACtB,sBAAsB;AAAA,IACtB,mBAAmB;AAAA,IACnB;AAAA,EACF,IAAI,aAAa,CAAC;AAElB,QAAM,aAAmB;AAAA,IACvB,CAAC,QAA4B;AAjCjC,UAAAA,KAAAC,KAAA;AAqCM,UAAI,IAAI,YAAY;AAClB,YAAI,OAAO,OAAO,2BAAK,UAAU,EAAE,SAAS,GAAG;AAC7C,gBAAM,EAAE,SAAS,KAAK,IAAI,0BAA0B;AAAA,YAClD;AAAA,YACA,mBAAmB,IAAI;AAAA,UACzB,CAAC;AAED,eAAID,MAAA,IAAI,eAAJ,gBAAAA,IAAgB,YAAY;AAC9B,mBAAO,iBAAiB,SAAS,IAAI;AAAA,UACvC;AAEA,iBAAO,kBAAkB,SAAS,IAAI;AAAA,QACxC;AAAA,MACF;AAKA,YAAIC,MAAA,2BAAK,aAAL,gBAAAA,IAAe,WAAU,QAAQ;AACnC,cAAM,OAAO,IAAI,SAAS;AAC1B,cAAM,QAAQ,KAAK,IAAI,SAAO,IAAI,YAAY,GAAG,CAAC,EAAE,KAAK,GAAG;AAC5D,eAAO,kBAAkB,OAAO,IAAI;AAAA,MACtC;AAKA,YAAI,gCAAK,aAAL,mBAAe,WAAU,QAAQ;AACnC,cAAM,OAAO,IAAI,SAAS;AAC1B,cAAM,QAAQ,KAAK,IAAI,SAAO,IAAI,YAAY,GAAG,CAAC,EAAE,KAAK,GAAG;AAC5D,eAAO,oBAAoB,OAAO,IAAI;AAAA,MACxC;AAKA,aAAO,oBAAoB;AAAA,IAC7B;AAAA,IACA,CAAC,SAAS;AAAA,EACZ;AAEA,QAAM,mBAAyB,eAAQ,MAAM;AAC3C,WAAO,CAAC,aAAqB;AAC3B,aAAO,MAAM,OAAO,OAAO,iBAAiB,UAAU;AAAA,QACpD,cAAc;AAAA,QACd;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EACF,GAAG,CAAC,UAAU,CAAC;AAEf,SAAO;AAAA,IACL;AAAA,EACF;AACF;AAEA,IAAM,MAAM,CAAC,GAAwB,SAAiB,KAAK,MAAM,GAAG,EAAE,OAAO,CAAC,GAAG,MAAM,uBAAI,IAAI,CAAC;AAEhG,IAAM,aAAa;AAAA,EACjB,kBAAkB;AAAA,IAChB,QAAQ;AAAA,MACN,iBAAiB;AAAA,MACjB,cAAc;AAAA,MACd,WAAW;AAAA,MACX,aAAa;AAAA,QACX,cAAc;AAAA,QACd,aAAa;AAAA,QACb,iBAAiB;AAAA,QACjB,gBAAgB;AAAA,QAChB,OAAO;AAAA,QACP,MAAM;AAAA,QACN,uBAAuB;AAAA,QACvB,QAAQ;AAAA,QACR,OAAO;AAAA,QACP,aAAa;AAAA,QACb,UAAU;AAAA,QACV,cAAc;AAAA,QACd,WAAW;AAAA,QACX,UAAU;AAAA,MACZ;AAAA,MACA,UAAU;AAAA,QACR,QAAQ;AAAA,QACR,aAAa;AAAA,QACb,OAAO;AAAA,QACP,gBAAgB;AAAA,QAChB,YAAY;AAAA,QACZ,mBAAmB;AAAA,QACnB,OAAO;AAAA,QACP,aAAa;AAAA,QACb,WAAW;AAAA,QACX,iBAAiB;AAAA,QACjB,cAAc;AAAA,QACd,aAAa;AAAA,QACb,YAAY;AAAA,QACZ,QAAQ;AAAA,QACR,YAAY;AAAA,QACZ,cAAc;AAAA,MAChB;AAAA,IACF;AAAA,EACF;AACF;;;AExIA,IAAAC,SAAuB;AAEhB,SAAS,gBAAgB,MAAuB;AACrD,SAAa,sBAAe,IAAI,KAAK,KAAK,SAAe;AAC3D;;;ACJA,wBAAwC;AACxC,IAAAC,SAAuB;AAmCjB,IAAAC,sBAAA;AApBN,IAAM,OAAuB,CAAC,GAAG,CAAC;AAClC,IAAM,UAA0B,CAAC,IAAI,EAAE;AAEhC,IAAM,qBAAqB;AAClC,IAAM,kCAAkC;AAUjC,IAAM,WAAiB,kBAA4C,SAASC,UAAS,OAAO,KAAK;AACtG,QAAM,EAAE,QAAQ,QAAQ,YAAY,GAAG,KAAK,IAAI;AAChD,QAAM,gBAAgB,OAAO,WAAW;AAExC,MAAI,eAAe;AACjB,WACE;AAAA,MAAC;AAAA;AAAA,QACE,GAAG;AAAA,QACJ;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA;AAAA,IACF;AAAA,EAEJ;AAEA,SACE;AAAA,IAAC;AAAA;AAAA,MACE,GAAG;AAAA,MACJ;AAAA,MACA;AAAA,MACA;AAAA;AAAA,EACF;AAEJ,CAAC;AAKD,IAAM,mBAAyB;AAAA,EAC7B,SAASA,UAAS,OAAO,KAAK;AAC5B,UAAM,EAAE,SAAS,oBAAoB,aAAa,OAAO,GAAG,KAAK,IAAI;AAErE,UAAM,WAAiB,cAAyB,IAAI;AAEpD,IAAM,2BAAoB,KAAK,MAAM,SAAS,SAA6B,CAAC,CAAC;AAG7E,IAAM,iBAAU,MAAM;AApE1B,UAAAC,KAAAC;AAqEM,UAAI,OAAO,MAAM,KAAK,EAAE,WAAW,UAAU,YAAY;AACvD,SAAAA,OAAAD,MAAA,SAAS,YAAT,gBAAAA,IAAkB,SAAlB,gBAAAC,IAAwB;AAAA,MAC1B;AAAA,IACF,GAAG,CAAC,MAAM,OAAO,QAAQ,UAAU,CAAC;AAEpC,WACE;AAAA,MAAC,kBAAAC;AAAA,MAAA;AAAA,QACC,KAAK;AAAA,QACJ,GAAG;AAAA,QACJ,2BAAuB;AAAA;AAAA,IACzB;AAAA,EAEJ;AACF;AAMA,IAAM,oBAA0B;AAAA,EAC9B,SAASH,UAAS,OAAO,KAAK;AAC5B,UAAM;AAAA,MACJ,WAAW;AAAA,MACX;AAAA,MACA,SAAS;AAAA,MACT,aAAa;AAAA,MACb,wBAAwB;AAAA,MACxB,GAAG;AAAA,IACL,IAAI;AAEJ,UAAM,WAAiB,cAAyB,IAAI;AACpD,UAAM,CAAC,gBAAgB,iBAAiB,IAAU,gBAAyB,MAAM,YAAY,OAAO,OAAO;AAC3G,UAAM,CAAC,YAAY,aAAa,IAAU,gBAAS,KAAK;AAExD,UAAM,YAAY,MAAM,SAAS,kBAAkB,SAAS;AAG5D,IAAM,2BAAoB,KAAK,MAAM,SAAS,SAA6B,CAAC,CAAC;AAM7E,IAAM,uBAAgB,MAAM;AAC1B,UAAI,SAAS,kBAAkB,SAAS,SAAS;AAC/C;AAAA,MACF;AACA,wBAAkB,SAAO,sBAAsB,KAAK,QAAQ,CAAC;AAAA,IAC/D,GAAG,CAAC,MAAM,KAAK,CAAC;AAQhB,IAAM,iBAAU,MAAM;AACpB,eAAS,oBAAoB;AAC3B,YAAI,CAAC,UAAU,GAAG;AAChB;AAAA,QACF;AACA,0BAAkB,SAAO,sBAAsB,KAAK,QAAQ,CAAC;AAAA,MAC/D;AAEA,eAAS,iBAAiB,mBAAmB,mBAAmB,EAAE,SAAS,KAAK,CAAC;AACjF,aAAO,MAAM,SAAS,oBAAoB,mBAAmB,iBAAiB;AAAA,IAChF,GAAG,CAAC,CAAC;AAGL,IAAM,iBAAU,MAAM;AA1I1B,UAAAC,KAAAC;AA2IM,UAAI,OAAO,MAAM,KAAK,EAAE,WAAW,UAAU,YAAY;AACvD,SAAAA,OAAAD,MAAA,SAAS,YAAT,gBAAAA,IAAkB,SAAlB,gBAAAC,IAAwB;AAAA,MAC1B;AAAA,IACF,GAAG,CAAC,MAAM,OAAO,QAAQ,UAAU,CAAC;AAEpC,WACE;AAAA,MAAC;AAAA;AAAA,QACC,0BAAsB;AAAA,QACtB,OAAO;AAAA,QAGP;AAAA,uDAAC,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA,SAKR;AAAA,UACA;AAAA,YAAC,kBAAAC;AAAA,YAAA;AAAA,cACC,4BAAwB;AAAA,cACxB,KAAK;AAAA,cACJ,GAAG;AAAA,cACJ,SAAS,WAAS;AAhK5B,oBAAAF;AAkKY,oBAAI,SAAS,SAAS;AACpB,wBAAM,QAAQ,KAAK,IAAI,SAAS,QAAQ,MAAM,QAAQ,SAAS,CAAC;AAChE,wBAAM,MAAM,SAAS,QAAQ,MAAM;AACnC,2BAAS,QAAQ,kBAAkB,OAAO,GAAG;AAC7C,oCAAkB,CAAC,OAAO,GAAG,CAAC;AAAA,gBAChC;AACA,iBAAAA,MAAA,6BAAM,YAAN,gBAAAA,IAAA,WAAgB;AAAA,cAClB;AAAA,cACA,QAAQ,WAAS;AA1K3B,oBAAAA;AA2KY,kCAAkB,CAAC,IAAI,EAAE,CAAC;AAC1B,iBAAAA,MAAA,6BAAM,WAAN,gBAAAA,IAAA,WAAe;AAAA,cACjB;AAAA,cACA,aAAa,WAAS;AA9KhC,oBAAAA;AA+KY,oBAAI,CAAC,UAAU,GAAG;AAChB,gCAAc,IAAI;AAAA,gBACpB;AACA,iBAAAA,MAAA,MAAM,gBAAN,gBAAAA,IAAA,YAAoB;AAAA,cACtB;AAAA,cACA,cAAc,WAAS;AApLjC,oBAAAA;AAqLY,8BAAc,KAAK;AACnB,iBAAAA,MAAA,MAAM,iBAAN,gBAAAA,IAAA,YAAqB;AAAA,cACvB;AAAA,cACA,OAAO;AAAA,gBACL,GAAG;AAAA,gBACH,UAAU,sBAAsB,qBAAqB;AAAA,gBACrD,OAAO,qBAAqB,qBAAqB;AAAA,cACnD;AAAA;AAAA,UACF;AAAA,UACA;AAAA,YAAC;AAAA;AAAA,cACC,WAAW;AAAA,cACX,eAAW;AAAA,cACX,OAAO;AAAA,cAEN,gBAAM,KAAK,EAAE,OAAO,CAAC,EAAE,IAAI,CAAC,GAAG,MAAM;AAnMhD,oBAAAA,KAAAC;AAoMY,sBAAM,YAAY,cAAc,CAAC,UAAU;AAC3C,sBAAM,WAAW,eAAe,CAAC,MAAM,eAAe,CAAC,KAAK,eAAe,CAAC,MAAM;AAClF,sBAAM,eAAcD,MAAA,eAAe,CAAC,MAAhB,OAAAA,MAAqB,OAAO,OAAMC,MAAA,eAAe,CAAC,MAAhB,OAAAA,MAAqB,MAAM;AAEjF,uBACE,6CAAO,iBAAN,EACE,iBAAO;AAAA,kBACN,OAAO,OAAO,MAAM,KAAK,EAAE,CAAC,KAAK;AAAA,kBACjC,QAAQ,YAAY,YAAY,WAAW,WAAW,aAAa,aAAa;AAAA,kBAChF,OAAO;AAAA,gBACT,CAAC,KALkB,eAAe,CAAC,EAMrC;AAAA,cAEJ,CAAC;AAAA;AAAA,UACH;AAAA;AAAA;AAAA,IACF;AAAA,EAEJ;AACF;AAKA,SAAS,sBAAsB,KAAqB,UAA6C;AA3NjG,MAAAD,KAAAC,KAAA;AA4NE,MAAI,UAAoE;AAAA,KACtEA,OAAAD,MAAA,SAAS,YAAT,gBAAAA,IAAkB,mBAAlB,OAAAC,MAAoC;AAAA,KACpC,oBAAS,YAAT,mBAAkB,iBAAlB,YAAkC;AAAA,KAClC,oBAAS,YAAT,mBAAkB,uBAAlB,YAAwC;AAAA,EAC1C;AAGA,MAAI,IAAI,CAAC,MAAM,QAAQ,CAAC,KAAK,IAAI,CAAC,MAAM,QAAQ,CAAC,GAAG;AAClD,WAAO;AAAA,EACT;AAGA,MAAI,QAAQ,CAAC,MAAM,KAAK,QAAQ,CAAC,MAAM,GAAG;AACxC,YAAQ,CAAC,IAAI;AAAA,EACf;AAIA,MAAI,QAAQ,CAAC,MAAM,QAAQ,CAAC,GAAG;AAC7B,QAAI,QAAQ,CAAC,IAAI,KAAK,IAAI,CAAC,MAAM,QAAQ,CAAC,KAAK,IAAI,CAAC,MAAM,QAAQ,CAAC,IAAI,GAAG;AACxE,gBAAU,CAAC,QAAQ,CAAC,IAAI,GAAG,QAAQ,CAAC,GAAG,UAAU;AAAA,IACnD,WAAW,SAAO,cAAS,YAAT,mBAAkB,MAAM,QAAQ,CAAC,QAAO,aAAa;AACrE,gBAAU,CAAC,QAAQ,CAAC,GAAG,QAAQ,CAAC,IAAI,GAAG,UAAU;AAAA,IACnD,WAAW,QAAQ,CAAC,KAAK,oBAAoB;AAC3C,gBAAU,CAAC,QAAQ,CAAC,IAAI,GAAG,QAAQ,CAAC,GAAG,UAAU;AAAA,IACnD;AAAA,EACF;AAEA,iBAAS,YAAT,mBAAkB,kBAAkB,QAAQ,CAAC,GAAG,QAAQ,CAAC,IAAG,aAAQ,CAAC,MAAT,YAAc;AAE1E,SAAO,CAAC,QAAQ,CAAC,GAAG,QAAQ,CAAC,CAAC;AAChC;AAEA,IAAM,eAAe;AAAA,EACnB,UAAU;AAAA,EACV,YAAY;AACd;AAEA,IAAM,aAAa;AAAA,EACjB,SAAS;AAAA,EACT,YAAY;AAAA,EACZ,SAAS;AAAA,EACT,SAAS;AAAA,EACT,YAAY;AAAA,EACZ,OAAO;AAAA,EACP,UAAU;AAAA,EACV,OAAO;AAAA,EACP,YAAY;AAAA,EACZ,QAAQ;AAAA;AAAA,EAER,QAAQ;AAAA,EACR,eAAe;AACjB;AAEA,IAAM,sBAAsB;AAAA,EAC1B,QAAQ;AAAA,EACR,eAAe;AACjB;;;AC/PO,IAAM,eAAe;AAAA,EAC1B,SAAS;AAAA,EACT,OAAO;AAAA,EACP,MAAM;AAAA,EACN,SAAS;AAAA,EACT,MAAM;AACR;AAIO,IAAM,iBAAiB;AAAA,EAC5B,OAAO;AAAA,EACP,SAAS;AACX;;;AP6UI,IAAAE,sBAAA;AA7TJ,IAAM,eAAqB,qBAAiD,IAAI;AAChF,IAAM,kBAAkB,MAAY,kBAAW,YAAY;AAM3D,IAAM,kBAAkB,MAAM;AAC5B,QAAM,SAAS,gBAAgB,oBAAoB;AAEnD,SAAO;AAAA,IACL;AAAA,EACF;AACF;AAEA,IAAM,mBAAmB,CAAC,EAAE,KAAK,MAA2C;AAC1E,QAAM,WAAW,gBAAgB,sBAAsB,IAAI,CAAC;AAE5D,SAAO;AAAA,IACL;AAAA,EACF;AACF;AAEA,IAAM,6BAA6B,CAAC,SAAiC;AACnE,MAAI,SAAS,cAAc,SAAS,qBAAqB,SAAS,qBAAqB,SAAS,eAAe;AAC7G,WAAO;AAAA,EACT;AACA,MAAI,SAAS,gBAAgB;AAC3B,WAAO;AAAA,EACT;AACA,MAAI,SAAS,eAAe;AAC1B,WAAO;AAAA,EACT;AACA,MAAI,SAAS,QAAQ;AACnB,WAAO;AAAA,EACT;AAEA,SAAO;AACT;AAKA,IAAM,gBAAgB,CAAC,EAAE,KAAK,MAA2C;AACvE,QAAM,EAAE,SAAS,IAAI,iBAAiB,EAAE,KAAK,CAAC;AAC9C,QAAM,WAAW,gBAAgB,sBAAsB,IAAI,CAAC;AAM5D,MAAI,QAAqB,aAAa;AAEtC,MAAI,CAAC,UAAU;AACb,YAAQ,aAAa;AAAA,EACvB;AAEA,UAAQ,qCAAU,MAAM;AAAA,IACtB,KAAK;AACH,cAAQ,aAAa;AACrB;AAAA,IACF,KAAK;AACH,cAAQ,aAAa;AACrB;AAAA,IACF,KAAK;AACH,cAAQ,aAAa;AACrB;AAAA,IACF,KAAK;AACH,cAAQ,aAAa;AACrB;AAAA,IACF;AACE;AAAA,EACJ;AAEA,SAAO;AAAA,IACL;AAAA,EACF;AACF;AAKA,IAAM,UAAU,CAAC,EAAE,UAAU,MAAwD;AACnF,QAAM,EAAE,OAAO,IAAI,gBAAgB;AACnC,QAAM,WAAW,OAAO,SAAS,IAAI,eAAe,UAAU,eAAe;AAI7E,QAAM,WAAiB;AAAA,IACrB,CAAC,UAAoC;AACnC,YAAM,eAAe;AACrB,UAAI,WAAW;AACb,kBAAU,KAAK,EAAE,MAAM,SAAS,CAAC;AAAA,MACnC;AAAA,IACF;AAAA,IACA,CAAC,SAAS;AAAA,EACZ;AAEA,SAAO;AAAA,IACL,OAAO;AAAA,MACL,CAAC,QAAQ,QAAQ,EAAE,GAAG;AAAA,MACtB;AAAA,IACF;AAAA,EACF;AACF;AAEA,IAAM,WAAW,CAAC,EAAE,KAAK,MAA2C;AAClE,QAAM,WAAW,gBAAgB,sBAAsB,IAAI,CAAC;AAC5D,QAAM,EAAE,SAAS,IAAI,iBAAiB,EAAE,KAAK,CAAC;AAE9C,QAAM,iBAAiB;AACvB,QAAM,WAAW,WAAW,SAAS,SAAS,UAAU;AACxD,QAAM,WAAW,WAAW,eAAe,UAAU,eAAe;AAEpE,SAAO;AAAA,IACL;AAAA,IACA,OAAO;AAAA,MACL,CAAC,QAAQ,QAAQ,EAAE,GAAG;AAAA,MACtB,eAAe,iBAAiB,OAAO;AAAA,MACvC,eAAe;AAAA,IACjB;AAAA,EACF;AACF;AAEA,IAAM,WAAW,CAAC;AAAA,EAChB,MAAM;AAAA,EACN,OAAO;AAAA,EACP,MAAM;AAAA,EACN,UAAU;AAAA,EACV,QAAQ;AAAA,EACR,SAAS;AAAA,EACT,GAAG;AACL,MAAsB;AAEpB,QAAM,eAAe,gBAAgB;AACrC,QAAM,OAAO,cAAa,6CAAc;AACxC,QAAM,EAAE,OAAO,WAAW,IAAI,cAAc,EAAE,KAAK,CAAC;AAEpD,MAAI,CAAC,MAAM;AACT,UAAM,IAAI,MAAM,8EAA8E;AAAA,EAChG;AAEA,QAAM,MAAM,aAAa;AACzB,QAAM,CAAC,oBAAoB,sBAAsB,IAAU,gBAAS,KAAK;AAEzE,QAAM,EAAE,iBAAiB,IAAI,YAAY;AAAA,IACvC,wBAAwB,eAAa,uBAAuB,SAAS;AAAA,IACrE,qBAAqB,MAAM;AACzB,UAAI,KAAK;AAAA,QACP,MAAM;AAAA,QACN,OAAO,EAAE,MAAM,UAAU,EAAE,MAAM,WAAW,SAAS,sDAAsD,EAAE;AAAA,MAC/G,CAAC;AAAA,IACH;AAAA,IACA,mBAAmB,CAAC,OAAO,SAAS;AAClC,UAAI,OAAO;AACT,YAAI,KAAK;AAAA,UACP,MAAM;AAAA,UACN,OAAO;AAAA,YACL;AAAA,YACA,UAAU;AAAA,cACR,MAAM;AAAA,cACN,SAAS,IAAI,wBAAwB,6BAA6B,KAAK;AAAA,cACvE,OAAO;AAAA,YACT;AAAA,UACF;AAAA,QACF,CAAC;AAAA,MACH;AAAA,IACF;AAAA,IACA,qBAAqB,CAAC,SAAS,SAC7B,IAAI,KAAK;AAAA,MACP,MAAM;AAAA,MACN,OAAO,EAAE,MAAM,UAAU,EAAE,MAAM,WAAW,SAAS,SAAS,OAAO,KAAK,EAAE;AAAA,IAC9E,CAAC;AAAA,IACH,kBAAkB,CAAC,MAAM,SAAS;AAEhC,UAAI,KAAK;AAAA,QACP,MAAM;AAAA,QACN,OAAO,EAAE,MAAM,UAAU,EAAE,MAAM,QAAQ,SAAS,MAAM,OAAO,KAAK,EAAE;AAAA,MACxE,CAAC;AAAA,IACH;AAAA,EACF,CAAC;AACD,QAAM,QAAQ,gBAAgB,mBAAmB,IAAI,CAAC;AACtD,QAAM,WAAW,QAAQ,KAAK;AAC9B,QAAM,OAAO,gCAAa,2BAA2B,IAAI;AACzD,MAAI,yBAAyB;AAE7B,MAAI,SAAS,cAAc,SAAS,QAAQ;AAC1C,6BAAyB,QAAS,iBAAwC,gBAAgB;AAAA,EAC5F;AAGA,EAAM,iBAAU,MAAM;AACpB,QAAI,CAAC,QAAQ,IAAI,YAAY,EAAE,QAAQ,OAAO,IAAI,IAAI,GAAG;AACvD;AAAA,IACF;AAEA,QAAI,KAAK,EAAE,MAAM,aAAa,OAAO,EAAE,MAAM,OAAO,aAAa,EAAE,CAAC;AAEpE,WAAO,MAAM,IAAI,KAAK,EAAE,MAAM,gBAAgB,OAAO,EAAE,KAAK,EAAE,CAAC;AAAA,EACjE,GAAG,CAAC,GAAG,CAAC;AAGR,QAAM,WAAiB;AAAA,IACrB,CAAC,UAA+C;AAC9C,mDAAe;AACf,UAAI,CAAC,QAAQ,cAAc;AACzB;AAAA,MACF;AACA,UAAI,KAAK,EAAE,MAAM,gBAAgB,OAAO,EAAE,MAAM,OAAO,MAAM,OAAO,MAAM,EAAE,CAAC;AAC7E,UAAI,wBAAwB;AAC1B,yBAAiB,MAAM,OAAO,KAAK;AAAA,MACrC;AAAA,IACF;AAAA,IACA,CAAC,KAAK,MAAM,cAAc,cAAc,wBAAwB,gBAAgB;AAAA,EAClF;AAEA,QAAM,SAAe;AAAA,IACnB,CAAC,UAA8C;AAC7C,+CAAa;AACb,UAAI,wBAAwB;AAC1B,yBAAiB,MAAM,OAAO,KAAK;AAAA,MACrC;AAAA,IACF;AAAA,IACA,CAAC,YAAY,wBAAwB,gBAAgB;AAAA,EACvD;AAEA,QAAM,UAAgB;AAAA,IACpB,CAAC,UAA8C;AAC7C,iDAAc;AACd,UAAI,wBAAwB;AAC1B,yBAAiB,MAAM,OAAO,KAAK;AAAA,MACrC;AAAA,IACF;AAAA,IACA,CAAC,aAAa,wBAAwB,gBAAgB;AAAA,EACxD;AAEA,EAAM,iBAAU,MAAM;AACpB,QAAI,CAAC,gBAAgB,CAAC,MAAM;AAC1B;AAAA,IACF;AACA,QAAI,KAAK,EAAE,MAAM,gBAAgB,OAAO,EAAE,MAAM,OAAO,aAAa,EAAE,CAAC;AAAA,EACzE,GAAG,CAAC,MAAM,KAAK,YAAY,CAAC;AAE5B,MAAI,CAAC,MAAM;AACT,UAAM,IAAI,MAAM,8EAA8E;AAAA,EAChG;AAGA,QAAM,iBAAiB;AAEvB,QAAM,UAAU,SAAS,QAAQ,WAAW,mBAAAC;AAE5C,MAAI,QAAQ,CAAC;AACb,MAAI,SAAS,OAAO;AAClB,UAAM,IAAI;AACV,UAAM,SAAS,EAAE,UAAU;AAE3B,YAAQ;AAAA,MACN,kBAAkB;AAAA,MAClB,cAAc;AAAA,MACd,WAAW;AAAA,MACX,SAAS,SAAS,MAAM;AAAA,MACxB,WAAW;AAAA,MACX,WAAW;AAAA,MACX,UAAU,CAAC,UAA+C;AAExD,cAAM,cAAc,QAAQ,MAAM,cAAc,MAAM,QAAQ,QAAQ,EAAE;AACxE,iBAAS,KAAK;AAAA,MAChB;AAAA,MACA,MAAM;AAAA,MACN,YAAY;AAAA,IACd;AAAA,EACF;AACA,MAAI,SAAS,cAAc,wBAAwB;AACjD,YAAQ;AAAA,MACN,8BAA8B,qBAAqB,OAAO;AAAA,IAC5D;AAAA,EACF;AAIA,QAAM,EAAE,kBAAkB,IAAI,GAAG,KAAK,IAAI;AAE1C,SAAO;AAAA,IACL;AAAA,IACA,OAAO;AAAA,MACL;AAAA,MACA,OAAO,wBAAS;AAAA,MAChB;AAAA,MACA;AAAA,MACA;AAAA,MACA,eAAe,iBAAiB,OAAO;AAAA,MACvC,kBAAkB,WAAW,OAAO;AAAA,MACpC,cAAc;AAAA,MACd,GAAG;AAAA,MACH,GAAG;AAAA,IACL;AAAA,EACF;AACF;AAMA,IAAM,YAAY;AAOlB,IAAM,OAAa,kBAAmC,CAAC,EAAE,WAAW,UAAU,GAAG,KAAK,GAAG,iBAAiB;AACxG,QAAM,OAAO,QAAQ,EAAE,UAAqB,CAAC;AAE7C,QAAM,EAAE,UAAU,kBAAkB,GAAG,kBAAkB,IAAI,KAAK;AAElE,SACE;AAAA,IAAC,mBAAAC;AAAA,IAAA;AAAA,MACE,GAAG;AAAA,MACH,GAAG;AAAA,MACJ,UAAU,0CAAqB,kBAAkB,QAAQ;AAAA,MACzD,KAAK;AAAA;AAAA,EACP;AAEJ,CAAC;AAED,KAAK,cAAc;AAMnB,IAAM,aAAa;AACnB,IAAM,mBAAmB;AACzB,IAAM,mBAAmB;AA8BzB,IAAM,QAAc,kBAA6C,CAAC,EAAE,YAAY,GAAG,KAAK,GAAG,iBAAiB;AA/Z5G,MAAAC;AAgaE,QAAM,UAAU,aAAa;AAC7B,QAAM,UAAU,QAAQ,YAAY,EAAE;AAEtC,QAAM,gBAAgB,QAAQ,eAAe,SAAQA,MAAA,QAAQ,WAAR,gBAAAA,IAAgB,IAAI,KAAK,KAAK;AAGnF,QAAM,aAAa,aAAa,QAAQ;AAExC,SAAO,aAAa,OAClB,6CAAC,aAAa,UAAb,EAAsB,OAAO,EAAE,MAAM,KAAK,KAAK,GAC9C;AAAA,IAAC;AAAA;AAAA,MACE,GAAG;AAAA,MACJ,KAAK;AAAA;AAAA,EACP,GACF;AAEJ,CAAC;AAED,IAAM,aAAmB,kBAA6C,CAAC,OAAO,iBAAiB;AAC7F,QAAM,EAAE,UAAU,GAAG,KAAK,IAAI;AAC9B,QAAM,QAAQ,SAAS,EAAE,MAAM,KAAK,KAAK,CAAC;AAC1C,QAAM,EAAE,OAAO,WAAW,IAAI,cAAc,EAAE,MAAM,KAAK,KAAK,CAAC;AAE/D,SACE;AAAA,IAAC,mBAAAC;AAAA,IAAA;AAAA,MACE,GAAG,MAAM;AAAA,MACT,GAAG;AAAA,MACJ,KAAK;AAAA,MAEJ,iBAAO,aAAa,aAAa,SAAS,UAAU,IAAI;AAAA;AAAA,EAC3D;AAEJ,CAAC;AAED,MAAM,cAAc;AACpB,WAAW,cAAc;AAuCzB,SAAS,WAAW,EAAE,SAAS,GAAuB;AACpD,QAAM,QAAQ,gBAAgB;AAC9B,QAAM,EAAE,SAAS,IAAI,iBAAiB,EAAE,MAAM,+BAAO,KAAK,CAAC;AAC3D,QAAM,EAAE,MAAM,IAAI,cAAc,EAAE,MAAM,+BAAO,KAAK,CAAC;AAErD,QAAM,WAAU,qCAAU,oBAAmB,0BAA0B,SAAS,QAAQ,UAAU,qCAAU;AAC5G,QAAM,QAAQ,qCAAU;AAExB,QAAM,aAAa,EAAE,OAAO,SAAS,MAAM;AAE3C,SAAO,SAAS,UAAU;AAC5B;AAEA,WAAW,cAAc;AAMzB,IAAM,aAAa;AA8CnB,IAAM,QAAc;AAAA,EAClB,CAAC,OAAuB,iBAAiB;AA5iB3C,QAAAD,KAAAE,KAAA;AA6iBI,UAAM,YAAQ,8BAAS;AACvB,UAAM,QAAQ,SAAS,KAAK;AAE5B,UAAM,yBAAyB,SAAQF,MAAA,MAAM,MAAM,iBAAZ,gBAAAA,IAA0B,SAAS,WAAW;AACrF,UAAM,wBAAyB,CAAC,QAAQ,SAAS,KAAK,EAA+B,SAAS,MAAM,MAAM,IAAI;AAC9G,UAAM,kBAAkB,gBAAgB,YAAY,IAAI;AAExD,gBAAM,cAAN,mBAAiB;AAAA,UACf,wCAAsB,kBAAkB;AAAA,QACtC,OAAME,MAAA,MAAM,SAAN,OAAAA,MAAc;AAAA;AAAA,QAEpB,QAAQ,QAAQ,+BAAO,MAAM;AAAA;AAAA,QAE7B,SAAS,QAAQ,+BAAO,OAAO;AAAA;AAAA,QAE/B,kBAAkB,QAAQ,+BAAO,gBAAgB;AAAA,MACnD,CAAC;AAAA;AAGH,QAAI,mBAAmB,0BAA0B,uBAAuB;AACtE,aACE;AAAA,QAAC;AAAA;AAAA,UACC,KAAK;AAAA,UACJ,GAAG;AAAA;AAAA,MACN;AAAA,IAEJ;AAEA,QAAI,0BAA0B,CAAC,uBAAuB;AACpD,2BAAO;AAAA,QACL;AAAA,MACF;AAAA,IACF,WAAW,wBAAwB;AACjC,2BAAO;AAAA,QACL;AAAA,MACF;AAAA,IACF;AAEA,WACE;AAAA,MAAC,MAAM;AAAA,MAAN;AAAA,QACC,KAAK;AAAA,QACJ,GAAG,MAAM;AAAA;AAAA,IACZ;AAAA,EAEJ;AACF;AAEA,MAAM,cAAc;AAEpB,IAAM,2BAAiC;AAAA,EACrC,CAAC,OAAuB,iBAAiB;AACvC,UAAM,kBAAkB,gBAAgB,YAAY,IAAI;AACxD,UAAM,2BAA2B,yBAAyB;AAE1D,IAAM,iBAAU,MAAM;AACpB,UAAI,0BAA0B;AAC5B,2DAAiB,KAAK,EAAE,MAAM,gCAAgC;AAAA,MAChE;AAAA,IACF,GAAG,CAAC,0BAA0B,eAAe,CAAC;AAE9C,UAAM,QAAQ,SAAS,KAAK;AAC5B,WACE;AAAA,MAAC,MAAM;AAAA,MAAN;AAAA,QACC,KAAK;AAAA,QACJ,GAAG,MAAM;AAAA;AAAA,IACZ;AAAA,EAEJ;AACF;AAMA,IAAM,aAAa;AAanB,IAAM,QAAQ,mBAAAC;AAEd,MAAM,cAAc;AAMpB,IAAM,cAAc;AAUpB,IAAM,SAAS,mBAAAC;AAEf,OAAO,cAAc;AAMrB,IAAM,oBAAoB;AAC1B,IAAM,mBAAmB;AAiDzB,IAAM,cAAoB;AAAA,EACxB,CAAC,EAAE,UAAU,OAAO,UAAU,MAAM,GAAG,KAAK,GAAG,iBAAiB;AAC9D,UAAM,EAAE,OAAO,IAAI,gBAAgB;AAEnC,UAAM,QAAQ,iCAAS;AAEvB,QAAI,CAAC,SAAU,QAAQ,MAAM,SAAS,MAAO;AAC3C,aAAO;AAAA,IACT;AAEA,UAAM,OAAO,UAAU,yBAAO;AAC9B,UAAM,QAAQ,OAAO,aAAa,aAAa,SAAS,KAAK,IAAI;AAEjE,QAAI,gBAAgB,KAAK,GAAG;AAC1B,YAAM,IAAI,0BAA0B,sDAAsD;AAAA,IAC5F;AAEA,WACE;AAAA,MAAC;AAAA;AAAA,QACC,MAAK;AAAA,QACJ,GAAG;AAAA,QACJ,KAAK;AAAA,QAEJ,mBAAS,MAAM;AAAA;AAAA,IAClB;AAAA,EAEJ;AACF;AAsBA,IAAM,aAAmB;AAAA,EACvB,CAAC,EAAE,UAAU,OAAO,UAAU,MAAM,MAAM,GAAG,KAAK,GAAG,iBAAiB;AACpE,UAAM,eAAe,gBAAgB;AACrC,UAAM,aAAY,6CAAc,SAAQ;AACxC,UAAM,EAAE,SAAS,IAAI,iBAAiB,EAAE,MAAM,UAAU,CAAC;AAEzD,QAAI,GAAE,qCAAU,UAAS,UAAU;AACjC,aAAO;AAAA,IACT;AAEA,UAAM,QAAQ,SAAS;AAEvB,QAAI,CAAC,OAAO;AACV,aAAO;AAAA,IACT;AAEA,UAAM,OAAO,UAAU,yBAAO;AAC9B,UAAM,QAAQ,OAAO,aAAa,aAAa,SAAS,KAAK,IAAI;AAIjE,QAAI,gBAAgB,KAAK,GAAG;AAC1B,YAAM,IAAI,0BAA0B,qDAAqD;AAAA,IAC3F;AAEA,WACE;AAAA,MAAC,mBAAAC;AAAA,MAAA;AAAA,QACC,mBAAiB,MAAM;AAAA,QAEtB,GAAG;AAAA,QACJ,KAAK;AAAA,QACL,SAAO;AAAA,QAEP,uDAAC,QAAM,mBAAS,MAAM,SAAQ;AAAA;AAAA,IAChC;AAAA,EAEJ;AACF;AAEA,YAAY,cAAc;AAC1B,WAAW,cAAc;;;AQzyBzB,IAAAC,iBAA0B;AAC1B,IAAAC,qBAAuC;AACvC,IAAAC,gBAAkB;;;ACFX,SAAS,8BAA8B,UAAkB;AAC9D,SAAO,SAAS,QAAQ,kBAAkB,EAAE;AAC9C;;;ADcO,IAAM,6BAA6B,MAAM;AAC9C,QAAM,UAAU,cAAAC,QAAM,OAAe;AAMrC,QAAM,kBAAc,0BAAU;AAE9B,MAAI,aAAa;AACf,QAAI,QAAQ,SAAS;AACnB,aAAO,QAAQ;AAAA,IACjB,OAAO;AAEL,cAAQ,UAAU,8BAA8B,YAAY,QAAQ;AACpE,aAAO,QAAQ;AAAA,IACjB;AAAA,EACF;AAWA,QAAM,eAAW,gCAAY,KAAK;AAClC,QAAM,YAAY,SAAS,MAAM,GAAG,EAAE,OAAO,OAAO;AAKpD,QAAM,iBAAiB,OAAO,WAAO,8BAAU,KAAK,CAAC,CAAC,EACnD,OAAO,OAAK,MAAM,QAAQ,CAAC,CAAC,EAC5B,KAAK,QAAQ;AAChB,MAAI,QAAQ,SAAS;AACnB,WAAO,QAAQ;AAAA,EACjB,OAAO;AAEL,YAAQ,UAAU,IAAI,UAAU,MAAM,GAAG,UAAU,SAAS,eAAe,MAAM,EAAE,KAAK,GAAG,CAAC;AAC5F,WAAO,QAAQ;AAAA,EACjB;AACF;;;ApCCS,IAAAC,sBAAA;AAxCT,IAAM,YAAQ,4BAAY,qBAAqB,EAAE,QAAQ,CAAC;AAC1D,MAAM,MAAM;AAEZ,SAAS,mBAAmB,EAAE,UAAU,YAAY,GAA4B;AAC9E,QAAM,YAAQ,8BAAS;AACvB,QAAM,SAAS,eAAe;AAC9B,QAAM,UAAU,aAAa;AAE7B,+BAAU,MAAM;AACd,QAAI,CAAC,SAAS,CAAC,QAAQ;AACrB;AAAA,IACF;AAGA,UAAM,YAAY,MAAM;AACtB,YAAM,MAA6B;AAAA,QACjC,MAAM;AAAA,QACN;AAAA,QACA;AAAA,QACA;AAAA,QACA;AAAA,QACA,YAAY;AAAA,MACd;AAEA,UAAI,MAAM,YAAY,EAAE,IAAI,GAAG,GAAG;AAChC,cAAM,KAAK,GAAG;AAAA,MAChB;AAAA,IACF,CAAC;AAGD,QAAI,WAAW,MAAM,YAAY,EAAE,IAAI,EAAE,MAAM,aAAa,CAAC,GAAG;AAC9D,YAAM,KAAK;AAAA,QACT,MAAM;AAAA,QACN;AAAA,MACF,CAAC;AAAA,IACH;AAAA,EAGF,GAAG,CAAC,OAAO,aAAa,mCAAS,IAAI,CAAC,CAAC,MAAM,CAAC;AAE9C,SAAO,6CAAC,gBAAgB,UAAhB,EAAyB,UAAU,OAAQ,UAAS;AAC9D;AAmCO,SAAS,WAAW;AAAA,EACzB;AAAA,EACA,cAAc;AAAA,EACd,WAAW;AAAA,EACX,MAAM;AAAA,EACN,UAAU,QAAQ;AACpB,GAAwC;AAvGxC,MAAAC;AAwGE,QAAM,YAAQ,8BAAS;AACvB,QAAM,eAAe,2BAA2B;AAChD,QAAM,OAAO,YAAY,gBAAgB;AAEzC,GAAAA,MAAA,MAAM,cAAN,gBAAAA,IAAiB;AAAA,QACf,yCAAsB,uBAAuB;AAAA,MAC3C;AAAA,MACA,UAAU,QAAQ,QAAQ;AAAA,MAC1B;AAAA,MACA;AAAA,IACF,CAAC;AAAA;AAIH,QAAM,UAAU,YAAY,QAAQ,UAAU,mBAAmB,eAAe;AAChF,QAAM,aAAa,SAAS,OAAO,SAAS;AAE5C,SACE;AAAA,IAAC;AAAA;AAAA,MACC,UAAU;AAAA,MACV;AAAA,MAEA,uDAAC,qBACC,wDAAC,sBAAmB,aACjB;AAAA,qBACC,6CAAC,oCACC,uDAAC,QAAM,oBAAS,GAClB,IACE;AAAA,QACJ,6CAAC,mCAAa,UAAS;AAAA,SACzB,GACF;AAAA;AAAA,EACF;AAEJ;;;AsC1IA,IAAAC,sBAAyB;AACzB,IAAAC,oBAAsC;;;ACAtC,IAAAC,qBAAqB;AACrB,IAAAC,iBAA4B;AAC5B,IAAAC,SAAuB;;;ACHvB,IAAAC,gBAA4B;AAMrB,IAAM,iBAAiB;AAAA,EAC5B,KAAK;AAAA,EACL,KAAK;AACP;AAqCO,SAAS,cACdC,QACA,MACA,OAA0B,eAAe,KACd;AAC3B,QAAM,YAAQ;AAAA,IACZA;AAAA,IACA,OAAK;AAAA,IACL,CAAC,MAAM,SAAS,KAAK,SAAS,KAAK;AAAA,EACrC;AAEA,MAAI,OAAO,SAAS,UAAU;AAC5B,WAAO,MAAM,OAAO,IAAI;AAAA,EAC1B;AAEA,MAAI,CAAC,MAAM,QAAQ,IAAI,GAAG;AACxB,UAAM,IAAI,MAAM,kDAAkD;AAAA,EACpE;AAEA,UAAQ,MAAM;AAAA,IACZ,KAAK,eAAe,KAAK;AACvB,YAAM,WAAW,IAAI,IAAI,KAAK,OAAO,SAAO,MAAM,OAAO,GAAG,CAAC,CAAC;AAC9D,aAAO,EAAE,QAAQ,SAAS,OAAO,GAAG,YAAY,SAAS;AAAA,IAC3D;AAAA,IACA,KAAK,eAAe;AAClB,aAAO,KAAK,WAAW,MAAM,KAAK,OAAO,KAAK,MAAM,SAAO,MAAM,OAAO,GAAG,CAAC,IAAI;AAAA,IAClF;AACE,aAAO;AAAA,EACX;AACF;;;AC3EA,IAAAC,SAAuB;AAKhB,SAAS,8BAA8B,aAAqB;AACjE,QAAM,eAAqB,qBAAc,KAAK;AAC9C,QAAM,mBAAmB,aAAa;AAEtC,WAAS,SAAS,EAAE,SAAS,GAAkC;AAC7D,WAAa;AAAA,MACX;AAAA,MACA;AAAA,QACE,OAAO;AAAA,MACT;AAAA,MACA;AAAA,IACF;AAAA,EACF;AAEA,WAAS,cAAc;AAEvB,WAASC,YAAW,sBAA+B,OAAO;AACxD,UAAM,UAAgB,kBAAW,YAAY;AAE7C,QAAI,CAAC,uBAAuB,CAAC,SAAS;AACpC,YAAM,IAAI;AAAA,QACR,yBAAyB,SAAS,WAAW,4BAA4B,SAAS,WAAW;AAAA,MAC/F;AAAA,IACF;AAEA,WAAO;AAAA,EACT;AAEA,SAAO;AAAA,IACL;AAAA,IACA,kBAAkBA;AAAA,EACpB;AACF;;;AFYM,IAAAC,sBAAA;AARC,IAAM,0BAA0B,8BAA8B,yBAAyB;AAEvF,SAAS,qBAAqB,EAAE,UAAU,GAAG,MAAM,GAA8B;AACtF,QAAM,YAAY,gBAAgB,YAAY;AAC9C,QAAM,cAAc,cAAc,WAAW,CAAC,sBAAsB,uBAAuB,GAAG,eAAe,GAAG;AAEhH,SAAO,cACL,6CAAC,wBAAwB,UAAxB,EACC,uDAAC,SAAK,GAAG,OAAQ,UAAS,GAC5B,IACE;AACN;AAEO,SAAS,qBAAqB,EAAE,UAAU,GAAG,MAAM,GAA8B;AACtF,QAAM,YAAY,gBAAgB,YAAY;AAC9C,QAAM,cAAc,cAAc,WAAW,CAAC,sBAAsB,uBAAuB,GAAG,eAAe,GAAG;AAEhH,SAAO,cACL,6CAAC,wBAAwB,UAAxB,EACC,uDAAC,SAAK,GAAG,OAAQ,UAAS,GAC5B,IACE;AACN;AAEA,IAAM,0BAA0B;AAwBzB,IAAM,0BAAgC;AAAA,EAC3C,CAAC,EAAE,SAAS,UAAU,MAAM,GAAG,KAAK,GAAG,iBAAiB;AACtD,UAAM,YAAY,gBAAgB,YAAY;AAC9C,UAAM,WAAW,UAAU,YAAY;AAEvC,UAAM,wBAAwB,SAAS,QAAQ,MAAM,OAAO,OAAO;AACnE,UAAM,SAAS,sBAAsB,KAAK,CAAAC,YAAU,SAASA,QAAO,QAAQ;AAE5E,UAAM,yBAAqB;AAAA,MACzB,SAAS,SAAS,qBAAqB,WAAW;AAAA,MAClD,WAAM;AAnGZ,YAAAC;AAmGe,gBAAAA,MAAA,+BAAO,QAAQ,kBAAf,gBAAAA,IAA8B;AAAA;AAAA,IACzC;AAEA,UAAM,0BAAgC;AAAA,MACpC,MAAM,UAAU,KAAK,EAAE,MAAM,mBAAmB,OAAO,CAAC;AAAA,MACxD,CAAC,WAAW,MAAM;AAAA,IACpB;AAGA,QAAI,uBAAuB,MAAM;AAC/B,aAAO;AAAA,IACT;AAEA,UAAM,OAAO,UAAU,0BAAO;AAC9B,UAAM,eAAe,UAAU,CAAC,IAAI,EAAE,MAAM,SAAkB;AAE9D,WAAO,SACL;AAAA,MAAC;AAAA;AAAA,QACE,GAAG;AAAA,QACH,GAAG;AAAA,QACJ,KAAK;AAAA,QACL,SAAS;AAAA,QAER,sBAAY,OAAO;AAAA;AAAA,IACtB,IACE;AAAA,EACN;AACF;AAEA,wBAAwB,cAAc;;;AGjHf,IAAAC,sBAAA;AANhB,IAAM,yBAAyB,0BAAuD,wBAAwB;AAE9G,SAAS,oBAAoB,OAAiC;AACnE,QAAM,YAAY,gBAAgB,YAAY;AAC9C,QAAM,cAAc,cAAc,WAAW,sBAAsB;AAEnE,SAAO,cAAc,6CAAC,4BAA0B,GAAG,OAAO,IAAK;AACjE;AAEA,SAAS,yBAAyB,OAAiC;AACjE,QAAM,MAAM,2BAA2B;AAEvC,MAAI,CAAC,KAAK;AACR,WAAO;AAAA,EACT;AAEA,SACE,6CAAC,uBAAuB,UAAvB,EAAgC,UAAU,KACzC;AAAA,IAAC;AAAA;AAAA,MACC,WAAW;AAAA,MACV,GAAG;AAAA;AAAA,EACN,GACF;AAEJ;;;AClBuB,IAAAC,sBAAA;AANhB,IAAM,iBAAiB,0BAA+C,gBAAgB;AAEtF,SAAS,YAAY,OAAyB;AACnD,QAAM,YAAY,gBAAgB,YAAY;AAC9C,QAAM,cAAc,cAAc,WAAW,aAAa;AAE1D,SAAO,cAAc,6CAAC,oBAAkB,GAAG,OAAO,IAAK;AACzD;AAEA,SAAS,iBAAiB,OAAyB;AACjD,QAAM,MAAM,mBAAmB;AAE/B,MAAI,CAAC,KAAK;AACR,WAAO;AAAA,EACT;AAEA,SACE,6CAAC,eAAe,UAAf,EAAwB,UAAU,KACjC;AAAA,IAAC;AAAA;AAAA,MACC,WAAW;AAAA,MACV,GAAG;AAAA;AAAA,EACN,GACF;AAEJ;;;AChCA,IAAAC,iBAA4B;AAC5B,IAAAA,iBAAuC;;;ACFhC,IAAM,gBAAgB,CAAC,SAA6B,YAAyC;AAClG,MAAI,CAAC,WAAW,CAAC,SAAS;AACxB,WAAO;AAAA,EACT;AAEA,MAAI,YAAY,SAAS;AACvB,WAAO;AAAA,EACT;AAEA,SAAO,QAAQ,WAAW,GAAG,OAAO,GAAG;AACzC;;;ADgCQ,IAAAC,sBAAA;AApBD,IAAM,uBAAuB,0BAAqD,sBAAsB;AACxG,IAAM,wBAAwB,0BAAsD,uBAAuB;AAElH,IAAM,qBAAqB,CAAC,UAA6E;AAzBzG,MAAAC;AA0BE,UAAAA,MAAA,MAAM,QAAQ,kBAAd,gBAAAA,IAA6B;AAAA;AAE/B,SAAS,yBAAyB;AAAA,EAChC;AAAA,EACA;AAAA,EACA;AAAA,EACA,GAAG;AACL,GAAkH;AAChH,QAAM,YAAY,gBAAgB,YAAY;AAC9C,QAAM,cAAU,4BAAY,UAAU,kBAAkB;AACxD,QAAM,wBAAwB,cAAc,WAAW,CAAC,yBAAyB,uBAAuB,CAAC;AACzG,QAAM,eAAW,4BAAY,CAAC,SAAkB,UAAU,cAAc,SAAS,IAAI,IAAI,OAAQ,CAAC,OAAO,CAAC;AAE1G,SACE,6CAAC,kBAAkB,UAAlB,EAA2B,OAAO,EAAE,SAAkB,WAAW,SAAS,GACxE,gCAAsB,SAAS,OAC9B;AAAA,IAAC;AAAA;AAAA,MACC,WAAW;AAAA,MACV,GAAG;AAAA,MAEH;AAAA;AAAA,EACH,GAEJ;AAEJ;AAIA,SAAS,eAAe;AACtB,QAAM,iBAAiB,qBAAqB,YAAY,IAAI;AAC5D,QAAM,kBAAkB,sBAAsB,YAAY,IAAI;AAE9D,SAAO,kBAAkB;AAC3B;AAYO,SAAS,eAAe,EAAE,UAAU,KAAK,GAAwB;AACtE,QAAM,EAAE,OAAO,IAAI,YAAY,IAAI;AACnC,QAAM,YAAY,aAAa;AAE/B,gCAAU,MAAM;AACd,QAAI,WAAW;AACb,gBAAU,KAAK,EAAE,MAAM,qBAAqB,QAAQ,KAAgC,CAAC;AAAA,IACvF;AAEA,WAAO,MAAM;AACX,WAAI,uCAAW,cAAc,YAAW,UAAU;AAChD,kBAAU,KAAK,EAAE,MAAM,uBAAuB,QAAQ,KAAgC,CAAC;AAAA,MACzF;AAAA,IACF;AAAA,EACF,GAAG,CAAC,WAAW,IAAI,CAAC;AAEpB,SAAO,SAAS,6EAAG,UAAS,IAAM;AACpC;AAQO,SAAS,oBAAoB,OAAiC;AACnE,QAAM,YAAY,gBAAgB,YAAY;AAC9C,QAAM,EAAE,YAAY,aAAa,IAAI,cAAc,WAAW,CAAC,sBAAsB,qBAAqB,CAAC;AAE3G,MAAI,aAAa,IAAI,oBAAoB,GAAG;AAC1C,WAAO,6CAAC,0BAAwB,GAAG,OAAO;AAAA,EAC5C;AAEA,MAAI,aAAa,IAAI,qBAAqB,GAAG;AAC3C,WAAO,6CAAC,2BAAyB,GAAG,OAAO;AAAA,EAC7C;AAEA,SAAO;AACT;AASO,SAAS,kBAAkB,OAAiC;AACjE,QAAM,YAAY,gBAAgB,YAAY;AAC9C,QAAM,cAAc,cAAc,WAAW,oBAAoB;AAEjE,SAAO,cAAc,6CAAC,0BAAwB,GAAG,OAAO,IAAK;AAC/D;AASO,SAAS,mBAAmB,OAAiC;AAClE,QAAM,YAAY,gBAAgB,YAAY;AAC9C,QAAM,cAAc,cAAc,WAAW,qBAAqB;AAElE,SAAO,cAAc,6CAAC,2BAAyB,GAAG,OAAO,IAAK;AAChE;AAEO,SAAS,uBAAuB,OAAiC;AACtE,QAAM,MAAM,yBAAyB;AAErC,MAAI,CAAC,KAAK;AACR,WAAO;AAAA,EACT;AAEA,SAAO,MACL,6CAAC,qBAAqB,UAArB,EAA8B,UAAU,KACvC;AAAA,IAAC;AAAA;AAAA,MACC,UAAU;AAAA,MACT,GAAG;AAAA;AAAA,EACN,GACF,IACE;AACN;AAEO,SAAS,wBAAwB,OAAiC;AACvE,QAAM,MAAM,0BAA0B;AAEtC,MAAI,CAAC,KAAK;AACR,WAAO;AAAA,EACT;AAEA,SAAO,MACL,6CAAC,sBAAsB,UAAtB,EAA+B,UAAU,KACxC;AAAA,IAAC;AAAA;AAAA,MACC,UAAU;AAAA,MACT,GAAG;AAAA;AAAA,EACN,GACF,IACE;AACN;;;ANtHa,IAAAC,sBAAA;AAxCN,IAAM,gBAAgB;AAAA,EAC3B,OAAO;AAAA,EACP,eAAe;AAAA,EACf,mBAAmB;AAAA,EACnB,mBAAmB;AAAA,EACnB,kBAAkB;AACpB;AA2BO,SAAS,WAAW,OAAwB;AA/CnD,MAAAC;AAgDE,QAAM,YAAQ,8BAAS;AAEvB,GAAAA,MAAA,MAAM,cAAN,gBAAAA,IAAiB,WAAO,yCAAsB,uBAAuB,EAAE,MAAM,MAAM,KAAK,CAAC;AAEzF,UAAQ,MAAM,MAAM;AAAA,IAClB,KAAK,cAAc,OAAO;AACxB,aAAO,6CAAC,eAAa,GAAG,OAAO;AAAA,IACjC,KAAK,cAAc,eAAe;AAChC,aAAO,6CAAC,uBAAqB,GAAG,OAAO;AAAA,IACzC,KAAK,cAAc,iBAAiB;AAClC,aAAO,6CAAC,wBAAsB,GAAG,OAAO;AAAA,IAC1C,KAAK,cAAc,iBAAiB;AAClC,aAAO,6CAAC,wBAAsB,GAAG,OAAO;AAAA,IAC1C,KAAK,cAAc,gBAAgB;AACjC,aAAO,6CAAC,uBAAqB,GAAG,OAAO;AAAA,IACzC;AACE,YAAM,IAAI,0BAA0B,2BAA2B,OAAO,KAAK,aAAa,EAAE,KAAK,GAAG,CAAC,GAAG;AAAA,EAC1G;AACF;;;AQlEA,IAAAC,UAAuB;;;ACCvB,yBAAO;;;ACDP,IAAAC,qBAAqB;AACrB,IAAAC,UAAuB;AAkDjB,IAAAC,uBAAA;AA9CN,IAAM,wBAAwB;AAC9B,IAAM,2BAA2B;AAAA,EAC/B,OAAO;AAAA,EACP,UAAU;AAAA,EACV,mBAAmB;AAAA,EACnB,mBAAmB;AACrB;AAsBO,IAAM,iBAAuB;AAAA,EAClC,CAAC,EAAE,SAAS,IAAI,GAAG,KAAK,GAAG,iBAAiB;AAC1C,UAAM,WAAW,gBAAgB,YAAY;AAE7C,UAAM,OAAO,UAAU,0BAAO;AAC9B,UAAM,eAAe,UAAU,CAAC,IAAI,EAAE,MAAM,SAAkB;AAE9D,UAAM,YAAkB,oBAAY,MAAM;AACxC,YAAM,OAAO,yBAAyB,EAAE;AAExC,UAAI,SAAS,YAAY,EAAE,IAAI,EAAE,KAAK,CAAC,GAAG;AACxC,iBAAS,KAAK,EAAE,KAAK,CAAC;AAAA,MACxB,OAAO;AACL,gBAAQ,KAAK,2BAA2B;AAAA,MAC1C;AAAA,IACF,GAAG,CAAC,UAAU,EAAE,CAAC;AAEjB,WACE;AAAA,MAAC;AAAA;AAAA,QACE,GAAG;AAAA,QACH,GAAG;AAAA,QACJ,SAAS;AAAA,QACT,KAAK;AAAA;AAAA,IACP;AAAA,EAEJ;AACF;AAEA,eAAe,cAAc;;;AC7D7B,IAAAC,qBAAqB;AACrB,IAAAC,iBAA4B;AAC5B,IAAAC,UAAuB;AA0DjB,IAAAC,uBAAA;AAvCN,IAAM,sBAAsB;AAYrB,IAAM,eAAqB;AAAA,EAChC,CAAC,EAAE,SAAS,UAAU,GAAG,KAAK,GAAG,iBAAiB;AAChD,UAAM,iBAAiB,qBAAqB,YAAY,IAAI;AAC5D,UAAM,kBAAkB,sBAAsB,YAAY,IAAI;AAC9D,UAAM,WAAW,kBAAkB;AAEnC,QAAI,CAAC,UAAU;AACb,YAAM,IAAI,MAAM,2EAA2E;AAAA,IAC7F;AAEA,UAAM,oBAA2C;AAAA,MAC/C;AAAA,MACA,YAAU;AAAA,QACR,YAAY,MAAM,QAAQ;AAAA,QAC1B,iBAAiB,MAAM,QAAQ;AAAA,MACjC;AAAA,MACA,CAAC,GAAG,MAAM,EAAE,oBAAoB,EAAE,mBAAmB,EAAE,eAAe,EAAE;AAAA,IAC1E;AAEA,QAAI,YAAY,CAAC,cAAc,YAAY;AACzC,aAAO,OAAO,aAAa,aAAa,SAAS,aAAa,IAAI;AAAA,IACpE;AAEA,UAAM,OAAO,UAAU,0BAAO;AAC9B,UAAM,eAAe,UAAU,CAAC,IAAI,EAAE,MAAM,SAAkB;AAE9D,WACE;AAAA,MAAC;AAAA;AAAA,QACE,GAAG;AAAA,QACH,GAAG;AAAA,QACJ,UAAU,CAAC,cAAc;AAAA,QACzB,SAAS,MAAM,SAAS,KAAK,EAAE,MAAM,QAAQ,CAAC;AAAA,QAC9C,KAAK;AAAA;AAAA,IACP;AAAA,EAEJ;AACF;AAEA,aAAa,cAAc;;;AHZvB,IAAAC,uBAAA;AAhCJ,IAAM,sBAAsB;AAmBrB,IAAM,eAAqB,mBAA0D,CAAC,OAAO,iBAAiB;AACnH,QAAM,EAAE,QAAQ,UAAU,QAAQ,GAAG,KAAK,IAAI;AAC9C,MAAI;AAEJ,MAAI,QAAQ;AACV,WAAO;AAAA,EACT,WAAW,UAAU;AACnB,WAAO;AAAA,EACT,WAAW,QAAQ;AACjB,WAAO;AAAA,EACT;AAEA,SAAO,OACL;AAAA,IAAC;AAAA;AAAA,MACC,IAAI;AAAA,MACH,GAAG;AAAA,MACJ,KAAK;AAAA;AAAA,EACP,IACE;AACN,CAAC;AAED,aAAa,cAAc;;;AInE3B,IAAAC,qBAAqB;AACrB,IAAAC,UAAuB;AAgCjB,IAAAC,uBAAA;AArBN,IAAM,uBAAuB;AAStB,IAAM,gBAAsB;AAAA,EACjC,CAAC,EAAE,SAAS,GAAG,KAAK,GAAG,iBAAiB;AACtC,UAAM,WAAW,gBAAgB,YAAY,IAAI;AAEjD,UAAM,OAAO,UAAU,0BAAO;AAC9B,UAAM,eAAe,UAAU,CAAC,IAAI,EAAE,MAAM,SAAkB;AAE9D,UAAM,YAAkB,oBAAY,MAAM;AACxC,2CAAU,KAAK,EAAE,MAAM,uBAAuB;AAAA,IAChD,GAAG,CAAC,QAAQ,CAAC;AAEb,WACE;AAAA,MAAC;AAAA;AAAA,QACE,GAAG;AAAA,QACH,GAAG;AAAA,QACJ,SAAS;AAAA,QACT,KAAK;AAAA;AAAA,IACP;AAAA,EAEJ;AACF;AAEA,cAAc,cAAc;;;AC9BrB,SAAS,uBAA+B;AAC7C,SAAO,gBAAgB,YAAY,4BAA4B;AACjE;AAUO,SAAS,mBAA2B;AACzC,SAAO,gBAAgB,YAAY,wBAAwB;AAC7D;","names":["import_client_only","import_clerk_react","import_telemetry","import_react","import_xstate","_a","_b","_a","_b","_a","import_xstate","factor","_a","_b","import_webauthn","import_xstate","import_xstate","_a","import_xstate","import_xstate","_a","import_xstate","_a","_b","import_underscore","_a","_b","import_react","import_url","import_react","import_react","useContext","useSelector","actor","useSelectorUnbound","import_react","import_clerk_react","composeEventHandlers","originalEventHandler","ourEventHandler","checkForDefaultPrevented","handleEvent","event","defaultPrevented","import_react_form","React","import_shared","React","_a","_b","React","React","import_jsx_runtime","OTPInput","_a","_b","RadixControl","import_jsx_runtime","RadixControl","RadixForm","_a","RadixField","_b","RadixLabel","RadixSubmit","RadixFormMessage","import_router","import_navigation","import_react","React","import_jsx_runtime","_a","import_clerk_react","import_telemetry","import_react_slot","import_react","React","import_react","actor","React","useContext","import_jsx_runtime","factor","_a","import_jsx_runtime","import_jsx_runtime","import_react","import_jsx_runtime","_a","import_jsx_runtime","_a","React","import_react_slot","React","import_jsx_runtime","import_react_slot","import_react","React","import_jsx_runtime","import_jsx_runtime","import_react_slot","React","import_jsx_runtime"]}